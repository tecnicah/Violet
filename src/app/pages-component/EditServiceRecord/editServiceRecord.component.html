<div class="main-wrapper padding-general-x" (scroll)="doSomethingOnScroll($event)">
  <div class="page">
    <div class="page__path">
      Operations / Service Records / Edit Service Record
      <button class="page__path--closeButton" (click)="goBack()">Back</button>
      <!-- (click)="goToPage( 'serviceRecord' )" -->
    </div>
    <mat-grid-list cols="4" rowHeight="60px">
      <mat-grid-tile [colspan]="3" [rowspan]="1">
        <div class="page__title title">
          {{ edit_sr_model.numberServiceRecord }}
        </div>
      </mat-grid-tile>


      <!-- *ngIf="__userlog__.role.id == 2" -->
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="page__section-data font-size-12 comments input_final" style="display: flex; height:80%">
          <div>
            <span class="text-mini gray_05">Office</span><br />
            {{getNameOffice(edit_sr_model.office)}}
          </div>
        </div>
      </mat-grid-tile>



    </mat-grid-list>
    <div class="page__section">
      <div class="page__section-data">
        <span class="text-mini gray_05">Status</span><br />
        {{ edit_sr_model?.status?.status }}
      </div>
      <div class="page__section-data">
        <span class="text-mini gray_05">Initial Autho</span><br />
        {{ dateWorker( edit_sr_model.initialAutho ) }}
      </div>
      <div class="page__section-button">


        <!-- BOTON ON HOLD

          <button (click)="InHold()" class="button-icon page__section-button--lineButtons"
          *ngIf="edit_sr_model?.status?.status != 4">
          On Hold
        </button> -->


        <button (click)='active()' class="button-icon page__section-button--lineButtons"
          *ngIf="edit_sr_model?.status?.id == 4">
          Activate
        </button>
      </div>
      <div class="page__section-button" *ngIf="__userlog__.role.id != 3">
        <button (click)="showDialogEditServices()"
          class="button-icon button-icon--adder page__section-button--lineButtons">
          Services
        </button>
      </div>
      <!--<div class="page__section-button"> *ngxPermissionsOnly="['Technical Mangement','Field Service'];"
        <button [ngClass]="{'button-icon': !editing_info, 'button-purple-icon': editing_info}"
                (click)="editInfoToggleInputs()" class="button-icon--pencil page__section-button--lineButtons">
          Edit Info
        </button>
      </div>-->


      <!-- BOTON FOLLOW

      <div class="page__section-button" *ngIf="permission_write">
        <button (click)="followButton()" class="button-icon button-icon--follow page__section-button--lineButtons">
          {{ follow_status_button }}
        </button>
      </div> -->


      <!--div class="page__section-button" *ngIf="permission_write">
        <button (click)="showEscalateDialog()"
          class="button-icon button-icon--escalate page__section-button--lineButtons">
          Escalate
        </button>
      </div-->
      <!--div class="page__section-button" *ngIf="permission_write">
        <button (click)="showInvoiceDialog()" class="button-icon button-icon--money page__section-button--lineButtons">
          Invoice
        </button>
      </div-->
      <div class="page__section-button" *ngIf="__userlog__.role.id != 3">
        <button class="button-icon button-icon--flag page__section-button--lineButtons" (click)="complete()">
          Complete
        </button>
      </div>
    </div>
    <div class="page__title margin-tb-min">
      Assignment & Relocation Info
    </div>

    <mat-grid-list cols="4" rowHeight="70px">
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <!-- input -->
        <!-- <div class="input_central" style="width: 100%; height: 100%;">
          <mat-form-field class="example-full-width">
            <mat-label>Assignee name</mat-label>
            <input matInput placeholder="Assignee name" type="text"
              [(ngModel)]="edit_sr_model.assigneeInformations[0].assigneeName"
              (change)="removeErrorLabel( $event.target.value, {handler: mf_validator, field: 'no_name'} )" />
            <span class="label-error" *ngIf="mf_validator.no_name">
              Field is required
            </span>
          </mat-form-field>
        </div> -->
        <!-- label -->
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Assignee name</span><br />
              {{edit_sr_model.assigneeInformations[0].assigneeName}}
            </div>
          </div>
        </div>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Dependents</span><br />
              {{assign_dependents.length}}
            </div>
          </div>
        </div>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <span class="text-mini gray_05">VIP</span>
            <div><!-- class="table-row__check check"-->
              <img style="width: 15px;height: 15px;" id="check" [src]="check" *ngIf="edit_sr_model.vip == true" />
              <img style="width: 15px;height: 15px;" id="uncheck" [src]="uncheck" *ngIf="edit_sr_model.vip == false" />
            </div>
          </div>
        </div>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <span class="text-mini gray_05">Confidential Move</span>
            <div><!--class="table-row__check check"-->
              <img style="width: 15px;height: 15px;" id="check" [src]="check"
                *ngIf="edit_sr_model.confidentialMove == true" />
              <img style="width: 15px;height: 15px;" id="uncheck" [src]="uncheck"
                *ngIf="edit_sr_model.confidentialMove == false" />
            </div>
          </div>
        </div>

      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <span class="text-mini gray_05">Create as Urgent</span>
            <div><!--class="table-row__check check"-->
              <img style="width: 15px;height: 15px;" id="check" [src]="check"
                *ngIf="edit_sr_model.urgent == true" />
              <img style="width: 15px;height: 15px;" id="uncheck" [src]="uncheck"
                *ngIf="edit_sr_model.urgent == false" />
            </div>
          </div>
        </div>

      </mat-grid-tile>


      <!-- <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="__userlog__.role.id != 2"> -->
      <!-- select de partner -->
      <!-- <div class="input_central" style="width: 100%;">
          <mat-form-field appearance="fill">
            <mat-label>Partner</mat-label>
            <mat-select matNativeControl [(ngModel)]="edit_sr_model.partnerId"
              (ngModelChange)="partnerChange(); getClient();">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Partner</mat-label>
                <input matInput placeholder="Partner" [(ngModel)]="filterPartner0.coordinator">
              </mat-form-field>
              <mat-option *ngFor="let item of parther_catalogue | filterBy: filterPartner0" [value]="item.id">
                {{ item.coordinator }}
              </mat-option>
              <mat-option disabled *ngIf="(parther_catalogue | filterBy: filterPartner0).length === 0">No matching elements</mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
      <!-- label -->
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="page__section-data font-size-12 comments input_central"
          style="font-weight: bolder; display: flex; height:80%">
          <div>
            <span class="text-mini gray_05" style="font-weight: bolder;">Partner</span><br />
            <span>
              <a class="browser" style="font-weight: bolder;" routerLink="/partner_client/{{edit_sr_model.partnerId}}"
                routerLinkActive="active" rel="bookmark">
                {{getNamePartner(edit_sr_model.partnerId)}}
              </a>
            </span>
          </div>
        </div>
      </mat-grid-tile>

      <!-- <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="__userlog__.role.id == 2">
        <div class="page__section-data font-size-12 comments input_central" style="display: flex; height:80%">
          <div routerLink="/partner_client/{{edit_sr_model.partnerId}}">
            <span class="text-mini gray_05">Partner</span><br />
            <span>
              <b class="browser">
                {{getNamePartner(edit_sr_model.partnerId)}}
              </b>
            </span>
          </div>
        </div>
      </mat-grid-tile> -->


      <!-- select -->
      <!-- <div class="input_central" style="width: 100%;">
          <mat-form-field appearance="fill">
            <mat-label>Client</mat-label>
            <mat-select matNativeControl [(ngModel)]="edit_sr_model.clientId" (selectionChange)="athorizedBy()">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Client</mat-label>
                <input matInput placeholder="Client" [(ngModel)]="filterClient0.name">
              </mat-form-field>
              <mat-option *ngFor="let item of client_catalogue | filterBy: filterClient0" [value]="item.id">
                {{ item.name }}
              </mat-option>
              <mat-option disabled *ngIf="(client_catalogue | filterBy: filterClient0).length === 0">No matching elements
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
      <!-- label -->
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="page__section-data font-size-12 comments input_central"
          style="font-weight: bolder; display: flex; height:80%">
          <div>
            <span class="text-mini gray_05" style="font-weight: bolder;">Client</span><br />
            <span>
              <a class="browser" style="font-weight: bolder;" routerLink="/partner_client/{{edit_sr_model.clientId}}"
                routerLinkActive="active" rel="bookmark">
                {{getNameClient(edit_sr_model.clientId)}}
              </a>
            </span>
          </div>
        </div>
      </mat-grid-tile>

      <!-- <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="__userlog__.role.id == 2">
        <div class="page__section-data font-size-12 comments input_central" style="display: flex; height:80%">
          <div>
            <span class="text-mini gray_05">Client</span><br />
            <span>
              <a class="browser" routerLink="/partner_client/{{edit_sr_model.clientId}}" routerLinkActive="active" target="_blank" rel="bookmark">
               {{getNameClient(edit_sr_model.clientId)}}
              </a>
            </span>
          </div>
        </div>
      </mat-grid-tile> -->

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <!-- input -->
        <!-- <div class="input_central" style="width: 100%;">
          <mat-form-field class="example-full-width">
            <mat-label>Client File Number</mat-label>
            <input matInput placeholder="Client File Number" type="text" [(ngModel)]="edit_sr_model.clientFileNumber"
              (change)="removeErrorLabel( $event.target.value, {handler: mf_validator, field: 'no_fnum'} )" />
            <span class="label-error" *ngIf="mf_validator.no_fnum">
              Field is required
            </span>
          </mat-form-field>
        </div> -->
        <!-- label -->
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Client File Number</span><br />
              {{edit_sr_model.clientFileNumber}}
            </div>
          </div>
        </div>
      </mat-grid-tile>
      <!-- policy type -->
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <!-- <div class="input_final" style="width: 100%;">
          <mat-form-field appearance="fill" style="padding-right: 0 !important;">
            <mat-label>Policy Type</mat-label>
            <mat-select matNativeControl class="textarea"
              [(ngModel)]="edit_sr_model.assigneeInformations[0].policyTypeId">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Policy type</mat-label>
                <input matInput placeholder="Policy type" [(ngModel)]="filterPolicy0.policyType">
              </mat-form-field>
              <mat-option *ngFor="let item of policytype_catalogue| filterBy: filterPolicy0" [value]="item.id">
                {{ item.policyType }}
              </mat-option>
              <mat-option disabled *ngIf="(policytype_catalogue | filterBy: filterPolicy0).length === 0">No matching elements
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <!-- label -->
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Policy Type</span><br />
              {{ getPolicyType(edit_sr_model.assigneeInformations[0].policyTypeId)}}
            </div>
          </div>
        </div>
      </mat-grid-tile>
      <!-- home country  -->
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <!-- select -->
        <!-- <div class="input_central" style="width: 100%;">
          <mat-form-field appearance="fill">
            <mat-label>Home Country </mat-label>
            <mat-select matNativeControl [(ngModel)]="edit_sr_model.assigneeInformations[0].homeCountryId">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Home country</mat-label>
                <input matInput placeholder="Home country" [(ngModel)]="filterHomeCountry0.name">
              </mat-form-field>
              <mat-option *ngFor="let item of country_catalogue | filterBy: filterHomeCountry0" [value]="item.id">
                {{ item.name }}
              </mat-option>
              <mat-option disabled *ngIf="(country_catalogue | filterBy: filterHomeCountry0).length === 0">No matching elements
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <!-- label -->
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Home Country (Current Residence)</span><br />
              <span style="text-transform: capitalize;">{{homeCountry}}</span>
            </div>
          </div>
        </div>
        <!-- <mat-form-field appearance="fill" class="input_central">
          <mat-label>Home Country (Current Residence)</mat-label>
          <mat-select matNativeControl required [disabled]= "__userlog__.role.id != 100000"
            [(ngModel)]="edit_sr_model.assigneeInformations[0].homeCountryId" (selectionChange)="
            removeErrorLabel( $event.value, {handler: nso_ainfo_fields, field: 'no_home'} );
            ableInputsFromAssignmentSection( $event.value, 'client' );
            getcityhome(edit_sr_model.assigneeInformations[0].homeCountryId); athorizedBy();">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>Home Country</mat-label>
              <input matInput placeholder="Home Country" [(ngModel)]="filterHomeCountry0.name">
            </mat-form-field>
            <mat-option *ngFor="let item of country_catalogue_home | filterBy: filterHomeCountry0" [value]="item.id">
              {{ item.name }}
            </mat-option>
            <mat-option disabled *ngIf="(country_catalogue_home | filterBy: filterHomeCountry0).length === 0">No
              matching elements</mat-option>
          </mat-select>
          <span class="label-error" *ngIf="nso_ainfo_fields.no_home">
            Field is required
          </span>
        </mat-form-field> -->
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Home City (Current Residence)</span><br />
              <span style="text-transform: capitalize;">{{homeCity}}</span>
              <!-- {{edit_sr_model.assigneeInformations[0].homeCityId}}
               {{edit_sr_model.assigneeInformations[0].cityHomeName}}  -->
            </div>
          </div>
        </div>
        <!--<mat-form-field class="input_central">
          <mat-label>Home City (Current Residence)</mat-label>
           <mat-select matNativeControl [[(ngModel)]="new_service_record_data.assigneeInformations[0].homeCityId" name="food" [disabled]="!home_city_client_able"
          (selectionChange)="removeErrorLabel( $event.value, {handler: nso_ainfo_fields, field: 'no_city'} ); athorizedBy();Homecitychange();">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>Home City</mat-label>
              <input matInput placeholder="Home City" [(ngModel)]="filterHomeCity.name">
            </mat-form-field>
            <mat-option *ngFor="let food of city_home_catalogue | filterBy: filterHomeCity" [value]="food.id">
              {{food.name}}
            </mat-option>
            <mat-option disabled *ngIf="(city_home_catalogue | filterBy: filterHomeCity).length === 0">No matching
              elements
            </mat-option>
          </mat-select>
          <span class="label-error" *ngIf="nso_ainfo_fields.no_city">
            Field is required
          </span>

          <mat-select matNativeControl [(ngModel)]="edit_sr_model.assigneeInformations[0].homeCityId"
            [disabled]="!home_city_client_able"
            (selectionChange)="removeErrorLabel( $event.value, {handler: nso_ainfo_fields, field: 'no_city'} ); athorizedBy();Homecitychange();">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>Home City</mat-label>
              <input matInput placeholder="Home City" [(ngModel)]="filterHomeCity1.name">
            </mat-form-field>
            <mat-option *ngFor="let item of city_home_catalogue  | filterBy: filterHomeCity1" [value]="item.id">
              {{ item.name }}
            </mat-option>
            <mat-option disabled *ngIf="(city_home_catalogue | filterBy: filterHomeCity1).length === 0">No matching
              elements</mat-option>
          </mat-select>
        </mat-form-field>-->
      </mat-grid-tile>
      <!-- host country -->
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <!-- <div class="input_central" style="width: 100%;">
          <mat-form-field appearance="fill">
            <mat-label>Host Country</mat-label>
            <mat-select matNativeControl [(ngModel)]="edit_sr_model.assigneeInformations[0].hostCountry">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Host country</mat-label>
                <input matInput placeholder="Host country" [(ngModel)]="filterHostCountry0.name">
              </mat-form-field>
              <mat-option *ngFor="let item of country_catalogue | filterBy: filterHostCountry0" [value]="item.id">
                {{ item.name }}
              </mat-option>
              <mat-option disabled *ngIf="(country_catalogue | filterBy: filterHostCountry0).length === 0">No matching elements
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <!-- label -->
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Host Country</span><br />
              {{getHomeCountry(edit_sr_model.assigneeInformations[0].hostCountry)}}
            </div>
          </div>
        </div>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <div class="input_central" style="width: 100%; height: 100%;">
          <div class="page__section-data font-size-12 comments input_central">
            <div>
              <span class="text-mini gray_05">Host City</span><br />
              {{getNameCityHost(edit_sr_model.assigneeInformations[0].hostCityId)}}
            </div>
          </div>
        </div>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="4" [rowspan]="1">
        <mat-form-field class="example-full-width">
          <mat-label>Special Instructions</mat-label>
          <input [disabled]="profileCunsultant == true" matInput #message placeholder="Special Instructions" type="text"
            maxlength="100" [(ngModel)]="edit_sr_model.specialIntructions" />
          <mat-hint align="end">{{message.value.length}} / 100</mat-hint>
        </mat-form-field>
      </mat-grid-tile>
    </mat-grid-list>

    <!-- seccion  Upcoming Appointments -->
    <div class="page__section margin-tb-min">
      <div class="page__section-name" style="font-size: 20px;">
        Upcoming Appointments
      </div>
      <div class="page__section-button page__section-button--big">
        <!-- <button *ngIf="__userlog__.role.id != 3" class="button-icon button-icon--adder" (click)="addApointment(0)"> -->
        <button class="button-icon button-icon--adder" (click)="addApointment(0)">
          Add Appointment
        </button>
      </div>
    </div>
    <div class="page__section-butuonc">
      <button (click)="downloadXls()" class="button-icon button-icon--export" *ngIf="USERDATA.role.id != 3">
        Export
      </button>
    </div>
    <div class="page__section no-padding-tb page__section--justify-end margin-tb-mini" *ngIf="__userlog__.role.id != 3">
      <span (click)="goToPage('Allappointment/')" class="text-mini font-purple-dark cursor-pointer padding-right-mini">
        View All Appointment
      </span>
    </div>
    <!-- tabla upcoming -->
    <div class="page__section" style="padding-top: 0 !important;">
      <table matTableExporter #exporter="matTableExporter" mat-table matSort [dataSource]="appointment" matSort
        style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);" class="main-table">

        <!-- Position Column -->
        <ng-container matColumnDef="Date">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="date">Date</th>
          <td mat-cell *matCellDef="let element" class="text-center">{{element.date | date: 'dd MMM yyy'}}</td>
        </ng-container>

        <!-- Position Column -->
        <ng-container matColumnDef="Supplier">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="supplier">To
          </th>
          <td mat-cell *matCellDef="let element" class="text-center">{{element.supplier}}</td>
        </ng-container>

        <!-- Position Column -->
        <ng-container matColumnDef="Service">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="servicio">Services
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="browser" style="cursor: pointer;" (click)="getserviciosAppoitment(element)"
              *ngIf="element.servicio?.length>1" [matMenuTriggerFor]="servicios">
              {{element.servicio?.length}}
            </span>
            <span (click)="getserviciosAppoitment(element)" *ngIf="element.servicio?.length==1">
              {{element.servicio[0].serviceNumber}}
            </span>
          </td>
        </ng-container>

        <mat-menu #servicios="matMenu" xPosition="before">
          <div class="assigned_services">
            <div class="data browser">
              <mat-list>
                <div mat-subheader>Services</div>
                <mat-divider></mat-divider>
                <mat-list-item *ngFor="let item of serviceAppointment">
                  <div matLine>
                    {{item.serviceNumber}}
                  </div>
                </mat-list-item>
              </mat-list>
            </div>
          </div>
        </mat-menu>

        <!-- Position Column -->
        <ng-container matColumnDef="Start Time">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="startTime">Start
            Time</th>
          <td mat-cell *matCellDef="let element" class="text-center">
            {{element.startTime | date:'shortTime'}} {{element.startTimeZone.split(' ')[0]}}
          </td>
        </ng-container>

        <!-- Position Column -->
        <ng-container matColumnDef="Location">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="location">Location
          </th>
          <td mat-cell *matCellDef="let element" class="text-center">{{element.location}}</td>
        </ng-container>

        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="location">Status
          </th>
          <td mat-cell *matCellDef="let element" class="text-center">{{element.statusName}}</td>
        </ng-container>

        <!-- Position Column -->
        <ng-container matColumnDef="Documents">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center" mat-sort-header="document">Documents
          </th>
          <td mat-cell *matCellDef="let element" class="text-center">
            <span class="browser" style="cursor: pointer;" *ngIf="element.document>1" [matMenuTriggerFor]="documentos">
              {{element.document}}
            </span>
            <span class="browser" *ngIf="element.document==1">
              <a style="color:#9d3292;" target="_blank"
                href="{{_services.url_images}}{{element.documentAppointments[0].fileRequest}}">{{element.documentAppointments[0].fileName}}</a>
            </span>

            <mat-menu #documentos="matMenu" xPosition="before">
              <div class="assigned_services">
                <div class="data browser">
                  <mat-list>
                    <div mat-subheader>Document</div>
                    <mat-divider></mat-divider>
                    <mat-list-item *ngFor="let item of element.documentAppointments">
                      <div matLine>
                        <a style="color:#9d3292;" target="_blank"
                          href="{{_services.url_images}}{{item.fileRequest}}">{{item.fileName}}</a>
                      </div>
                    </mat-list-item>
                  </mat-list>
                </div>
              </div>
            </mat-menu>

          </td>
        </ng-container>


        <!-- Position Column -->
        <ng-container matColumnDef="View">
          <th mat-header-cell *matHeaderCellDef class="text-center"></th>
          <td mat-cell *matCellDef="let element; let i = index" class="text-center">
            <span (click)="addApointmentConsult(element, i, __userlog__.role.id == 3 && USERDATA.id == element.to)"
              class="font-purple-dark cursor-pointer" style="font-weight: 300;"
              *ngIf="__userlog__.role.id == 3 && USERDATA.id == element.to">
              <mat-icon>edit</mat-icon>
            </span>
            <span (click)="addApointmentConsult(element, i, true)" class="font-purple-dark cursor-pointer"
              style="font-weight: 300;" *ngIf="__userlog__.role.id != 3">
              <mat-icon>edit</mat-icon>
            </span>
          </td>
        </ng-container>

        <!-- Position Column -->
        <!-- <ng-container matColumnDef="Delete">
          <th mat-header-cell *matHeaderCellDef class="text-center"></th>
          <td mat-cell *matCellDef="let element; let i = index" class="text-center"
            style="cursor: pointer !important;">
            <span *ngIf="__userlog__.role.id == 3 && USERDATA.id == element.to" class="font-purple-dark cursor-pointer" style="font-weight: 300;" (click)="deleteAppointment(i, element)">
              <mat-icon>delete_forever</mat-icon>
            </span>
            <span *ngIf="__userlog__.role.id != 3" class="font-purple-dark cursor-pointer" style="font-weight: 300;" (click)="deleteAppointment(i, element)">
              <mat-icon>delete_forever</mat-icon>
            </span>
          </td>
        </ng-container> -->

        <tr mat-header-row *matHeaderRowDef="appointment_table"></tr>
        <tr mat-row *matRowDef="let row; columns: appointment_table;"></tr>
      </table>

      <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;">
        <mat-paginator #Appointment [pageSizeOptions]="[5, 10]" showFirstLastButtons></mat-paginator>
      </div>


    </div>
    <div class="page__section no-padding-tb page__section--justify-end margin-tb-mini" *ngIf="__userlog__.role.id != 3">
      <span (click)="goToPage('serviceRecordAllServices/')"
        class="text-mini font-purple-dark cursor-pointer padding-right-mini">
        View All Services
      </span>
    </div>
    <!-- fin upcoming -->

    <!-- Tabs of Section -->
    <!-- condicionar tabs si es role consultat -->
    <div class="page__section no-padding">
      <div class="page__section-tabs" id="tabs">
        <div class="page__section-tab page__section-tab--active" (click)="showTabSelected('ass', $event)">
          Assignee &
          Family Info
        </div>
        <!--  supplierType 1 relo
              supplierType 3 immi -->
        <!-- (click)="item.isAdded ? null : addItemToArray(item)" -->
        <!-- __userlog__.role.id == 3 && __userlog__.profileUsers[0].supplierType == 3 : -->
        <div class="page__section-tab" auto-click="main_imm_tab" (click)=" showTabSelected('imm', $event)"
          [ngClass]="{'none-visible' : !USERDATA.profileUsers[0].immigration || !wos_imm_, 'view-visible' : USERDATA.role.id == 2 && wos_imm_}">
          Immigration
        </div>
        <!--  (__userlog__.role.id == 3) && ( __userlog__.profileUsers[0].supplierType == 1) :  -->
        <div class="page__section-tab" (click)="showTabSelected('rel', $event)"
          [ngClass]="{'none-visible' : !USERDATA.profileUsers[0].relocation || !wos_relo_, 'view-visible' : USERDATA.role.id == 2 && wos_relo_}">
          Relocation
        </div>
        <div class="page__section-tab" id="reload__" (click)="showTabSelected('com', $event)">
          Communication
        </div>
        <div class="page__section-tab" id="tabActiviy" (click)="showTabSelected('rep', $event)">
          Activity
        </div>
        <div class="page__section-tab" (click)="showTabSelected('lib', $event)" style="display: none;">
          Library
        </div>
        <div class="page__section-tab" (click)="showTabSelected('fin', $event)" style="display: none;">
          Finance
        </div>
      </div>
    </div>

    <!-- Tabs Containers -->
    <div class="page__section no-padding">
      <!-- Form: Assignee & Family Info -------------------------------------------------------- -->
      <div class="page__section-form" id="tab_ass">
        <div class="page__section">
          <div class="page__section-name">
            <div class="page__title">
              Assignee Information
            </div>
          </div>
          <div class="page__section-button page__section-button--big">
            <button *ngIf="!profileCunsultant" (click)="requestInformationButton()"
              class="button-icon button-icon--adder">
              Request Information
            </button>
          </div>
        </div>
        <mat-grid-list cols="4" rowHeight="80px">
          <mat-grid-tile [colspan]="1" [rowspan]="3">
            <!-- nueva -->
            <!-- <div class="column-grid-2"> -->
            <div class="page__section page__section-inputs no-padding-tb">
              <div class="page__section page__section-inputs no-padding-tb">
                <div class="page__section page__section-input--x no-padding-tb">
                  <!-- <input type="file" id="ass_prof_photo_input" name="ass_prof_photo_input"
                    [disabled]="profileCunsultant == true" class="display-none"
                    (change)="previewSelectedPhoto( $event, 'ass_prof_photo', 'profile')" /> -->
                  <div class="input__image">
                    <label for="ass_prof_photo_input" class="input__image-label">
                      <div class="input__image-label--card">
                        <!-- <img id="ass_prof_photo"  src="assets/images/users/avatar.png" /> -->
                        <img [class.display-none]="no_main_photo"
                          src="{{_services.url_images}}{{edit_sr_model.assigneeInformations[0].photo}}"
                          id='ass_prof_photo' />
                        <img [class.display-none]="!no_main_photo" src="assets/images/users/avatar.png" />
                      </div>
                      <span class="input__image-label--cardSpan"
                        (click)="previewSelectedPhoto( $event, 'ass_prof_photo', 'profile')">Edit Photo</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Name (as shown on passport)*</mat-label>
              <input [disabled]="profileCunsultant == true" matInput placeholder="Name (as shown on passport)*"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].assigneeName"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_name'} )" />
              <span class="label-error" *ngIf="fass_validator.no_name">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="page__section position-relative">
              <span class="fixed-label">Sex</span>
              <mat-radio-group [disabled]="profileCunsultant == true" aria-label="Gender" style="display: flex;"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].sexId">
                <mat-radio-button value="1">Female</mat-radio-button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <mat-radio-button value="2">Male</mat-radio-button>
              </mat-radio-group>
            </div>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_final">
              <mat-label>Date of birth</mat-label>
              <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="ass_bd" [max]="getMaxDateTo()"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_bdat'} ); calculateHowOld(); "
                (dateChange)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_bdat'} ); calculateHowOld();"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].birth">
              <mat-datepicker-toggle matSuffix [for]="ass_bd"></mat-datepicker-toggle>
              <mat-datepicker #ass_bd></mat-datepicker>
              <span class="label-error" *ngIf="fass_validator.no_bdat">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>
          <!-- fin primer columna -->

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Age</mat-label>
              <input [disabled]="profileCunsultant == true" matInput placeholder="Age" type="number" readonly
                [(ngModel)]="edit_sr_model.assigneeInformations[0].age" />
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Nationality</mat-label>
              <mat-select multiple [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].nationalityAssigneeInformations">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Nationality</mat-label>
                  <input matInput placeholder="Nationality" [(ngModel)]="filterNationality0.nationality1">
                </mat-form-field>
                <mat-option *ngFor="let item of nationality_catalogue | filterBy: filterNationality0" [value]="item.id">
                  {{ item.nationality1 }}
                </mat-option>
                <mat-option disabled *ngIf="(nationality_catalogue | filterBy: filterNationality0).length === 0">No
                  matching elements</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_final">
              <mat-label>Marital Status</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].maritalStatusId">
                <mat-option selected disabled value="">Marital Status</mat-option>
                <mat-option *ngFor="let item of marital_catalogue;" [value]="item.id">
                  {{ item.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>
          <!-- fin segunda columna -->

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div style="position: relative;">
              <div class="input_central">
                <mat-form-field appearance="fill">
                  <mat-label>Email</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Email"
                    [(ngModel)]="edit_sr_model.assigneeInformations[0].email" (change)="
                      removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_emai'} );
                      validateEmailServerAvailability( $event.target.value );
                      validEmailAssignee( $event.target.value )" />
                  <mat-icon matSuffix style="color: #9d3292; cursor: pointer;"
                    (click)="sendAccess()">mail_outline</mat-icon>
                  <span class="label-error" *ngIf="fass_validator.no_emai">
                    Field is required
                  </span>
                  <span class="label-error" *ngIf="!fass_validator.no_emai && fass_validator.no_emai_val">
                    Email format is not valid
                  </span>
                </mat-form-field>
              </div>
            </div>

          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field style="width: 30% !important; margin-right: 5%;">
              <mat-label>Prefix</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl [(ngModel)]="prefix">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Prefix</mat-label>
                  <input matInput placeholder="prefix" [(ngModel)]="typePrefix.countriesName">
                </mat-form-field>
                <mat-option *ngFor="let item of prefixCatalog | filterBy: typePrefix;" [value]="item.countriesIsdCode">
                  {{ item.countriesIsdCode }} / {{ item.countriesName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field style="width: 50% !important;">
              <mat-label>Mobile Phone</mat-label>
              <input [disabled]="profileCunsultant == true" matInput placeholder="Mobile Phone" type="number" min="0"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].mobilePhone" (keydown)="validaNumericos($event)"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_mpho'} );" />
              <span class="label-error" *ngIf="fass_validator.no_mpho">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field style="width: 30% !important; margin-right: 5%;">
              <mat-label>Prefix</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl [(ngModel)]="prefixWork">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Prefix</mat-label>
                  <input matInput placeholder="prefix" [(ngModel)]="typePrefix.countriesName">
                </mat-form-field>
                <mat-option *ngFor="let item of prefixCatalog | filterBy: typePrefix;" [value]="item.countriesIsdCode">
                  {{ item.countriesIsdCode }} / {{ item.countriesName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field style="width: 50% !important;">
              <mat-label>Work Phone</mat-label>
              <input [disabled]="profileCunsultant == true" matInput placeholder="Work Phone" type="number" min="0"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].workPhone" (keydown)="validaNumericos($event)"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_wpho'} );" />
              <span class="label-error" *ngIf="fass_validator.no_wpho">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>
          <!-- fin tercera columna -->

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Policy Type</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].policyTypeId">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Policy Type</mat-label>
                  <input matInput placeholder="Policy Type" [(ngModel)]="filterPolicy.policyType">
                </mat-form-field>
                <!-- <mat-option selected disabled value="">Policy Type</mat-option> -->
                <mat-option *ngFor="let item of policytype_catalogue | filterBy: filterPolicy" [value]="item.id">
                  {{ item.policyType }}
                </mat-option>
                <mat-option disabled *ngIf="(policytype_catalogue | filterBy: filterPolicy).length === 0">No matching
                  elements</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field style="width: 30% !important; margin-right: 5%;">
              <mat-label>Assignment</mat-label>
              <input [disabled]="profileCunsultant == true" matInput min="0" placeholder="" type="number"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].assignmentDuration"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_atim'} );" />
              <span class="label-error" *ngIf="fass_validator.no_atim">
                Field is required
              </span>
            </mat-form-field>
            <mat-form-field style="width: 50% !important;">
              <mat-label>Duration</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].assignmentDurationTime"
                (selectionChange)="removeErrorLabel( $event.value, {handler: fass_validator, field: 'no_adur'} );">
                <mat-option selected disabled value="">Assignment Duration</mat-option>
                <mat-option *ngFor="let item of assduration_catalogue;" [value]="item.id">
                  {{ item.duration }}
                </mat-option>
              </mat-select>
              <span class="label-error" *ngIf="fass_validator.no_adur">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Initial Arrival Date</mat-label>
              <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="ass_ia_date"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].initialArrival"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_idat'} );"
                (dateChange)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_idat'} );" />
              <mat-datepicker-toggle matSuffix [for]="ass_ia_date"></mat-datepicker-toggle>
              <mat-datepicker #ass_ia_date></mat-datepicker>
              <span class="label-error" *ngIf="fass_validator.no_idat">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_final">
              <mat-label>Final Move Date</mat-label>
              <input [disabled]="profileCunsultant == true" matInput
                [min]="edit_sr_model.assigneeInformations[0].initialArrival" [matDatepicker]="ass_ea_date"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].finalMove"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_fdat'} );"
                (dateChange)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_fdat'} );" />
              <mat-datepicker-toggle matSuffix [for]="ass_ea_date"></mat-datepicker-toggle>
              <mat-datepicker #ass_ea_date></mat-datepicker>
              <span class="label-error" *ngIf="fass_validator.no_fdat">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <!-- <mat-grid-tile [colspan]="1" [rowspan]="1"></mat-grid-tile> -->

          <!--mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Home Country (Current Residence)</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].homeCountryId"
                (selectionChange)="getcityhome(edit_sr_model.assigneeInformations[0].homeCountryId); athorizedBy()">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Home Country</mat-label>
                  <input matInput placeholder="Home Country" [(ngModel)]="filterHomeCountry1.name">
                </mat-form-field>
                <mat-option *ngFor="let item of country_catalogue | filterBy: filterHomeCountry1" [value]="item.id">
                  {{ item.name }}
                </mat-option>
                <mat-option disabled *ngIf="(country_catalogue | filterBy: filterHomeCountry1).length === 0">No
                  matching elements</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Home City (Current Residence)</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].homeCityId" (selectionChange)="athorizedBy()">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Home City</mat-label>
                  <input matInput placeholder="Home City" [(ngModel)]="filterHomeCity1.city">
                </mat-form-field>
                <mat-option *ngFor="let item of city_home_catalogue | filterBy: filterHomeCity1" [value]="item.id">
                  {{ item.city }}
                </mat-option>
                <mat-option disabled *ngIf="(city_home_catalogue | filterBy: filterHomeCity1).length === 0">No matching
                  elements</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile-->

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Current Position</mat-label>
              <input [disabled]="profileCunsultant == true" matInput placeholder="Current Position"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].currentPosition"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_cpos'} );" />
              <span class="label-error" *ngIf="fass_validator.no_cpos">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>New Position</mat-label>
              <input [disabled]="profileCunsultant == true" matInput placeholder="New Position"
                [(ngModel)]="edit_sr_model.assigneeInformations[0].newPosition"
                (change)="removeErrorLabel( $event.target.value, {handler: fass_validator, field: 'no_npos'} );" />
              <span class="label-error" *ngIf="fass_validator.no_npos">
                Field is required
              </span>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Languages Spoken</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl multiple
                [(ngModel)]="edit_sr_model.assigneeInformations[0].languagesSpokens">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Languages Spoken</mat-label>
                  <input matInput placeholder="Languages Spoken" [(ngModel)]="filterLanguages1.name">
                </mat-form-field>
                <mat-option *ngFor="let item of languages_catalogue | filterBy: filterLanguages1" [value]="item.id">
                  {{ item.name }}
                </mat-option>
                <mat-option disabled *ngIf="(languages_catalogue | filterBy: filterLanguages1).length === 0">No
                  matching elements</mat-option>
              </mat-select>
              <!-- span class="label-error" *ngIf="nso_ainfo_fields.no_hhos">
                Field is required
              </span -->
            </mat-form-field>
          </mat-grid-tile>

          <!--mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Host Country</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].hostCountry"
                (selectionChange)="getcityhost(edit_sr_model.assigneeInformations[0].hostCountry)">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Host Country</mat-label>
                  <input matInput placeholder="Host Country" [(ngModel)]="filterHostCountry1.name">
                </mat-form-field>
                <mat-option *ngFor="let item of country_catalogue | filterBy: filterHostCountry1" [value]="item.id">
                  {{ item.name }}
                </mat-option>
                <mat-option disabled *ngIf="(country_catalogue | filterBy: filterHostCountry1).length === 0">No
                  matching elements</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <mat-form-field appearance="fill" class="input_central">
              <mat-label>Host City</mat-label>
              <mat-select [disabled]="profileCunsultant == true" matNativeControl
                [(ngModel)]="edit_sr_model.assigneeInformations[0].hostCityId">
                <mat-form-field appearance="outline" style="padding: 5px;">
                  <mat-label>Host city</mat-label>
                  <input matInput placeholder="Host city" [(ngModel)]="filterHostCity1.city">
                </mat-form-field>
                <mat-option *ngFor="let item of city_host_catalogue | filterBy: filterHostCity1" [value]="item.id">
                  {{ item.city }}
                </mat-option>
                <mat-option disabled *ngIf="(city_host_catalogue | filterBy: filterHostCity1).length === 0">No
                  matching elements</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile-->

          <!-- mat-grid-tile [colspan]="1" [rowspan]="1" class="position-relative overflow-visible">
            <div class="page__section-data font-size-12 cursor-pointer" (click)="showLanguagesDropdow()">
              <span class="gray_05">Language spoken</span><br />
              <span class="text-mini font-purple-dark">
                <span *ngIf="languages_selected.length == 0">Select your languages</span>
                <span class="text-underline" *ngIf="languages_selected.length != 0">
                  {{ languages_selected }}
                </span>
              </span>
            </div>
            <div class="data__dropdown" [class.display-none]="!show_language_dropdown">
              <button class="data__dropdown--close" (click)="showLanguagesDropdow()">x
              </button>
              <div class="page__section page__section-inputs">
                <div class="page__section">
                  <div class="page__section-data no-padding margin-bottom-mini">
                    <span class="text-mini gray_05">
                      Click to your languages
                    </span><br />
                  </div>
                </div>
                <div class="page__section-input" *ngFor="let item of user_languages;">
                  <mat-checkbox [checked]="item.active" (change)="selectingLanguages( item )"
                    class="example-margin margin-top-mini">
                    <span class="text-mini">
                      {{ item.name }}
                    </span>
                  </mat-checkbox>
                </div>
              </div>
            </div>
          </mat-grid-tile -->

        </mat-grid-list>

        <div class="page__section">
          <div class="page__title">
            Dependents Information
            <br><br>
            <mat-slide-toggle [disabled]="profileCunsultant == true" *ngIf="__userlog__.role.id == 3" disabled
              [checked]="assign_dependents.length > 0">
            </mat-slide-toggle>
            <mat-slide-toggle [disabled]="profileCunsultant == true" (change)="toggleDependentsSection($event)"
              *ngIf="__userlog__.role.id != 3" [checked]="show_dependent_section">
            </mat-slide-toggle>
          </div>
        </div>
        <div *ngIf="show_dependent_section">
          <div class="page__section page__section--card margin-bottom-min aaf_dependent"
            *ngFor="let departament of assign_dependents, index as index;">
            <button *ngIf="permission_delete" class="page__section--card-closeButton"
              (click)="removeDepartament( index );">
            </button>
            <div class="page__section page__section--nowrap">
              <div class="column-grid-2">
                <div class="page__section page__section-inputs no-padding-tb">
                  <div class="page__section page__section-inputs no-padding-tb">
                    <div class="page__section page__section-input--x no-padding-tb">
                      <!-- <input [disabled]="profileCunsultant == true" type="file" id="ass_dep_input_{{ index }}"
                        name="ass_dep_input_{{ index }}" class="display-none"
                        (change)="previewSelectedPhoto( $event, 'ass_dep_photo_' + index, 'dependent')" /> -->
                      <div class="input__image">
                        <label for="ass_dep_input_{{ index }}" class="input__image-label">
                          <div class="input__image-label--card">
                            <!-- <img id="ass_dep_photo_{{ index }}"
                            [src]="departament.photo != 'http://34.237.214.147/back/api_premier_qa/Files/Dependent/83aee44a-bad4-45ce-96ce-c890c3ad9f47.' ? departament.photo : '/assets/images/users/avatar.png'" /> -->
                            <img id="ass_dep_photo_{{ index }}"
                              [src]="departament.photo == '' ? 'assets/images/users/avatar.png': departament.photo" />

                            <!-- <img src="assets/images/users/avatar.png"
                            [src]="(pet.photo == '' || pet.photo == 'http://34.237.214.147/back/api_premier_qa/' ) ? '/assets/images/users/avatar.png' : pet.photo"
                            id="ass_pet_photo_{{ i }}" /> -->

                          </div>
                          <span class="input__image-label--cardSpan"
                            (click)="previewSelectedPhoto( $event, 'ass_dep_photo_' + index, 'dependent')">Edit
                            Photo</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- actual -->
              <!-- <div class="column-grid-2">
                <div class="page__section page__section-inputs no-padding-tb">
                  <div class="page__section page__section-inputs no-padding-tb">
                    <div class="page__section page__section-input--x no-padding-tb">
                      <input type="file" id="ass_dep_input_{{ index }}" name="ass_dep_input_{{ index }}"
                        class="display-none"
                        (change)="previewSelectedPhoto( $event, 'ass_dep_photo_' + index, 'dependent' )" />
                      <div class="input__image">
                        <label for="ass_dep_input_{{ index }}" class="input__image-label">
                          <img id="ass_dep_photo_{{ index }}" class="input__image-label--card"
                            [src]="departament.photo != 'http://34.237.214.147/back/api_premier_qa/Files/Dependent/83aee44a-bad4-45ce-96ce-c890c3ad9f47.' ? departament.photo : '/assets/images/users/avatar.png'" />
                          <span class="input__image-label--cardSpan">Edit Photo</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
              <div class="column-grid-8">
                <mat-grid-list cols="3" rowHeight="80px">
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Relationship</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl
                        [value]="departament.relationshipId"
                        (selectionChange)="departament.relationshipId = $event.value;">
                        <mat-option selected disabled value="">Relationship</mat-option>
                        <mat-option *ngFor="let item of relationship_catalogue;" [value]="item.id"
                          [selected]="item.id == departament.relationshipId">
                          {{ item.relationship }}
                        </mat-option>
                      </mat-select>
                      <!-- <span class="label-error" *ngIf="departament.relationshipId == '0' && show_ass_depd_errors">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="departament.relationshipId == '3'">
                    <mat-form-field class="input_central_half">
                      <mat-label>(If Other Please Specify)</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput placeholder="(If Other Please Specify)"
                        [value]="departament.ifOther" (change)="departament.ifOther = $event.target.value;" />
                      <!-- <span class="label-error" *ngIf="departament.ifOther == '' && show_dependent_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field class="input_central_half">
                      <mat-label>Name (as shown on passport)</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput placeholder="Name (as shown on passport)"
                        [value]="departament.name" (change)="departament.name = $event.target.value;" />
                      <!-- <span class="label-error" *ngIf="departament.name == '' && show_ass_depd_errors">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <div class="page__section position-relative">
                      <span class="fixed-label">Sex</span>
                      <mat-radio-group [disabled]="profileCunsultant == true" aria-label="Gender" style="display: flex;"
                        [(ngModel)]="departament.sex">
                        <mat-radio-button *ngFor="let item of gender_catalogue;" [value]="item.id">
                          {{ item.sex }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </mat-radio-button>
                      </mat-radio-group>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Date of Birth</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput [max]="getMaxDateTo(0)"
                        [matDatepicker]="depen_bd" [value]="departament.birth" (change)="
                          calculateHowOldDina('dependent_'+ index, $event, true );
                          departament.birth = $event.target.value;" (dateChange)="
                          calculateHowOldDina( 'dependent_' + index, $event, true);
                          departament.birth = $event.value;" />
                      <mat-datepicker-toggle matSuffix [for]="depen_bd"></mat-datepicker-toggle>
                      <mat-datepicker #depen_bd></mat-datepicker>
                      <!-- <span class="label-error" *ngIf="departament.birth == '' && show_ass_depd_errors">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field class="input_central_half">
                      <mat-label>Age</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput readonly [value]="departament.age"
                        id="dependent_{{ index }}" placeholder="Age" type="number" />
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Language Spoken</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl
                        [value]="departament.languageDependentInformations" multiple
                        (selectionChange)="departament.languageDependentInformations = $event.value;">
                        <mat-form-field appearance="outline" style="padding: 5px;">
                          <mat-label>Languages spoken</mat-label>
                          <input matInput placeholder="Languages spoken" [(ngModel)]="filterLanguagesRe2.name">
                        </mat-form-field>
                        <mat-option *ngFor="let item of languages_catalogue | filterBy: filterLanguagesRe2"
                          [value]="item.id">
                          {{ item.name }}
                        </mat-option>
                        <mat-option disabled *ngIf="(languages_catalogue | filterBy: filterLanguagesRe2).length === 0">
                          No matching elements</mat-option>
                      </mat-select>
                      <!-- <span class="label-error"
                        *ngIf="departament.languageDependentInformations.length == 0 && show_ass_depd_errors">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Nationality</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl
                        [value]="departament.nationalityId"
                        (selectionChange)="departament.nationalityId = $event.value;">
                        <mat-form-field appearance="outline" style="padding: 5px;">
                          <mat-label>Nationality</mat-label>
                          <input matInput placeholder="Nationality" [(ngModel)]="filterNationalityRe2.nationality1">
                        </mat-form-field>
                        <mat-option *ngFor="let item of nationality_catalogue | filterBy: filterNationalityRe2"
                          [value]="item.id" [selected]="item.id == departament.nationalityId">
                          {{ item.nationality1 }}
                        </mat-option>
                        <mat-option disabled
                          *ngIf="(nationality_catalogue | filterBy: filterNationalityRe2).length === 0">
                          No matching elements</mat-option>
                      </mat-select>
                      <!-- <span class="label-error" *ngIf="departament.nationalityId == '' && show_ass_depd_errors">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="departament.relationshipId == '2'">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Current Grade</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl
                        (selectionChange)="departament.currentGrade = $event.value;"
                        [(ngModel)]="departament.currentGrade">
                        <mat-form-field appearance="outline" style="padding: 5px;">
                          <mat-label>Current Grade</mat-label>
                          <input matInput placeholder="Current Grade" [(ngModel)]="filterGrade2.grade">
                        </mat-form-field>
                        <mat-option *ngFor="let item of schoolgrades_catalogue | filterBy: filterGrade2"
                          [value]="item.id" [selected]="item.id == departament.currentGrade">
                          {{ item.grade }}
                        </mat-option>
                        <mat-option disabled *ngIf="(schoolgrades_catalogue | filterBy: filterGrade2).length === 0">No
                          matching elements</mat-option>
                      </mat-select>
                      <!-- <span class="label-error" *ngIf="departament.education == '' && show_ass_depd_errors">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="departament.relationshipId == '1'">
                    <mat-form-field class="input_central_half">
                      <mat-label>Email</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput placeholder="Email" type="text"
                        [value]="departament.email"
                        (change)="departament.email = $event.target.value; validateEmailServerAvailabilityDependent( $event.target.value, index );" />

                      <span class="label-error" *ngIf="departament.email == '' && show_ass_depd_errors">
                        Field is required
                      </span>
                      <span class="label-error" *ngIf="departament.email != '' && !validateEmail( departament.email )">
                        Email format is not valid
                      </span>
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="departament.relationshipId == '1'">
                    <mat-form-field class="input_central_half">
                      <mat-label>Phone Number</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput placeholder="Phone Number" type="number"
                        min="0" [value]="departament.phone" (change)="departament.phone = $event.target.value"
                        (keydown)="validaNumericos($event)" />
                      <span class="label-error" *ngIf="departament.phone == '' && show_ass_depd_errors">
                        Field is required
                      </span>
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="3" [rowspan]="1">
                    <mat-form-field class="input_central_half">
                      <mat-label>Additional Comments</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput matInput #specialInstruccion
                        [value]="departament.aditionalComments"
                        (change)="departament.aditionalComments = $event.target.value;"
                        placeholder="Schooling Preferences, Specific Educational Programs, Medical Conditions, etc." />
                      <mat-hint align="end">{{specialInstruccion.value.length}} / 100</mat-hint>
                    </mat-form-field>
                  </mat-grid-tile>
                </mat-grid-list>
              </div>
            </div>
          </div>
        </div>
        <div class="page__section margin-bottom-m" *ngIf="show_dependent_section">
          <div class="page__section-name"></div>
          <div class="page__section-button">
            <button [disabled]="profileCunsultant == true" *ngIf="permission_write || permission_edit"
              class="button-icon button-icon--adder margin-top-mini" (click)="addDepartament()">
              Add Dependent
            </button>
          </div>
        </div>
        <div class="page__section">
          <div class="page__title">
            Pets
            <br /><br />
            <mat-slide-toggle *ngIf="__userlog__.role.id == 3" disabled [checked]="pets.length > 0"></mat-slide-toggle>
            <mat-slide-toggle *ngIf="__userlog__.role.id != 3" (change)="togglePetsSection()"
              [checked]="pets.length > 0"></mat-slide-toggle>
          </div>
        </div>
        <div *ngIf="show_pets_section">
          <div class="page__section page__section--card margin-bottom-min aaf_pet"
            *ngFor="let pet of pets;let i = index;" id="pet_{{ pet.id }}">
            <button *ngIf="permission_delete" (click)="removePet( i )" class="page__section--card-closeButton">
            </button>
            <div class="page__section page__section--nowrap">
              <div class="column-grid-2">
                <div class="page__section page__section-inputs no-padding-tb">
                  <div class="page__section page__section-inputs no-padding-tb">
                    <div class="page__section page__section-input--x no-padding-tb">
                      <!-- <input [disabled]="profileCunsultant == true" type="file" id="pet_input_photo_{{ i }}"
                        name="pet_input_photo_{{ i }}" class="display-none"
                        (change)="previewSelectedPhoto( $event, 'ass_pet_photo_' + i, 'pet')" /> -->
                      <div class="input__image">
                        <label for="pet_input_photo_{{ i }}" class="input__image-label">
                          <div class="input__image-label--card">
                            <!-- <img id="ass_pet}_photo_{{ i }" src="assets/images/users/avatar.png" /> -->

                            <img [src]="pet.photo == '' ? 'Files/assets/avatar.png': pet.photo"
                              id="ass_pet_photo_{{ i }}" />
                          </div>
                          <span class="input__image-label--cardSpan"
                            (click)="previewSelectedPhoto( $event, 'ass_pet_photo_' + i, 'pet')">Edit Photo</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- actual -->
              <!-- <div class="column-grid-2">
                <div class="page__section page__section-inputs no-padding-tb">
                  <div class="page__section page__section-inputs no-padding-tb">
                    <div class="page__section page__section-input--x no-padding-tb">
                      <input type="file" id="pet_input_photo_{{i}}" name="pet_input_photo_{{i}}" class="display-none"
                        (change)="previewSelectedPhoto( $event, 'ass_pet_photo_'+i, 'pet' )" />
                      <div class="input__image">
                        <label for="pet_input_photo_{{i}}" class="input__image-label">
                          <img class="input__image-label--card"
                            [src]="(pet.photo == '' || pet.photo == 'http://34.237.214.147/back/api_premier_qa/' ) ? '/assets/images/users/avatar.png' : pet.photo"
                            id="ass_pet_photo_{{ i }}" />
                          <span class="input__image-label--cardSpan">Edit Photo</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
              <div class="column-grid-8">
                <mat-grid-list cols="3" rowHeight="80px">
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Pet Type</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl [value]="pet.petTypeId"
                        (selectionChange)="
                        GetBreed($event.value, i);
                        pet.petTypeId = $event.value;">
                        <mat-form-field appearance="outline" style="padding: 5px;">
                          <mat-label>Pet type</mat-label>
                          <input matInput placeholder="Pet type" [(ngModel)]="filterPet3.petType">
                        </mat-form-field>
                        <mat-option *ngFor="let item of pettype_catalogue | filterBy: filterPet3" [value]="item.id"
                          [selected]="pet.petTypeId == item.id">
                          {{ item.petType }}
                        </mat-option>
                        <mat-option disabled *ngIf="(pettype_catalogue | filterBy: filterPet3).length === 0">No
                          matching elements</mat-option>
                      </mat-select>
                      <!-- <span class="label-error" *ngIf="pet.petTypeId == '' && show_pets_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field class="input_central_half">
                      <mat-label>Pet Name</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput [value]="pet.name" placeholder="Pet Name"
                        (change)="pet.name = $event.target.value" />
                      <!-- <span class="label-error" *ngIf="pet.name == '' && show_pets_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Breed</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput [(ngModel)]="pet.breedId"
                        [value]="pet.breedId" type="text" />
                      <!-- <mat-select matNativeControl [value]="pet.breedId"
                        (selectionChange)="pet.breedId = $event.value; GetBreed(item.petTypeId, i)">
                        <mat-option selected disabled value="">Breed</mat-option>
                        <mat-option *ngFor="let item of CaBreed[i]" [value]="item.id"
                          [selected]="pet.breedId == item.id">
                          {{ item.breed }}
                        </mat-option>
                      </mat-select> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Date of Birth</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="pet_bd"
                        [max]="getMaxDateTo(0)" [(ngModel)]="pet.birthDate" [value]="pet.birthDate"
                        (change)="calculateHowOldDinaPets( 'pet_' + i, $event ); pet.birthDate = $event.target.value"
                        (dateChange)="calculateHowOldDinaPets( 'pet_' + i, $event, false, i);" />
                      <mat-datepicker-toggle matSuffix [for]="pet_bd"></mat-datepicker-toggle>
                      <mat-datepicker #pet_bd></mat-datepicker>
                      <!-- <span class="label-error" *ngIf="pet.age == '' && show_pets_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>

                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field class="input_central_half">
                      <mat-label>Age</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput readonly placeholder="Age" type="number"
                        id="pet_{{ i }}" [(ngModel)]="pet.age" [value]="pet.age" />
                    </mat-form-field>
                  </mat-grid-tile>

                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Size</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl [value]="pet.sizeId"
                        (selectionChange)="pet.sizeId = $event.value;">
                        <mat-form-field appearance="outline" style="padding: 5px;">
                          <mat-label>Size</mat-label>
                          <input matInput placeholder="size" [(ngModel)]="filterSize3.size">
                        </mat-form-field>
                        <mat-option *ngFor="let item of petsize_catalogue | filterBy: filterSize3" [value]="item.id"
                          [selected]="pet.sizeId == item.id">
                          {{ item.size }}
                        </mat-option>
                        <mat-option disabled *ngIf="(petsize_catalogue | filterBy: filterSize3).length === 0">No
                          matching elements</mat-option>
                      </mat-select>
                      <!-- <span class="label-error" *ngIf="pet.sizeId == '' && show_pets_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field class="input_central_half">
                      <mat-label>Weight</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput placeholder="Weight" type="number"
                        [value]="pet.weight" (change)="pet.weight = $event.target.value" />
                      <!-- <span class="label-error" *ngIf="pet.weight == '' && show_pets_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Weight Measure</mat-label>
                      <mat-select [disabled]="profileCunsultant == true" matNativeControl
                        (selectionChange)="pet.weightMeasuresId = $event.value;" [(ngModel)]="pet.weightMeasuresId">
                        <mat-option selected disabled value="">Weight Measure</mat-option>
                        <mat-option *ngFor="let item of weightmeasure_catalogue;" [value]="item.id"
                          [selected]="pet.weightMeasuresId == item.id">
                          {{ item.name }}
                        </mat-option>
                      </mat-select>
                      <!-- <span class="label-error" *ngIf="pet.weightMeasuresId == '' && show_pets_erros">
                        Field is required
                      </span> -->
                    </mat-form-field>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-form-field appearance="fill" class="input_central_half">
                      <mat-label>Color</mat-label>
                      <input [disabled]="profileCunsultant == true" matInput [(ngModel)]="pet.color" [value]="pet.color"
                        type="text" />
                    </mat-form-field>
                  </mat-grid-tile>
                </mat-grid-list>
              </div>
            </div>
          </div>
        </div>
        <div class="page__section margin-bottom-m" *ngIf="show_pets_section">
          <div class="page__section-name"></div>
          <div class="page__section-button">
            <button [disabled]="profileCunsultant == true" *ngIf="permission_write || permission_edit"
              class="button-icon button-icon--adder margin-top-mini" (click)="addPet()">
              Add Pet
            </button>
          </div>
        </div>
      </div>
      <!-- Form: Immigration -------------------------------------------------------- -->
      <div class="page__section-form display-none" id="tab_imm">
        <!--<div class="page__section page__section--nowrap margin-top-min">
          div class="page__section page__section-inputs">
            <div class="input_central">
              <mat-form-field appearance="fill">
                <mat-label>Authorized By</mat-label>
                <mat-select matNativeControl required [(ngModel)]="edit_sr_model.authorizedByImmigration">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Authorized</mat-label>
                    <input matInput placeholder="Authorized By" [(ngModel)]="filterImiAutori.name">
                  </mat-form-field>
                  <mat-option *ngFor="let item of autoriza_catalogue| filterBy: filterImiAutori" [value]="item.id">
                    {{ item.name }}
                  </mat-option>
                  <mat-option disabled *ngIf="(autoriza_catalogue | filterBy: filterImiAutori).length === 0">No
                    matching elements</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="page__section-input padding-top-x">
              <mat-checkbox class="example-margin" [(ngModel)]="edit_sr_model.copyOnEmailImmigration">
                Copy On E-mails
              </mat-checkbox>
            </div>
            <div class="page__section-input page__section-input--10 padding-top-x">
              <mat-checkbox class="example-margin" [(ngModel)]="edit_sr_model.spocImmigration">
                SPOC
              </mat-checkbox>
            </div>
          </div
        </div>-->
        <br>
        <br>
        <div fxLayout="row" fxLayoutAlign="space-between start">
          <div style="font-size: 20px; font-weight: 900;">
            Experience Team
          </div>
          <div>
            <div class="divIconContainer">
              <b class="dot__green_color icon-text" style="font-size: 14px;">Accepted</b>&nbsp;&nbsp;&nbsp;|
            </div>
            <div class="divIconContainer">
              <b class="dot__yellow_color icon-text" style="font-size: 14px;">Pending Acceptance</b>&nbsp;&nbsp;&nbsp;|
            </div>
            <div class="divIconContainer">
              <b class="dot__red_color icon-text" style="font-size: 14px;">Rejected</b>&nbsp;&nbsp;&nbsp;
            </div>
          </div>
        </div>
        <br>
        <br>
        <div class="page__section">
          <div class="page__title" id="services_supplier">
            Coordinators
          </div>
        </div>
        <!--Tabla para coordinadores-->
        <div class="page__section">
          <table class="mat-elevation-z8 textarea mat-table">
            <tr class="mat-header-row">
              <th class="mat-header-cell">Coordinator Type</th>
              <th class="mat-header-cell">Coordinator</th>
              <th class="mat-header-cell">Assigned</th>
              <th class="mat-header-cell">Accepted</th>
              <th class="mat-header-cell" *ngIf="__userlog__.role.id != 2 && __userlog__.role.id != 3"></th>
            </tr>
            <tr class="mat-row" *ngFor="let datos of edit_sr_model.immigrationCoodinators; let k = index">

              <td class="mat-cell">{{getTypeCoordinator(datos.coordinatorTypeId)}}</td>
              <td class="mat-cell" [matMenuTriggerFor]="coordinador"
                (click)="view_upplier_coordinador(datos.coordinatorId)" style="cursor: pointer;">
                <span *ngIf="datos.statusId == 1" class="dot__green_color">
                  {{getNameCoordinator(datos.coordinatorId)}}
                </span>
                <span *ngIf="datos.statusId == 2" class="dot__yellow_color">
                  {{getNameCoordinator(datos.coordinatorId)}}
                </span>
                <span *ngIf="datos.statusId == 3" class="dot__red_color">
                  {{getNameCoordinator(datos.coordinatorId)}}
                </span>
              </td>
              <td class="mat-cell">{{datos.assigned | date: 'dd MMM yyyy'}}</td>
              <td class="mat-cell">
                <span *ngIf="datos.statusId != 2">
                  {{datos.accepted | date: 'dd MMM yyyy'}}
                </span>
                <span *ngIf="datos.statusId == 2">
                  Pending to accept
                </span>
              </td>
              <td class="mat-cell" *ngIf="__userlog__.role.id != 2 && __userlog__.role.id != 3">
                <img *ngIf="edit_sr_model.immigrationCoodinators.length > 1" src="../../../assets/icons/quit.svg" alt=""
                  (click)="deleteCoordinator(datos, 1, k)">
              </td>
            </tr>
          </table>
        </div>

        <mat-menu #coordinador="matMenu" xPosition="before">
          <div class="bg"></div>
          <mat-list>
            <div mat-subheader>Immigration</div>
            <mat-divider></mat-divider>
            <mat-list-item>
              <!-- <img [src]="{{_services.url_images}}{{data_coordinator?.photo}}" matListAvatar alt=""> -->
              <img src="{{_services.url_images}}{{data_coordinator?.photo}}" matListAvatar alt="">
              <div matLine (click)="goToProfile(data_coordinator.id)" class="browser">{{data_coordinator?.coordinator}}
              </div>
              <div matLine style="font-size: 10px;">{{data_coordinator?.office}}</div>
              <div matLine style="font-size: 10px;">{{data_coordinator?.email}}</div>
              <div matLine style="font-size: 10px;">{{data_coordinator?.phoneNumber}}</div>
            </mat-list-item>
          </mat-list>
          <!---->
          <!-- <div class="assigned_services">
            <div class="avatares">
              <div class="content">
                <img src="{{_services.url_images}}{{data_coordinator?.photo}}" alt="" class="img">
                <div class="title">

                </div>
              </div>
            </div>
            <br>
            <div class="data">

              <span class="title">Coordinator</span>
              <p>{{data_coordinator?.coordinator}}</p>

              <span class="title">Office</span>
              <p>{{data_coordinator?.office}}</p>


            </div>
            <div class="data">
              <span class="title">Premier E-mail</span>
              <p>{{data_coordinator?.email}}</p>

              <span class="title">Mobile No</span>
              <p>{{data_coordinator?.mobilePhone}}</p>

              <span class="title">Phone Number</span>
              <p>{{data_coordinator?.phoneNumber}}</p>

            </div>
            <div class="data">
              <span class="title">Service Line</span>
            </div>

            <div class="pie">
              <mat-checkbox [checked]="data_coordinator?.immigration">Immigration</mat-checkbox>
              <mat-checkbox [checked]="data_coordinator?.relocation">Relocation</mat-checkbox>
            </div>
            <br>
            <div class="pie">
              <span (click)="goToProfile(data_coordinator.id)">View Profile</span>
              <span (click)="assignTask(data_coordinator.id)">Assign Task</span>
            </div>
          </div> -->
        </mat-menu>

        <br>

        <div fxLayout="row" fxLayoutAlign="end start">

          <div class="page__section-button" *ngIf="__userlog__.role.id != 2 && __userlog__.role.id != 3">
            <button *ngIf="can_edit_exp_t" class="button-icon button-icon--more margin-top-mini"
              (click)="addCoordinador()">
              Add Coordinator
            </button>
          </div>
        </div>

        <!---------------------------->

        <br>
        <br>
        <!--VISTA PARA AGREGAR NUEVO COORDINADOR-->
        <div class="page__section page__section--card margin-bottom-min page__section--nowrap position-relative"
          *ngFor="let item of new_coordinator; let i = index">
          <div class="page__section margin-top-mini page__section--justify-end">
            <button class="page__section--card-closeButton" (click)="deleteCoordinador(i)">
            </button>
          </div>
          <mat-grid-list cols="4" rowHeight="60px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Coordinator Type</mat-label>
                <mat-select matNativeControl [(ngModel)]="item.coordinatorTypeId"
                  (selectionChange)="removeErrorLabel( $event.value, {handler: form_imm_cord, field: 'no_ctyp'} )">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Coordinator Type</mat-label>
                    <input matInput placeholder="Coordinator Type" [(ngModel)]="filterImiCoordina.coordinatorType">
                  </mat-form-field>
                  <mat-option *ngFor="let item of coordinatortype_catalogue | filterBy: filterImiCoordina"
                    [value]="item.id">
                    {{ item.coordinatorType }}
                  </mat-option>
                  <mat-option disabled *ngIf="(coordinatortype_catalogue | filterBy: filterImiCoordina).length === 0">
                    No matching elements</mat-option>
                </mat-select>
                <span class="label-error" *ngIf="form_imm_cord.no_ctyp && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="2" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Coordinator</mat-label>
                <mat-select matNativeControl [(ngModel)]="item.coordinatorId"
                  (selectionChange)="removeErrorLabel( $event.value, {handler: form_imm_cord, field: 'no_coor'} )">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Coordinator</mat-label>
                    <input matInput placeholder="Coordinator" [(ngModel)]="filterImiCoordina2.coordinator">
                  </mat-form-field>
                  <mat-option *ngFor="let item of coordinator_catalogue | filterBy: filterImiCoordina2"
                    [value]="item.id">
                    {{ item.coordinator }}
                  </mat-option>
                  <mat-option disabled *ngIf="(coordinator_catalogue | filterBy: filterImiCoordina2).length === 0">No
                    matching elements</mat-option>
                </mat-select>
                <span class="label-error" *ngIf="form_imm_cord.no_coor && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Assigned</mat-label>
                <input matInput disabled [matDatepicker]="team_assig" [max]="getMaxDateTo(0)"
                  [(ngModel)]="item.assigned"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat0'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat0'} )" />
                <mat-datepicker-toggle matSuffix [for]="team_assig"></mat-datepicker-toggle>
                <mat-datepicker #team_assig></mat-datepicker>
                <span class="label-error" *ngIf="form_imm_cord.no_dat0 && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill">
                <mat-label>Accepted Date</mat-label>
                <input matInput [matDatepicker]="team_accep" disabled [max]="getMaxDateTo(0)"
                  [(ngModel)]="item.accepted"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat1'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat1'} )" />
                <mat-datepicker-toggle matSuffix [for]="team_accep"></mat-datepicker-toggle>
                <mat-datepicker #team_accep></mat-datepicker>
                <span class="label-error" *ngIf="form_imm_cord.no_dat1 && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile> -->
          </mat-grid-list>
          <div class="page__section margin-top-mini page__section--justify-end">
            <div class="page__section-buttong">
              <button (click)="addToEditModel()">Save</button>
            </div>
          </div>
        </div>

        <!-----------------------Supplier Partners immigration--------------------------------->
        <div class="page__section">
          <div class="page__title">
            Supplier Partners
          </div>
        </div>
        <div class="page__section">
          <table mat-table mat-sort [dataSource]="suplierData"
            style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

            <!-- Position Column -->

            <!-- Position Column -->
            <ng-container matColumnDef="campo_1">
              <th mat-header-cell *matHeaderCellDef class="text-center">Country</th>
              <td mat-cell *matCellDef="let element" class="text-center">{{element.supplierType}}</td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_2">
              <th mat-header-cell *matHeaderCellDef class="text-center">Supplier Company</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <span *ngIf="element.supplierCompany != null">
                  {{element.supplierCompany}}
                </span>
                <span *ngIf="element.supplierCompany == null">
                  Independent consultant
                </span>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_3">
              <th mat-header-cell *matHeaderCellDef class="text-center">Supplier</th>
              <td mat-cell *matCellDef="let element" class="link" [matMenuTriggerFor]="supplier"
                style="cursor: pointer;">

                <span *ngIf="element.status.trim() == 'Accepted'" class="dot__green_color"
                  (click)="view_upplier_detail(element.supplier_Detail)">
                  {{element.supplier}}
                </span>
                <span *ngIf="element.status.trim() == 'Pending Accepted'" class="dot__yellow_color"
                  (click)="view_upplier_detail(element.supplier_Detail)">
                  {{element.supplier}}
                </span>
                <span *ngIf="element.status.trim() == 'Rejected'" class="dot__red_color"
                  (click)="view_upplier_detail(element.supplier_Detail)">
                  {{element.supplier}}
                </span>
                <mat-menu #supplier="matMenu" xPosition="before">
                  <div class="bg"></div>
                  <mat-list>
                    <div mat-subheader>Immigration</div>
                    <mat-divider></mat-divider>
                    <mat-list-item *ngFor="let item of supplier_detail">
                      <img src="{{_services.url_images}}{{item.photo}}" matListAvatar alt="">
                      <div matLine (click)="goToProfile(item.id)" class="browser">{{item?.name}}</div>
                      <div matLine style="font-size: 10px;">{{item?.email}}</div>
                      <div matLine style="font-size: 10px;">{{item?.phone}}</div>
                    </mat-list-item>
                  </mat-list>
                </mat-menu>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_4">
              <th mat-header-cell *matHeaderCellDef class="text-center">Assigned</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{element.assignedDate | date: 'dd MMM yyyy'}}
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_5">
              <th mat-header-cell *matHeaderCellDef class="text-center">Acceptance</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <span *ngIf="element.acceptedDate == null">
                  Pending To accept
                </span>
                <span *ngIf="element.acceptedDate != null">
                  {{element.acceptedDate | date: 'dd MMM yyyy'}}
                </span>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_6">
              <th mat-header-cell *matHeaderCellDef class="text-center">Assigned Services</th>
              <td mat-cell *matCellDef="let element" class="text-center browser">
                <span [matMenuTriggerFor]="afterMenu" (click)="viewassigned_services(element)"
                  *ngIf="__userlog__.role.id != 3">
                  {{element.total}}
                </span>
                <span *ngIf="__userlog__.role.id == 3">
                  {{element.total}}
                </span>
                <mat-menu #afterMenu="matMenu" xPosition="before">
                  <div class="bg"></div>
                  <div class="assigned_services">
                    <p class="services" *ngFor="let item of assigned_services">
                      <mat-checkbox [(ngModel)]="item.assignee"
                        (change)="addordeleteservices($event,item.id, item.idsuplier, item.service)">
                        {{item.service}} /
                        {{item.serviceNumber}}
                      </mat-checkbox>
                    </p>
                  </div>
                </mat-menu>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_7">
              <th mat-header-cell *matHeaderCellDef class="text-center"></th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <img src="../../../assets/icons/quit.svg" alt="" (click)="deleteSupplier(element, 1)"
                  *ngIf="can_edit_exp_t">
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="immigration_supplier_partners_table"></tr>
            <tr mat-row *matRowDef="let row; columns: immigration_supplier_partners_table;"></tr>
          </table>
        </div>
        <br>
        <div fxLayout="row" fxLayoutAlign="end start">
          <div class="page__section-button" *ngIf="__userlog__.role.id != 3">
            <button (click)="showaddSuplier()" class="button-icon button-icon--more margin-top-mini"
              *ngIf="can_edit_exp_t">
              Add Supplier
            </button>
          </div>
        </div>
        <br>
        <br>
        <div class="page__section page__section--card margin-bottom-min" *ngIf="addSuplier">
          <div class="page__section margin-top-mini page__section--justify-end">
            <button class="page__section--card-closeButton" (click)="addSuplier = !addSuplier">
            </button>
          </div>
          <form [formGroup]="SupplierForm">
            <mat-grid-list cols="4" rowHeight="80px">

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Supplier Country</mat-label>
                  <mat-select required formControlName="Supplier_Type" [(ngModel)]="TempDataSuplier.supplierTypeId">
                    <mat-option *ngIf="homeImm > 0" [value]="edit_sr_model.assigneeInformations[0].homeCountryId"
                      (click)="__supplier__(edit_sr_model.assigneeInformations[0].homeCountryId, edit_sr_model.assigneeInformations[0].homeCityId,1);">
                      {{homeCity}}, {{homeCountry}}
                    </mat-option>
                    <mat-option *ngIf="hostImm > 0" [value]="edit_sr_model.assigneeInformations[0].hostCountry"
                      (click)="__supplier__(edit_sr_model.assigneeInformations[0].hostCountry, edit_sr_model.assigneeInformations[0].hostCityId,1);">
                      {{ getNameCityHost(edit_sr_model.assigneeInformations[0].hostCityId )}}, {{
                      getNameCountry(edit_sr_model.assigneeInformations[0].hostCountry )}}
                    </mat-option>

                  </mat-select>
                  <mat-error
                    *ngIf="SupplierForm.controls.Supplier_Type.touched && SupplierForm.controls.Supplier_Type.invalid">
                    <span *ngIf="SupplierForm.controls.Supplier_Type.errors.required">
                      This field is
                      mandatory.
                    </span>
                  </mat-error>
                </mat-form-field>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Supplier</mat-label>
                  <mat-select required formControlName="Supplier" [(ngModel)]="TempDataSuplier.supplierId"
                    (selectionChange)="getCompany(1, 1); company_()">
                    <mat-option *ngFor="let type of dataCSuplier" [value]="type.id">{{type.name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="SupplierForm.controls.Supplier.touched && SupplierForm.controls.Supplier.invalid">
                    <span *ngIf="SupplierForm.controls.Supplier.errors.required">
                      This field is
                      mandatory.
                    </span>
                  </mat-error>
                </mat-form-field>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12 comments input_central" style="display: flex; height: 80%;">
                  <div>
                    <span class="text-mini gray_05">Supplier Company</span><br />
                    {{type_company}}
                  </div>
                </div>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Services to Assign</mat-label>
                  <mat-select multiple (focus)="active_service = false" required [(ngModel)]="TempDataSuplier.service"
                    [formControl]="toppings">
                    <mat-option #allSelected (click)="toggleAllSelection()" [value]="0">Select all</mat-option>
                    <ng-container *ngFor="let item of _serviciosByConsultantImm; let i = index">
                      <mat-option *ngIf="!item.assignee" #thisSelected
                        (click)="tosslePerOne(thisSelected, item.id, item.idsuplier, item.service, i);"
                        [value]="item.id">
                        <span style="min-width: 180px;">{{item.service}} / {{item.serviceNumber}}</span>
                      </mat-option>
                    </ng-container>
                  </mat-select>
                </mat-form-field>

              </mat-grid-tile>
              <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Assigned Date |{{TempDataSuplier.assignedDate}}|</mat-label>
                  <input matInput formControlName="Assigned_Date" required [matDatepicker]="picker"
                    [(ngModel)]="TempDataSuplier.assignedDate" [min]="fecha_minima">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                  <mat-error
                    *ngIf="SupplierForm.controls.Assigned_Date.touched && SupplierForm.controls.Assigned_Date.invalid">
                    <span *ngIf="SupplierForm.controls.Assigned_Date.errors.required">
                      This field is
                      mandatory.
                    </span>
                  </mat-error>
                </mat-form-field>

              </mat-grid-tile> -->
            </mat-grid-list>

            <div class="page__section margin-top-mini page__section--justify-end">
              <div class="page__section-buttong">
                <button (click)="saveSuplier()">Save</button>
              </div>
            </div>
          </form>
        </div>
        <!----------------immigrations services-------------------------->
        <div class="page__section">
          <div class="page__title">
            Immigration Services
          </div>
        </div>
        <div *ngIf="home_contry?.data?.length > 0">
          <div class="page__section">
            <span class="page__section-name">
              Home Country: {{homeCountry}}
            </span>
          </div>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1)"
                    [(ngModel)]="dinamic_params_homm.status">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Status</mat-label>
                      <input matInput placeholder="Status" [(ngModel)]="filterStatusImiService.status">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_status | filterBy: filterStatusImiService" [value]="item.id">
                      {{ item.status }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_status | filterBy: filterStatusImiService).length === 0">No
                      matching
                      elements
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Delivered To</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1)"
                    [(ngModel)]="dinamic_params_homm.deliverTo">
                    <mat-option selected disabled value="">Delivered To</mat-option>
                    <mat-option *ngFor="let item of line_deliver" [value]="item.dependentId">
                      {{ item.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Service Type</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1)"
                    [(ngModel)]="dinamic_params_homm.serviceType">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Service Type</mat-label>
                      <input matInput placeholder="Service Type" [(ngModel)]="filterServiceImmiServ.category">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_category | filterBy: filterServiceImmiServ" [value]="item.id">
                      {{ item.category }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_category | filterBy: filterServiceImmiServ).length === 0">No
                      matching
                      elements</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div style="width: 100%; display: flex;">
                <mat-form-field appearance="fill" class="input_central">
                  <mat-label>Program</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1)"
                    [(ngModel)]="dinamic_params_homm.program">
                    <mat-option selected disabled value="">Program</mat-option>
                    <mat-option *ngFor="let item of line_service" [value]="item.id">
                      {{ item.service }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                <button mat-icon-button color="primary" style="margin-left: -30px; margin-top: 12px;"
                  matTooltip="Clear filter" (click)="crearfilter(1)">
                  <mat-icon [ngClass]="{'refresh': filteruno}">cached</mat-icon>
                </button>
              </div>
            </mat-grid-tile>
          </mat-grid-list>

          <div class="page__section margin-bottom-m">

            <table mat-table mat-sort [dataSource]="home_contry" *ngxPermissionsOnly="['1', '11', '19']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">
              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.statusService}}</td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="showDialogentryVisa(element,1)">{{element.number_server}}</span-->
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="showDialogentryVisa(element,1)">{{element.number_server}}</span> -->
                  {{element.number_server}}
                </td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="showDialogentryVisa(element,1)"
                    *ngIf="element.serviceType == 'Standalone'">{{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)"
                    *ngIf="element.serviceType != 'Standalone'">{{element.service_name}}</span>
                </td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.country}}">
                    {{element.location}}
                  </span>
                </td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>
              <ng-container matColumnDef="Delivered To">
                <th mat-header-cell *matHeaderCellDef class="text-center">Delivered To</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.deliveredTo}}
                </td>
              </ng-container>
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date: 'dd MMM yyyy' }}
                </td>
              </ng-container>
              <!-- Position Column -->
              <!--ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Accepted Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date: 'dd MMM yyyy' }}
                </td>
              </ng-container-->

              <!-- Position Column -->
              <ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="permission_edit && element.serviceType == 'Standalone'">
                    <img (click)="showDialogentryVisa(element,1)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" />
                  </div> -->
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="home_country_table_immi"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_immi;"></tr>
            </table>

            <table mat-table mat-sort [dataSource]="home_contry" *ngxPermissionsOnly="['2', '3', '4', '13', '14']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">
              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.status}}</td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="showDialogentryVisa(element,1)">{{element.number_server}}</span> -->
                  {{element.number_server}}
                </td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="showDialogentryVisa(element,1)"
                    *ngIf="element.serviceType == 'Standalone'">{{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)"
                    *ngIf="element.serviceType != 'Standalone'">{{element.service_name}}</span>
                </td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.country}}">
                    {{element.location}}
                  </span>
                </td>
              </ng-container>
              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>
              <ng-container matColumnDef="Delivered To">
                <th mat-header-cell *matHeaderCellDef class="text-center">Delivered To</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.deliveredTo}}
                </td>
              </ng-container>
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date: 'dd MMM yyyy' }}
                </td>
              </ng-container>
              <!-- Position Column -->
              <!--ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Accepted Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date: 'dd MMM yyyy' }}
                </td>
              </ng-container-->

              <!-- Position Column -->
              <!--ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container-->

              <!-- Position Column -->
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="permission_edit && element.serviceType == 'Standalone'">
                    <img (click)="showDialogentryVisa(element,1)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" />
                  </div> -->
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="home_country_table_immi_"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_immi_;"></tr>
            </table>
          </div>
        </div>

        <div *ngIf="host_contry?.data?.length > 0">
          <div class="page__section">
            <span class="page__section-name">
              Host Country: {{Host_Home_country.host_country_name}}
            </span>
          </div>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2)"
                    [(ngModel)]="dinamic_params_host.status">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Status</mat-label>
                      <input matInput placeholder="Status" [(ngModel)]="filterStatusHostCount.status">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_status | filterBy: filterStatusHostCount" [value]="item.id">
                      {{ item.status }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_status | filterBy: filterStatusHostCount).length === 0">No
                      matching
                      elements
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Delivered To</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2)"
                    [(ngModel)]="dinamic_params_host.deliverTo">
                    <mat-option selected disabled value="">Delivered To</mat-option>
                    <mat-option *ngFor="let item of line_deliver" [value]="item.dependentId">
                      {{ item.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Service Type</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2)"
                    [(ngModel)]="dinamic_params_host.serviceType">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Service Type</mat-label>
                      <input matInput placeholder="Service Type" [(ngModel)]="filterServiceHomeCountry.category">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_category | filterBy: filterServiceHomeCountry"
                      [value]="item.id">
                      {{ item.category }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_category | filterBy: filterServiceHomeCountry).length === 0">No
                      matching
                      elements</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div style="width: 100%; display: flex;">
                <mat-form-field appearance="fill" class="input_central">
                  <mat-label>Program</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2)"
                    [(ngModel)]="dinamic_params_host.program">
                    <mat-option selected disabled value="">Program</mat-option>
                    <mat-option *ngFor="let item of line_service" [value]="item.id">
                      {{ item.service }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <button mat-icon-button color="primary" style="margin-left: -30px; margin-top: 12px;"
                  matTooltip="Clear filter" (click)="crearfilter(2)">
                  <mat-icon [ngClass]="{'refresh': filterdos}">cached</mat-icon>
                </button>
              </div>
            </mat-grid-tile>
          </mat-grid-list>

          <div class="page__section margin-bottom-m">

            <table mat-table mat-sort [dataSource]="host_contry" *ngxPermissionsOnly="['1', '11', '19']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.statusService}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <!--ng-container matColumnDef="Category">
                <th mat-header-cell *matHeaderCellDef class="text-center">Category</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}
                </td>
              </ng-container-->

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="showDialogentryVisa(element,2)">{{element.number_server}}</span> -->
                  {{element.number_server}}

                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="showDialogentryVisa(element,2)"
                    *ngIf="element.serviceType == 'Standalone'"> {{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 2 , edit_sr_model.assigneeInformations[0].hostCountry)"
                    *ngIf="element.serviceType != 'Standalone'"> {{element.service_name}}</span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.country}}">
                    {{element.location}}
                  </span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Delivered To">
                <th mat-header-cell *matHeaderCellDef class="text-center">Delivered To</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.deliveredTo}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date: 'dd MMM yyyy'}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <!--ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Accepted Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date: 'dd MMM yyyy'}}
                </td>
              </ng-container-->


              <!-- Position Column -->
              <ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container>


              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="permission_edit && element.serviceType == 'Standalone'">
                    <img (click)="showDialogentryVisa(element,1)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" />
                  </div> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="home_country_table_immi"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_immi;"></tr>
            </table>

            <table mat-table mat-sort [dataSource]="host_contry" *ngxPermissionsOnly="['2', '3', '4', '13', '14']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.statusService}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <!--ng-container matColumnDef="Category">
                <th mat-header-cell *matHeaderCellDef class="text-center">Category</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}
                </td>
              </ng-container-->

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="showDialogentryVisa(element,2)">{{element.number_server}}</span> -->
                  {{element.number_server}}

                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="showDialogentryVisa(element,2)"
                    *ngIf="element.serviceType == 'Standalone'">{{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 2 , edit_sr_model.assigneeInformations[0].hostCountry)"
                    *ngIf="element.serviceType != 'Standalone'">{{element.service_name}}</span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.country}}">
                    {{element.location}}
                  </span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Delivered To">
                <th mat-header-cell *matHeaderCellDef class="text-center">Delivered To</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.deliveredTo}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date: 'dd MMM yyyy'}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <!--ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Accepted Date</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date: 'dd MMM yyyy'}}
                </td>
              </ng-container-->


              <!-- Position Column -->
              <!--ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container-->


              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="permission_edit && element.serviceType == 'Standalone'">
                    <img (click)="showDialogentryVisa(element,1)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" />
                  </div> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="home_country_table_immi_"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_immi_;"></tr>
            </table>
          </div>
        </div>

        <div class="page__section">
          <div class="page__title">
            Immigrations Profile
            <br /><br />
            <mat-slide-toggle [disabled]="profileCunsultant == true" [(ngModel)]="show_imm_prof">
            </mat-slide-toggle>
          </div>
        </div>
        <div class="page__section page__section--card margin-bottom-min page__section--nowrap" *ngIf="show_imm_prof">
          <div class="page__section">
            <span class="page__section-name">
              Passport Information
            </span>
          </div>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Passport Number</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Passport Number" type="text"
                  [(ngModel)]="immgration_profile.passportInformation.number"
                  (change)="removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_numb'} )" />
                <!-- <span class="label-error" *ngIf="passport_form_val.no_numb">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Date of Issue</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="imm_date_issue"
                  [max]="getMaxDateTo(0)" [(ngModel)]="immgration_profile.passportInformation.issue"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_dat0'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_dat0'} )" />
                <mat-datepicker-toggle matSuffix [for]="imm_date_issue"></mat-datepicker-toggle>
                <mat-datepicker #imm_date_issue></mat-datepicker>
                <!-- <span class="label-error" *ngIf="passport_form_val.no_dat0">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Date of Expiration</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="imm_date_expi"
                  [(ngModel)]="immgration_profile.passportInformation.expiration" (dateChange)="
                    removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_dat1'} );
                    isPassportExpiring( immgration_profile.passportInformation.expiration )" (change)="
                    removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_dat1'} );
                    isPassportExpiring( immgration_profile.passportInformation.expiration )" />
                <mat-datepicker-toggle matSuffix [for]="imm_date_expi"></mat-datepicker-toggle>
                <mat-datepicker #imm_date_expi></mat-datepicker>
                <!-- <span class="label-error" *ngIf="passport_form_val.no_dat1">
                  Field is required
                </span> -->
                <span class="label-error white-nowrap" *ngIf="passport_expiring && !passport_form_val.no_dat1">
                  Passport is close to an expiration.
                </span>
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Issuing Authority</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Issuing Authority" type="text"
                  [(ngModel)]="immgration_profile.passportInformation.issuingAuthority"
                  (change)="removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_auto'} )" />
                <!-- <span class="label-error" *ngIf="passport_form_val.no_auto">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Place of Issue (City)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Place of Issue (City)" type="text"
                  [(ngModel)]="immgration_profile.passportInformation.placeIssue"
                  (change)="removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_plac'} )" />
                <!-- <span class="label-error" *ngIf="passport_form_val.no_plac">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="2" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Current Address</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Current Address" type="text"
                  [(ngModel)]="immgration_profile.passportInformation.currentAddress"
                  (change)="removeErrorLabel( $event.target.value, {handler: passport_form_val, field: 'no_addr'} )" />
                <!-- <span class="label-error" *ngIf="passport_form_val.no_addr">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="4" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Specific Attention Points (Add Comments as needed)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput
                  placeholder="Specific Attention Points  (Add Comments as needed)" type="text"
                  [(ngModel)]="immgration_profile.passportInformation.specificAttentionPoints" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <div class="page__section">
            <span class="page__section-name">
              Previous Host Country Information
            </span>
          </div>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="page__section page__section-inputs">
                <mat-checkbox [disabled]="profileCunsultant == true" class="example-margin"
                  [(ngModel)]="immgration_profile.previousHostCountry.priorHostCountryVisaIssued">
                  <span class="text-mini">Prior Host Country Visa Issued</span>
                </mat-checkbox>
              </div>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Visa Number</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Visa Number" type="text"
                  (change)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_visa'} )"
                  [(ngModel)]="immgration_profile.previousHostCountry.visaNumber" />
                <!-- <span class="label-error" *ngIf="previoush_form_val.no_visa">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Date of Issue</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="imm_date_issue_1"
                  [max]="getMaxDateTo(0)"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_dat0'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_dat0'} )"
                  [(ngModel)]="immgration_profile.previousHostCountry.issue" />
                <mat-datepicker-toggle matSuffix [for]="imm_date_issue_1"></mat-datepicker-toggle>
                <mat-datepicker #imm_date_issue_1></mat-datepicker>
                <!-- <span class="label-error" *ngIf="previoush_form_val.no_dat0">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Date of Expiration</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="imm_date_expi_1"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_dat1'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_dat1'} )"
                  [(ngModel)]="immgration_profile.previousHostCountry.expiration" />
                <mat-datepicker-toggle matSuffix [for]="imm_date_expi_1"></mat-datepicker-toggle>
                <mat-datepicker #imm_date_expi_1></mat-datepicker>
                <!-- <span class="label-error" *ngIf="previoush_form_val.no_dat1">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Issuing Authority</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Issuing Authority" type="text"
                  (change)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_auto'} )"
                  [(ngModel)]="immgration_profile.previousHostCountry.issuingAuthority" />
                <!-- <span class="label-error" *ngIf="previoush_form_val.no_auto">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Place of Issue (City)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Place of Issue (City)" type="text"
                  (change)="removeErrorLabel( $event.target.value, {handler: previoush_form_val, field: 'no_city'} )"
                  [(ngModel)]="immgration_profile.previousHostCountry.placeIssue" />
                <!-- <span class="label-error" *ngIf="previoush_form_val.no_city">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>VISA Category</mat-label>
                <mat-select [disabled]="profileCunsultant == true" matNativeControl
                  [(ngModel)]="immgration_profile.previousHostCountry.visaCategoryId"
                  (selectionChange)="removeErrorLabel( $event.value, {handler: previoush_form_val, field: 'no_vcat'} )">
                  <mat-option selected disabled value="">Coordinator</mat-option>
                  <mat-option *ngFor="let item of visacategory_catalogue;" [value]="item.id">
                    {{ item.visaCategory }}
                  </mat-option>
                </mat-select>
                <!-- <span class="label-error" *ngIf="previoush_form_val.no_vcat">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>ID Assigned Number (Registration No.)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput
                  placeholder="ID Assigned Number (Registration No.)" type="text"
                  [(ngModel)]="immgration_profile.previousHostCountry.idAssignedNumber" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Position and Employer</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Position and Employer" type="text"
                  [(ngModel)]="immgration_profile.previousHostCountry.positionEmployer" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Position Responsabilities</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Position Responsabilities"
                  [(ngModel)]="immgration_profile.previousHostCountry.positionResponsabilities" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <div class="page__section">
            <span class="page__section-name">
              Educational Background
            </span>
          </div>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Highest Level of Education</mat-label>
                <mat-select [disabled]="profileCunsultant == true" matNativeControl
                  [(ngModel)]="immgration_profile.highestLevelEducationalId"
                  (selectionChange)="removeErrorLabel( $event.value, {handler: imm_global_form, field: 'no_leve'} )">
                  <mat-option selected disabled value="">Highest Level of Education</mat-option>
                  <mat-option *ngFor="let item of hightschool_catalogue;" [value]="item.id">
                    {{ item.highestLevelEducation }}
                  </mat-option>
                </mat-select>
                <!-- <span class="label-error" *ngIf="imm_global_form.no_leve">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <div *ngFor="let education of immgration_education, index as index;"
            class="page__section page__section--card margin-bottom-min imm-school-card page__section--nowrap">
            <button [disabled]="profileCunsultant == true" *ngIf="index != 0" (click)="removeEducationGroup( index )"
              class="page__section--card-closeButton">
              x
            </button>
            <mat-grid-list cols="4" rowHeight="80px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Institution</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Institution" type="text"
                    [value]="education.institution" (change)="education.institution = $event.target.value" />
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Field of Study</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Field of Study" type="text"
                    [value]="education.fieldStudy" (change)="education.fieldStudy = $event.target.value" />
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Start Date</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="school_date_start"
                    [value]="education.startDate" (change)="education.startDate = $event.target.value"
                    [max]="getMaxDateTo(0)" (dateChange)="education.startDate = $event.value" />
                  <mat-datepicker-toggle matSuffix [for]="school_date_start"></mat-datepicker-toggle>
                  <mat-datepicker #school_date_start></mat-datepicker>
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>End Date</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="school_date_end"
                    [value]="education.endDate" (change)="education.endDate = $event.target.value"
                    (dateChange)="education.endDate = $event.value" />
                  <mat-datepicker-toggle matSuffix [for]="school_date_end"></mat-datepicker-toggle>
                  <mat-datepicker #school_date_end></mat-datepicker>
                </mat-form-field>
              </mat-grid-tile>
            </mat-grid-list>
            <mat-grid-list cols="4" rowHeight="80px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Degree</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Degree" type="text"
                    [value]="education.degree" (change)="education.degree = $event.target.value" />
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="3" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>List Professional Licenses</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="List Professional Licenses"
                    type="text" [value]="education.listProfessionalLicenses"
                    (change)="education.listProfessionalLicenses = $event.target.value" />
                </mat-form-field>
              </mat-grid-tile>
            </mat-grid-list>
          </div>
          <div class="page__section margin-bottom-m no-padding-tb">
            <div class="page__section-name"></div>
            <div class="page__section-button">
              <button [disabled]="profileCunsultant == true" (click)="addEducationGroup()"
                class="button-icon button-icon--more margin-top-mini">
                Add School
              </button>
            </div>
          </div>
          <div class="page__section">
            <span class="page__section-name">
              Language Proficiency
            </span>
          </div>
          <div *ngFor="let language of immgration_languages, index as index;"
            class="page__section page__section--card margin-bottom-min imm-language-card page__section--nowrap">
            <button *ngIf="index != 0" [disabled]="profileCunsultant == true" (click)="removeLanguage( index )"
              class="page__section--card-closeButton">
              x
            </button>
            <mat-grid-list cols="4" rowHeight="80px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Language</mat-label>
                  <mat-select [disabled]="profileCunsultant == true" matNativeControl required
                    [value]="language.languageId" (selectionChange)="language.languageId = $event.value;">
                    <mat-option selected disabled value="">Language</mat-option>
                    <mat-option *ngFor="let item of languages_catalogue;" [value]="item.id">
                      {{ item.name }}
                    </mat-option>
                  </mat-select>
                  <!-- <span class="label-error" *ngIf="language.languageId == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Proficiency</mat-label>
                  <mat-select [disabled]="profileCunsultant == true" matNativeControl required
                    [value]="language.proficiencyId" (selectionChange)="language.proficiencyId = $event.value;">
                    <mat-option selected disabled value="">Proficiency</mat-option>
                    <mat-option *ngFor="let item of proficiency_catalogue;" [value]="item.id">
                      {{ item.proficiency }}
                    </mat-option>
                  </mat-select>
                  <!-- <span class="label-error" *ngIf="language.proficiencyId == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Comments</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Comments" type="text"
                    [value]="language.comments" (change)="language.comments = $event.target.value" />
                </mat-form-field>
              </mat-grid-tile>
            </mat-grid-list>
          </div>
          <div class="page__section margin-bottom-m no-padding-tb">
            <div class="page__section-name"></div>
            <div class="page__section-button">
              <button [disabled]="profileCunsultant == true" (click)="addLanguage()"
                class="button-icon button-icon--more margin-top-mini">
                Add Language
              </button>
            </div>
          </div>
          <div class="page__section">
            <span class="page__section-name">
              Assignment Information
            </span>
          </div>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Legal Name of Home Country Entity</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Legal Name of Home Country Entity"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.legalNameHomeCountry"
                  (change)="removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_name'} )" />
                <span class="label-error" *ngIf="assign_form_validator.no_name">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="3" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Location (Full Address)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Location (Full Address)" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.locationHome" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Current Job Position Title</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Current Job Position Title"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.currentJobPositionTitle"
                  (change)="removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_cjob'} )" />
                <!-- <span class="label-error" *ngIf="assign_form_validator.no_cjob">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Employment Dates (From)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="assignment_info_datef"
                  [max]="getMaxDateTo(0)" [(ngModel)]="immgration_profile.assigmentInformation.employmentFrom"
                  (change)="removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_eda0'} )"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_eda0'} )" />
                <mat-datepicker-toggle matSuffix [for]="assignment_info_datef"></mat-datepicker-toggle>
                <mat-datepicker #assignment_info_datef></mat-datepicker>
                <!-- <span class="label-error" *ngIf="assign_form_validator.no_eda0">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Employment Dates (To)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="assignment_info_datet"
                  [(ngModel)]="immgration_profile.assigmentInformation.employmentTo"
                  (change)="removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_eda1'} )"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_eda1'} )" />
                <mat-datepicker-toggle matSuffix [for]="assignment_info_datet"></mat-datepicker-toggle>
                <mat-datepicker #assignment_info_datet></mat-datepicker>
                <!-- <span class="label-error" *ngIf="assign_form_validator.no_eda1">
                  Field is required
                </span> -->
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Legal Name of Host Country Entity</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Legal Name of Host Country Entity"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.legalNameHostCountry" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="3" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Location (Full Address)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Location (Full Address)" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.locationHost" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>New Job Position Title</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="New Job Position Title" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.newJobPositionTitle" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="3" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>New Job Responsibilities</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="New Job Responsibilities"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.newJobResponsibilitie" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Estimated Start Date</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="assignment_info_estim"
                  [(ngModel)]="immgration_profile.assigmentInformation.estimatedStartDate">
                <mat-datepicker-toggle matSuffix [for]="assignment_info_estim"></mat-datepicker-toggle>
                <mat-datepicker #assignment_info_estim></mat-datepicker>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Length of Assigment (Estimate)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Lenght of Assigment (Estimate)"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.lenghtAssigment" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Current Monthly Gross Salary</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Current Monthly Gross Salary"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.currentGrossSalary" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Currency</mat-label>
                <mat-select [disabled]="profileCunsultant == true" matNativeControl required
                  [(ngModel)]="immgration_profile.assigmentInformation.currencyCurrentGrossSalary">
                  <mat-option selected disabled value="">Currency</mat-option>
                  <mat-option *ngFor="let item of caCurrency;" [value]="item.id">
                    {{ item.currency }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>New Gross Salary</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="New Gross Salary" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.newGrossSalary" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Currency</mat-label>
                <mat-select [disabled]="profileCunsultant == true" matNativeControl required
                  [(ngModel)]="immgration_profile.assigmentInformation.currencyNewGrossSalary">
                  <mat-option selected disabled value="">Currency</mat-option>
                  <mat-option *ngFor="let item of caCurrency;" [value]="item.id">
                    {{ item.currency }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Payroll Location</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Payroll Location" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.payrollLocation" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="page__section page__section-inputs">
                <mat-checkbox [disabled]="profileCunsultant == true" class="example-margin"
                  (change)="canIShowImmProSecondPayRoll()"
                  [(ngModel)]="immgration_profile.assigmentInformation.splitPayrollApplicable">
                  Split Payroll Applicable
                </mat-checkbox>
              </div>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1" [class.display-none]="!show_second_prfield">
              <mat-form-field class="input_central_half">
                <mat-label>Payroll Location</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Payroll Location" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.payrollLocationSecond" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Hiring Manager (Local Contact in Host Country)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput
                  placeholder="Hiring Manager (Local Contact in Host Country" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.hiringManager" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Hiring Manager Contact (Phone number)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput
                  placeholder="Hiring Manager Contact (Phone number)" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.hiringManagerPhone" />
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Hiring Manager Contact (E-mail)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput placeholder="Hiring Manager Contact (E-mail)"
                  type="text" [(ngModel)]="immgration_profile.assigmentInformation.hiringManagerEmail" (change)="
                    removeErrorLabel( $event.target.value, {handler: assign_form_validator, field: 'no_hmai'} );
                    validEmailHiringManager( $event.target.value );" />
                <span class="label-error" *ngIf="assign_form_validator.no_hmai">
                  Field is required
                </span>
                <span class="label-error" *ngIf="assign_form_validator.no_hmai_val && !assign_form_validator.no_hmai">
                  Email format is not valid
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Acting as Host Companys Legal Representative</mat-label>
                <input [disabled]="profileCunsultant == true" matInput
                  placeholder="Acting as Host Companys Legal Representative" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.legalRepresentative" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <mat-grid-list cols="4" rowHeight="80px">
            <mat-grid-tile [colspan]="4" [rowspan]="1">
              <mat-form-field class="input_central_half">
                <mat-label>Specific Attention Points (Add Comments as needed)</mat-label>
                <input [disabled]="profileCunsultant == true" matInput
                  placeholder="Specific Attention Points  (Add Comments as needed)" type="text"
                  [(ngModel)]="immgration_profile.assigmentInformation.specificAtention" />
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>
          <div class="page__section">
            <span class="page__section-name">
              Dependents Immigration Info
            </span>
          </div>
          <div *ngFor="let dependent of immgration_dependent, index as index;"
            class="page__section page__section--card margin-bottom-min imm-dependent-card">
            <button [disabled]="profileCunsultant == true" (click)="removeDependent( index )"
              class="page__section--card-closeButton">
              x
            </button>
            <mat-grid-list cols="4" rowHeight="80px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Relationship</mat-label>
                  <mat-select [disabled]="profileCunsultant == true" matNativeControl required
                    [value]="dependent.relationshipId" (selectionChange)="dependent.relationshipId = $event.value;">
                    <mat-option selected disabled value="">Relationship</mat-option>
                    <mat-option *ngFor="let item of relationship_catalogue;" [value]="item.id">
                      {{ item.relationship }}
                    </mat-option>
                  </mat-select>
                  <!-- <span class="label-error" *ngIf="dependent.relationshipId == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Name</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Name" type="text"
                    [value]="dependent.name" (change)="dependent.name = $event.target.value;" />
                  <!-- <span class="label-error" *ngIf="dependent.name == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Passport Number</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Passport Number" type="text"
                    [value]="dependent.passportNumber" (change)="dependent.passportNumber = $event.target.value" />
                  <!-- <span class="label-error" *ngIf="dependent.passportNumber == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Date of Issue</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput [(ngModel)]="dependent.issue"
                    [matDatepicker]="dependent_data_issue" [value]="dependent.issue" [max]="getMaxDateTo(0)"
                    (change)="dependent.issue = $event.target.value" (dateChange)="dependent.issue = $event.value" />
                  <mat-datepicker-toggle matSuffix [for]="dependent_data_issue"></mat-datepicker-toggle>
                  <mat-datepicker #dependent_data_issue></mat-datepicker>
                  <!-- <span class="label-error" *ngIf="dependent.issue == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
            </mat-grid-list>
            <mat-grid-list cols="4" rowHeight="80px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Date of Expiration</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="dependent_data_expi"
                    [value]="dependent.expiration" (change)="dependent.expiration = $event.target.value"
                    (dateChange)="dependent.expiration = $event.value" />
                  <mat-datepicker-toggle matSuffix [for]="dependent_data_expi"></mat-datepicker-toggle>
                  <mat-datepicker #dependent_data_expi></mat-datepicker>
                  <!-- <span class="label-error" *ngIf="dependent.expiration == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Issuing Authority</mat-label>
                  <input matInput placeholder="Issuing Authority" [(ngModel)]="dependent.issuingAuthority"
                    type="text" />
                  <!-- <span class="label-error" *ngIf="dependent.issue == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Place of Issue (City)</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput placeholder="Place of Issue (City)" type="text"
                    [value]="dependent.placeIssue" (change)="dependent.placeIssue = $event.target.value" />
                  <!-- <span class="label-error" *ngIf="dependent.placeIssue == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Entry Date to Host Country</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="dependent_data_entry"
                    [value]="dependent.entryDateHostCountry"
                    (change)="dependent.entryDateHostCountry = $event.target.value"
                    (dateChange)="dependent.entryDateHostCountry = $event.value" />
                  <mat-datepicker-toggle matSuffix [for]="dependent_data_entry"></mat-datepicker-toggle>
                  <mat-datepicker #dependent_data_entry></mat-datepicker>
                  <!-- <span class="label-error" *ngIf="dependent.entryDateHostCountry == '' && show_immigration_errors">
                    Field is required
                  </span> -->
                </mat-form-field>
              </mat-grid-tile>
            </mat-grid-list>
            <mat-grid-list cols="4" rowHeight="80px">
              <mat-grid-tile [colspan]="4" [rowspan]="1">
                <mat-form-field class="input_central_half">
                  <mat-label>Specific Attention Points (Add Comments as needed)</mat-label>
                  <input [disabled]="profileCunsultant == true" matInput [value]="dependent.specificAttentionPoints"
                    placeholder="Specific Attention Points  (Add Comments as needed)"
                    (change)="dependent.specificAttentionPoints = $event.target.value" type="text" />
                </mat-form-field>
              </mat-grid-tile>
            </mat-grid-list>
          </div>
          <div class="page__section margin-bottom-m no-padding-tb">
            <div class="page__section-name"></div>
            <div class="page__section-button">
              <button [disabled]="profileCunsultant == true" (click)="addDependent()"
                class="button-icon button-icon--more margin-top-mini">
                Add Dependent
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- Form: Relocation -------------------------------------------------------- -->
      <div class="page__section-form display-none" id="tab_rel">
        <!--<div class="page__section page__section--nowrap margin-top-min">
          div class="page__section page__section-inputs">
            <div class="input_central">
              <mat-form-field appearance="fill">
                <mat-label>Authorized By</mat-label>
                <mat-select matNativeControl required [(ngModel)]="edit_sr_model.authorizedByRelocation">
                  <mat-option selected disabled value="">Authorized By</mat-option>
                  <mat-option *ngFor="let item of autoriza_catalogue;" [value]="item.id">
                    {{ item.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="page__section-input padding-top-x">
              <mat-checkbox class="example-margin" [(ngModel)]="edit_sr_model.copyOnEmailRelocation">
                Copy On E-mails
              </mat-checkbox>
            </div>
            <div class="page__section-input page__section-input--10 padding-top-x">
              <mat-checkbox class="example-margin" [(ngModel)]="edit_sr_model.spocRelocation">
                SPOC
              </mat-checkbox>
            </div>
          </div
        </div>-->
        <br>
        <br>
        <div fxLayout="row" fxLayoutAlign="space-between start">
          <div style="font-size: 20px; font-weight: 900;">
            Experience Team
          </div>
          <div>
            <div>
              <div class="divIconContainer">
                <b class="dot__green_color icon-text" style="font-size: 14px;">Accepted</b>&nbsp;&nbsp;&nbsp;|
              </div>
              <div class="divIconContainer">
                <b class="dot__yellow_color icon-text" style="font-size: 14px;">Pending
                  Acceptance</b>&nbsp;&nbsp;&nbsp;|
              </div>
              <div class="divIconContainer">
                <b class="dot__red_color icon-text" style="font-size: 14px;">Rejected</b>&nbsp;&nbsp;&nbsp;
              </div>
            </div>
          </div>
        </div>
        <br>
        <br>
        <div class="page__section">
          <div class="page__title" id="services_supplier_relocation">
            Coordinators
          </div>
        </div>
        <!--Tabla para coordinadores-->
        <div class="page__section">
          <table class="mat-elevation-z8 textarea mat-table">
            <tr class="mat-header-row">
              <th class="mat-header-cell">Coordinator Type</th>
              <th class="mat-header-cell">Coordinator</th>
              <th class="mat-header-cell">Assigned</th>
              <th class="mat-header-cell">Acceptance</th>
              <th class="mat-header-cell" *ngIf="__userlog__.role.id != 2 && __userlog__.role.id != 3"></th>
            </tr>
            <tr class="mat-row" *ngFor="let datos of edit_sr_model.relocationCoordinators; let k = index">
              <td class="mat-cell">{{getTypeCoordinator(datos.coordinatorTypeId)}}</td>
              <td class="mat-cell link" (click)="view_upplier_coordinador_relocation(datos.coordinatorId)"
                [matMenuTriggerFor]="coordinador_relo">
                <span *ngIf="datos.statusId == 1" class="dot__green_color">
                  {{getNameCoordinatorRelocation(datos.coordinatorId)}}
                </span>
                <span *ngIf="datos.statusId == 2" class="dot__yellow_color">
                  {{getNameCoordinatorRelocation(datos.coordinatorId)}}
                </span>
                <span *ngIf="datos.statusId == 3" class="dot__red_color">
                  {{getNameCoordinatorRelocation(datos.coordinatorId)}}
                </span>
              </td>
              <td class="mat-cell">{{datos.assigned | date: 'dd MMM yyyy'}}</td>
              <td class="mat-cell">
                <span *ngIf="datos.statusId != 2">
                  {{datos.accepted | date: 'dd MMM yyyy'}}
                </span>
                <span *ngIf="datos.statusId == 2">
                  Pending to accept
                </span>
              </td>
              <td class="mat-cell" *ngIf="__userlog__.role.id != 2 && __userlog__.role.id != 3">
                <img *ngIf="edit_sr_model.relocationCoordinators.length > 1" src="../../../assets/icons/quit.svg" alt=""
                  (click)="deleteCoordinator(datos, 2, k)">
              </td>
            </tr>
          </table>
        </div>


        <mat-menu #coordinador_relo="matMenu" xPosition="before">
          <div class="bg"></div>
          <mat-list>
            <div mat-subheader>Relocation</div>
            <mat-divider></mat-divider>
            <mat-list-item>
              <!-- <img [src]="{{_services.url_images}}{{data_coordinator?.photo}}" matListAvatar alt=""> -->
              <img src="{{_services.url_images}}{{data_coordinator?.photo}}" matListAvatar alt="">
              <div matLine (click)="goToProfile(data_coordinator.id)" class="browser">{{data_coordinator?.coordinator}}
              </div>
              <div matLine style="font-size: 10px;">{{data_coordinator?.office}}</div>
              <div matLine style="font-size: 10px;">{{data_coordinator?.email}}</div>
              <div matLine style="font-size: 10px;">{{data_coordinator?.phoneNumber}}</div>
            </mat-list-item>
          </mat-list>
        </mat-menu>
        <br>
        <div fxLayout="row" fxLayoutAlign="end start">

          <div class="page__section-button" *ngIf="__userlog__.role.id != 2 && __userlog__.role.id != 3">
            <button [disabled]="profileCunsultant == true" class="button-icon button-icon--more margin-top-mini"
              (click)="addCoordinador()" *ngIf="can_edit_exp_t">
              Add Coordinator
            </button>
          </div>
        </div>

        <!---------------------------->

        <br>
        <br>
        <!--VISTA PARA AGREGAR NUEVO COORDINADOR-->
        <div class="page__section page__section--card margin-bottom-min page__section--nowrap position-relative"
          *ngFor="let item of new_coordinator; let i = index">
          <div class="page__section margin-top-mini page__section--justify-end">
            <button class="page__section--card-closeButton" (click)="deleteCoordinador(i)">
            </button>
          </div>
          <mat-grid-list cols="4" rowHeight="60px">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Coordinator Type</mat-label>
                <mat-select [disabled]="profileCunsultant == true" matNativeControl [(ngModel)]="item.coordinatorTypeId"
                  (selectionChange)="removeErrorLabel( $event.value, {handler: form_imm_cord, field: 'no_ctyp'} )">
                  <mat-option selected disabled value="">Coordinator Type</mat-option>
                  <mat-option *ngFor="let item of coordinatortype_catalogue;" [value]="item.id">
                    {{ item.coordinatorType }}
                  </mat-option>
                </mat-select>
                <span class="label-error" *ngIf="form_imm_cord.no_ctyp && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="2" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Coordinator</mat-label>
                <mat-select [disabled]="profileCunsultant == true" matNativeControl [(ngModel)]="item.coordinatorId"
                  (selectionChange)="removeErrorLabel( $event.value, {handler: form_imm_cord, field: 'no_coor'} )">
                  <mat-option selected disabled value="">Coordinator</mat-option>
                  <mat-option *ngFor="let item of coordinator_catalogue_rel;" [value]="item.id">
                    {{ item.coordinator }}
                  </mat-option>
                </mat-select>
                <span class="label-error" *ngIf="form_imm_cord.no_coor && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Assigned</mat-label>
                <input [disabled]="item.assigned" matInput [matDatepicker]="team_assig" [max]="getMaxDateTo(0)"
                  [(ngModel)]="item.assigned"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat0'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat0'} )" />
                <mat-datepicker-toggle matSuffix [for]="team_assig"></mat-datepicker-toggle>
                <mat-datepicker #team_assig></mat-datepicker>
                <span class="label-error" *ngIf="form_imm_cord.no_dat0 && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile>
            <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill">
                <mat-label>Accepted</mat-label>
                <input [disabled]="profileCunsultant == true" matInput [matDatepicker]="team_accep" disabled
                  [max]="getMaxDateTo(0)" [(ngModel)]="item.accepted"
                  (dateChange)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat1'} )"
                  (change)="removeErrorLabel( $event.target.value, {handler: form_imm_cord, field: 'no_dat1'} )" />
                <mat-datepicker-toggle matSuffix [for]="team_accep"></mat-datepicker-toggle>
                <mat-datepicker #team_accep></mat-datepicker>
                <span class="label-error" *ngIf="form_imm_cord.no_dat1 && show_imm_prof">
                  Field is required
                </span>
              </mat-form-field>
            </mat-grid-tile> -->
          </mat-grid-list>
          <div class="page__section margin-top-mini page__section--justify-end">
            <div class="page__section-buttong">
              <button [disabled]="profileCunsultant == true" (click)="addToEditModelRel()">Save</button>
            </div>
          </div>
        </div>

        <!------------------------------------------------ add supplier partner relocation ---------------------------------------->
        <!------------------------------------------------ add supplier partner relocation ---------------------------------------->

        <div class="page__section">
          <div class="page__title">
            Supplier Partners
          </div>
        </div>
        <div class="page__section">
          <table mat-table mat-sort [dataSource]="relocation_suppliers"
            style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

            <!-- Position Column -->
            <ng-container matColumnDef="campo_1">
              <th mat-header-cell *matHeaderCellDef class="text-center">Country</th>
              <td mat-cell *matCellDef="let element" class="text-center">{{element.supplierType}}</td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_2">
              <th mat-header-cell *matHeaderCellDef class="text-center">Supplier Company</th>
              <td mat-cell *matCellDef="let element" class="text-center">

                <span *ngIf="element.supplierCompany != null">
                  {{element.supplierCompany}}
                </span>
                <span *ngIf="element.supplierCompany == null">
                  Independent consultant
                </span>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_3">
              <th mat-header-cell *matHeaderCellDef class="text-center">Supplier</th>
              <td mat-cell *matCellDef="let element" class="text-center" [matMenuTriggerFor]="supplier"
                style="cursor: pointer;">
                <span *ngIf="element.status === 'Accepted'" class="dot__green_color"
                  (click)="view_upplier_detail(element.supplier_Detail)">
                  {{element.supplier}}
                </span>
                <span *ngIf="element.status === 'Pending Accepted'" class="dot__yellow_color"
                  (click)="view_upplier_detail(element.supplier_Detail)">
                  {{element.supplier}}
                </span>
                <span *ngIf="element.status === 'Rejected'" class="dot__green_color"
                  (click)="view_upplier_detail(element.supplier_Detail)">
                  {{element.supplier}}
                </span>
                <mat-menu #supplier="matMenu" xPosition="before">
                  <div class="bg"></div>
                  <mat-list>
                    <div mat-subheader>Relocation</div>
                    <mat-divider></mat-divider>
                    <mat-list-item *ngFor="let item of supplier_detail">
                      <img src="{{_services.url_images}}{{item.photo}}" matListAvatar alt="">
                      <div matLine (click)="goToProfile(item.id)" class="browser">{{item?.name}}</div>
                      <div matLine style="font-size: 10px;">{{item?.email}}</div>
                      <div matLine style="font-size: 10px;">{{item?.phone}}</div>
                    </mat-list-item>
                  </mat-list>
                </mat-menu>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_4">
              <th mat-header-cell *matHeaderCellDef class="text-center">Assigned</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{element.assignedDate | date: 'dd MMM yyyy'}}
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_5">
              <th mat-header-cell *matHeaderCellDef class="text-center">Acceptance</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <span *ngIf="element.acceptedDate == null">
                  Pending To accept
                </span>
                <span *ngIf="element.acceptedDate != null">
                  {{element.acceptedDate | date: 'dd MMM yyyy'}}
                </span>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_6">
              <th mat-header-cell *matHeaderCellDef class="text-center">Assigned Services</th>
              <td mat-cell *matCellDef="let element" class="text-center browser">
                <!-- <span [matMenuTriggerFor]="afterMenu" (click)="viewassigned_services(element)" *ngIf="__userlog__.role.id != 3"> -->
                <span (click)="viewassigned_services(element)" *ngIf="__userlog__.role.id != 3">
                  {{element.total}}
                </span>
                <span *ngIf="__userlog__.role.id == 3">
                  {{element.total}}
                </span>
                <!-- <mat-menu #afterMenu="matMenu" xPosition="before">
                  <div class="bg"></div>
                  <div class="assigned_services">
                    <p class="services" *ngFor="let item of assigned_services">
                      <mat-checkbox [(ngModel)]="item.assignee"
                        (change)="addordeleteservicesRelocation($event,item.id, item.idsuplier, item.service)">
                        {{item.service}} /
                        {{item.serviceNumber}}
                      </mat-checkbox>
                    </p>
                  </div>
                </mat-menu> -->
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="campo_7">
              <th mat-header-cell *matHeaderCellDef class="text-center"></th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <img src="../../../assets/icons/quit.svg" alt="" (click)="deleteSupplier(element, 2)"
                  *ngIf="can_edit_exp_t">
              </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="immigration_supplier_partners_table"></tr>
            <tr mat-row *matRowDef="let row; columns: immigration_supplier_partners_table;"></tr>
          </table>
        </div>
        <br>
        <div fxLayout="row" fxLayoutAlign="end start">

          <div class="page__section-button" *ngIf="__userlog__.role.id != 3">
            <button (click)="showRelocationSupForm()" class="button-icon button-icon--more margin-top-mini"
              *ngIf="can_edit_exp_t">
              Add Supplier
            </button>
          </div>
        </div>
        <br>
        <br>
        <div class="page__section page__section--card margin-bottom-min" *ngIf="show_relocation_form">
          <div class="page__section margin-top-mini page__section--justify-end">
            <button [disabled]="profileCunsultant == true" class="page__section--card-closeButton"
              (click)="showRelocationSupForm()">
            </button>
          </div>
          <form [formGroup]="relocation_supplier_form">

            <mat-grid-list cols="4" rowHeight="80px">

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Supplier Country</mat-label>
                  <mat-select required formControlName="Supplier_Type"
                    [(ngModel)]="relocation_supplier_data.supplierTypeId">
                    <mat-option *ngIf="homeRel > 0" [value]="edit_sr_model.assigneeInformations[0].homeCountryId"
                      (click)="__supplier__r(edit_sr_model.assigneeInformations[0].homeCountryId, edit_sr_model.assigneeInformations[0].homeCityId,2);">
                      {{homeCity}}, {{homeCountry}}
                    </mat-option>
                    <mat-option *ngIf="hostRel > 0" [value]="edit_sr_model.assigneeInformations[0].hostCountry"
                      (click)="__supplier__r(edit_sr_model.assigneeInformations[0].hostCountry, edit_sr_model.assigneeInformations[0].hostCityId,2);">
                      {{ getNameCityHost(edit_sr_model.assigneeInformations[0].hostCityId )}}, {{
                      getNameCountry(edit_sr_model.assigneeInformations[0].hostCountry )}}
                    </mat-option>

                  </mat-select>
                  <mat-error
                    *ngIf="SupplierForm.controls.Supplier_Type.touched && SupplierForm.controls.Supplier_Type.invalid">
                    <span *ngIf="SupplierForm.controls.Supplier_Type.errors.required">
                      This field is
                      mandatory.
                    </span>
                  </mat-error>
                </mat-form-field>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Supplier</mat-label>
                  <mat-select required formControlName="Supplier" [(ngModel)]="relocation_supplier_data.supplierId"
                    (selectionChange)="getCompany(1, 1); company_Relocation()">
                    <mat-option *ngFor="let type of dataCSuplierRel" [value]="type.id">{{type.name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="SupplierForm.controls.Supplier.touched && SupplierForm.controls.Supplier.invalid">
                    <span *ngIf="SupplierForm.controls.Supplier.errors.required">
                      This field is
                      mandatory.
                    </span>
                  </mat-error>
                </mat-form-field>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12 comments input_central" style="display: flex; height: 80%;">
                  <div>
                    <span class="text-mini gray_05">Supplier Company</span><br />
                    {{type_company_relocation}}
                  </div>
                </div>
              </mat-grid-tile>

              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Services to Assign</mat-label>
                  <mat-select multiple (focus)="active_service = false" required
                    [(ngModel)]="relocation_supplier_data.service" [formControl]="toppings">
                    <mat-option #allSelected (click)="toggleAllSelectionRelo()" [value]="0">Select all</mat-option>
                    <ng-container *ngFor="let item of _serviciosByConsultantRelo; let i = index">
                      <mat-option *ngIf="!item.assignee" #thisSelected
                        (click)="tosslePerOneRelo(thisSelected, item.id, item.idsuplier, item.service, i);"
                        [value]="item.id">
                        <span style="min-width: 180px;">{{item.service}} / {{item.serviceNumber}}</span>
                      </mat-option>
                    </ng-container>
                  </mat-select>
                </mat-form-field>

              </mat-grid-tile>
              <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
                <mat-form-field appearance="fill" class="input_central_half">
                  <mat-label>Assigned Date</mat-label>
                  <input matInput formControlName="Assigned_Date" required [matDatepicker]="picker"
                    [(ngModel)]="relocation_supplier_data.assignedDate" [min]="fecha_minima">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                  <mat-error
                    *ngIf="SupplierForm.controls.Assigned_Date.touched && SupplierForm.controls.Assigned_Date.invalid">
                    <span *ngIf="SupplierForm.controls.Assigned_Date.errors.required">
                      This field is
                      mandatory.
                    </span>
                  </mat-error>
                </mat-form-field>

              </mat-grid-tile> -->
            </mat-grid-list>
            <div class="page__section margin-top-mini page__section--justify-end">
              <div class="page__section-buttong">
                <button (click)="postRelocationSupplier()">Save</button>
              </div>
            </div>
          </form>
        </div>
        <div class="page__section">
          <div class="page__title">
            Relocation Services
          </div>
        </div>
        <div *ngIf="relocation_home_services?.length > 0">
          <div class="page__section">
            <span class="page__section-name">
              Home Country: {{homeCountry}}
            </span>
          </div>

          <mat-grid-list cols="4" rowHeight="80px">

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1,2)"
                    [(ngModel)]="dinamic_params_homm.status">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Status</mat-label>
                      <input matInput placeholder="Status" [(ngModel)]="filterStatusReloService.status">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_status | filterBy: filterStatusReloService" [value]="item.id">
                      {{ item.status }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_status | filterBy: filterStatusReloService).length === 0">No
                      matching
                      elements
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Delivered To</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1,2)"
                    [(ngModel)]="dinamic_params_homm.deliverTo">
                    <mat-option selected disabled value="">Delivered To</mat-option>
                    <mat-option *ngFor="let item of line_deliver" [value]="item.dependentId">
                      {{ item.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Service Type</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1,2)"
                    [(ngModel)]="dinamic_params_homm.serviceType">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Service Type</mat-label>
                      <input matInput placeholder="Service Type" [(ngModel)]="filterServiceReloServ.category">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_category | filterBy: filterServiceReloServ" [value]="item.id">
                      {{ item.category }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_category | filterBy: filterServiceReloServ).length === 0">No
                      matching
                      elements</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div style="width: 100%; display: flex;">
                <mat-form-field appearance="fill" class="input_central">
                  <mat-label>Program</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(1,2)"
                    [(ngModel)]="dinamic_params_homm.program">
                    <mat-option selected disabled value="">Program</mat-option>
                    <mat-option *ngFor="let item of line_service" [value]="item.id">
                      {{ item.service }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <button mat-icon-button color="primary" style="margin-left: -30px; margin-top: 12px;"
                  matTooltip="Clear filter" (click)="crearfilter(3)">
                  <mat-icon [ngClass]="{'refresh': filteruno}">cached</mat-icon>
                </button>
              </div>
            </mat-grid-tile>
          </mat-grid-list>

          <div class="page__section margin-bottom-m">

            <table mat-table mat-sort [dataSource]="relocation_home_services" *ngxPermissionsOnly="['1', '11', '19']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.statusService}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 1)">{{element.number_server}}
                  </span-->

                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'"
                  (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="open_standalone_modal(element, 1)">{{element.number_server}}</span> -->
                  {{element.number_server}}

                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">

                  <span class="link"
                    (click)="open_standalone_modal(element, edit_sr_model.assigneeInformations[0].homeCountryId, element.service_name)"
                    *ngIf="element.serviceType == 'Standalone'"> {{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)"
                    *ngIf="element.serviceType != 'Standalone'"> {{element.service_name}}</span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.location}}">
                    {{(element.location.length>7) ? (element.location | slice:0:7)+'..': element.location}}
                  </span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 1)">{{element.serviceType}}</span-->
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Autho Time">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Time</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span *ngIf="element.authoTime > 0">
                    {{element.authoTime}}
                  </span>
                  <span *ngIf="element.authoTime == 0">
                    -
                  </span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Time Remaining">
                <th mat-header-cell *matHeaderCellDef class="text-center">Time Remaining</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <p *ngIf="element.timeRemaining >= 5">{{element.timeRemaining}}</p>
                  <p *ngIf="element.timeRemaining < 5" style="color: red;">{{element.timeRemaining}}</p>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date: 'dd MMM yyyy'}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Acceptance</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date: 'dd MMM yyyy'}}
                </td>
              </ng-container>


              <!-- Position Column -->
              <ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container>


              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="(permission_edit || permission_write) && element.serviceType == 'Standalone'">

                    <img (click)="open_standalone_modal(element,1)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType == 'Standalone'"/>
                    <img (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType != 'Standalone'"/>
                  </div> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="home_country_table_rel"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_rel;"></tr>
            </table>

            <table mat-table mat-sort [dataSource]="relocation_home_services"
              *ngxPermissionsOnly="['2', '3', '4', '13', '14']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.status}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 1)">{{element.number_server}}
                  </span-->
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'"
                  (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="open_standalone_modal(element, 1)">{{element.number_server}}</span> -->
                  {{element.number_server}}

                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="open_standalone_modal(element, 1)"
                    *ngIf="element.serviceType == 'Standalone'"> {{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)"
                    *ngIf="element.serviceType != 'Standalone'"> {{element.service_name}}</span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.location}}">
                    {{(element.location.length>7) ? (element.location | slice:0:7)+'..': element.location}}
                  </span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 1)">{{element.serviceType}}</span-->
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Autho Time">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Time</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span *ngIf="element.authoTime > 0">
                    {{element.authoTime}}
                  </span>
                  <span *ngIf="element.authoTime == 0">
                    -
                  </span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Time Remaining">
                <th mat-header-cell *matHeaderCellDef class="text-center">Time Remaining</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <p *ngIf="element.timeRemaining >= 5">{{element.timeRemaining}}</p>
                  <p *ngIf="element.timeRemaining < 5" style="color: red;">{{element.timeRemaining}}</p>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date: 'dd MMM yyyy'}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Acceptance</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date: 'dd MMM yyyy'}}
                </td>
              </ng-container>


              <!-- Position Column -->
              <!--ng-container matColumnDef="Projected Fee" >
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container-->


              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="(permission_edit || permission_write) && element.serviceType == 'Standalone'">
                    <img (click)="open_standalone_modal(element,1)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType == 'Standalone'"/>
                    <img (click)="open_bundeld_modal(element, 1, edit_sr_model.assigneeInformations[0].homeCountryId)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType != 'Standalone'"/>
                  </div> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="home_country_table_rel_"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_rel_;"></tr>
            </table>
          </div>
        </div>

        <div *ngIf="relocation_host_services?.length > 0">
          <div class="page__section">
            <span class="page__section-name">
              Host Country: {{Host_Home_country.host_country_name}}
            </span>
          </div>


          <mat-grid-list cols="4" rowHeight="80px">

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Status</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2,2)"
                    [(ngModel)]="dinamic_params_host.status">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Status</mat-label>
                      <input matInput placeholder="Status" [(ngModel)]="filterStatusHomeCount.status">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_status | filterBy: filterStatusHomeCount" [value]="item.id">
                      {{ item.status }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_status | filterBy: filterStatusHomeCount).length === 0">No
                      matching
                      elements
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>


            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Delivered To</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2,2)"
                    [(ngModel)]="dinamic_params_host.deliverTo">
                    <mat-option selected disabled value="">Delivered To</mat-option>
                    <mat-option *ngFor="let item of line_deliver" [value]="item.dependentId">
                      {{ item.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="input_central" style="width: 100%;">
                <mat-form-field appearance="fill">
                  <mat-label>Service Type</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2,2)"
                    [(ngModel)]="dinamic_params_host.serviceType">
                    <mat-form-field appearance="outline" style="padding: 5px;">
                      <mat-label>Service Type</mat-label>
                      <input matInput placeholder="Service Type" [(ngModel)]="filterServiceHostCount.category">
                    </mat-form-field>
                    <mat-option *ngFor="let item of line_category | filterBy: filterServiceHostCount" [value]="item.id">
                      {{ item.category }}
                    </mat-option>
                    <mat-option disabled *ngIf="(line_category | filterBy: filterServiceHostCount).length === 0">No
                      matching
                      elements</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div style="width: 100%; display: flex;">
                <mat-form-field appearance="fill" class="input_central">
                  <mat-label>Program</mat-label>
                  <mat-select matNativeControl (selectionChange)="findingImmRelTables(2,2)"
                    [(ngModel)]="dinamic_params_host.program">
                    <mat-option selected disabled value="">Program</mat-option>
                    <mat-option *ngFor="let item of line_service" [value]="item.id">
                      {{ item.service }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <button mat-icon-button color="primary" style="margin-left: -30px; margin-top: 12px;"
                  matTooltip="Clear filter" (click)="crearfilter(4)">
                  <mat-icon [ngClass]="{'refresh': filterdos}">cached</mat-icon>
                </button>
              </div>
            </mat-grid-tile>
          </mat-grid-list>

          <div class="page__section margin-bottom-m">

            <table mat-table mat-sort [dataSource]="relocation_host_services" *ngxPermissionsOnly="['1', '11', '19']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.statusService}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 2)">{{element.number_server}}
                  </span-->
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'"
                    (click)="open_bundeld_modal(element, 2, edit_sr_model.assigneeInformations[0].hostCountry)">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="open_standalone_modal(element, 2)">{{element.number_server}}</span> -->
                  {{element.number_server}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="open_standalone_modal(element, 2)"
                    *ngIf="element.serviceType == 'Standalone'">{{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 2, edit_sr_model.assigneeInformations[0].hostCountry)"
                    *ngIf="element.serviceType != 'Standalone'">{{element.service_name}}</span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.location}}">
                    {{(element.location.length>7) ? (element.location | slice:0:7)+'..': element.location}}
                  </span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 2)">{{element.serviceType}}</span-->
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Autho Time">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Time</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authoTime}}
                </td>
              </ng-container>

              <ng-container matColumnDef="Time Remaining">
                <th mat-header-cell *matHeaderCellDef class="text-center">Time Remaining</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <p *ngIf="element.timeRemaining >= 5">{{element.timeRemaining}}</p>
                  <p *ngIf="element.timeRemaining < 5" style="color: red;">{{element.timeRemaining}}</p>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date:'dd MMM yyy'}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Acceptance</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date:'dd MMM yyy'}}
                </td>
              </ng-container>


              <!-- Position Column -->
              <ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container>


              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="(permission_edit || permission_write) && element.serviceType == 'Standalone'">
                    <img (click)="open_bundeld_modal(element, 2, edit_sr_model.assigneeInformations[0].hostCountry)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType != 'Standalone'"/>
                    <img (click)="open_standalone_modal(element,2)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType == 'Standalone'"/>
                  </div> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="home_country_table_rel"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_rel;"></tr>
            </table>

            <table mat-table mat-sort [dataSource]="relocation_host_services"
              *ngxPermissionsOnly="['2', '3', '4', '13', '14']"
              style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

              <!-- Position Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.status}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Work Order">
                <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service ID">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 2)">{{element.number_server}}
                  </span-->
                  <!-- <span class="link" *ngIf="element.serviceType != 'Standalone'"
                  (click)="open_bundeld_modal(element, 2, edit_sr_model.assigneeInformations[0].hostCountry)">{{element.number_server}}</span>
                  <span class="link" *ngIf="element.serviceType == 'Standalone'"
                    (click)="open_standalone_modal(element, 2)">{{element.number_server}}</span> -->
                  {{element.number_server}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Service">
                <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--{{(element.service_name.length>7) ?  (element.service_name | slice:0:7)+'..': element.service_name}}-->

                  <span class="link" (click)="open_standalone_modal(element, 2)"
                    *ngIf="element.serviceType == 'Standalone'"> {{element.service_name}}</span>
                  <span class="link"
                    (click)="open_bundeld_modal(element, 2, edit_sr_model.assigneeInformations[0].hostCountry)"
                    *ngIf="element.serviceType != 'Standalone'"> {{element.service_name}}</span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Location">
                <th mat-header-cell *matHeaderCellDef class="text-center">Location</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <span style="cursor: pointer;" matTooltip="{{element.location}}">
                    {{(element.location.length>7) ? (element.location | slice:0:7)+'..': element.location}}
                  </span>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Program">
                <th mat-header-cell *matHeaderCellDef class="text-center">Program</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!--span class="link" (click)="open_standalone_modal(element, 2)">{{element.serviceType}}</span-->
                  <span>{{element.serviceType}}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="Autho Time">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho Time</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authoTime}}
                </td>
              </ng-container>

              <ng-container matColumnDef="Time Remaining">
                <th mat-header-cell *matHeaderCellDef class="text-center">Time Remaining</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <p *ngIf="element.timeRemaining >= 5">{{element.timeRemaining}}</p>
                  <p *ngIf="element.timeRemaining < 5" style="color: red;">{{element.timeRemaining}}</p>
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Autho Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Autho</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.authodate | date:'dd MMM yyy'}}
                </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Accepted Date">
                <th mat-header-cell *matHeaderCellDef class="text-center">Acceptance</th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  {{element.acceptance | date:'dd MMM yyy'}}
                </td>
              </ng-container>


              <!-- Position Column -->
              <ng-container matColumnDef="Projected Fee">
                <th mat-header-cell *matHeaderCellDef class="text-center">Projected Fee</th>
                <td mat-cell *matCellDef="let element" class="text-center">{{element.projectedFee | currency}}</td>
              </ng-container>


              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                <td mat-cell *matCellDef="let element" class="text-center">
                  <!-- <div class="table-row__check" *ngIf="(permission_edit || permission_write) && element.serviceType == 'Standalone'">

                    <img (click)="open_bundeld_modal(element, 2, edit_sr_model.assigneeInformations[0].hostCountry)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType != 'Standalone'"/>
                    <img (click)="open_standalone_modal(element,2)" class="cursor-pointer"
                      src="../../../../assets/icons/pencil.png" *ngIf="element.serviceType == 'Standalone'"/>
                  </div> -->
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="home_country_table_rel_"></tr>
              <tr mat-row *matRowDef="let row; columns: home_country_table_rel_;"></tr>
            </table>
          </div>

        </div>

        <!--div class="page__section margin-top-m margin-bottom-min">
          <span class="page__section-name">
            Housing Specifications
          </span>
        </div-->
        <!--div class="page__section margin-bottom-m">
          <table mat-table mat-sort [dataSource]="table_housing_data"
            style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">
            <ng-container matColumnDef="c_1">
              <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.numberWorkOrder }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_2">
              <th mat-header-cell *matHeaderCellDef class="text-center">Service ID</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.numberServiceRecord }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_3">
              <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <span title="{{ element.service }}">
                  {{ element.service?.length > 14 ? (element.service | slice:0:14) + '...' : element.service }}
                </span>
              </td>
            </ng-container>
            <ng-container matColumnDef="c_4">
              <th mat-header-cell *matHeaderCellDef class="text-center">Creation Date</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.createdDate | date:'dd MMM yyy' }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_5">
              <th mat-header-cell *matHeaderCellDef class="text-center">Country</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.country }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_6">
              <th mat-header-cell *matHeaderCellDef class="text-center">City</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.city }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_7">
              <th mat-header-cell *matHeaderCellDef class="text-center">Contract Type</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.contractType }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_8">
              <th mat-header-cell *matHeaderCellDef class="text-center">Budget</th>
              <td mat-cell *matCellDef="let element" class="text-center">
                {{ element.budget | currency }}
              </td>
            </ng-container>
            <ng-container matColumnDef="c_9">
              <th mat-header-cell *matHeaderCellDef class="text-center"></th>
              <td mat-cell *matCellDef="let element" class="text-center">
                <div class="table-row__check">
                  <img (click)="showHSDialogFromHSTable( element)" src="../../../assets/icons/pencil.png"
                    class="cursor-pointer" *ngIf="permission_edit || permission_write" />
                </div>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="table_housing_cols"></tr>
            <tr mat-row *matRowDef="let row; columns: table_housing_cols;"></tr>
          </table>
        </div-->
      </div>
      <!-- Form: Communication -------------------------------------------------------- -->
      <div action="" class="page__section-form display-none" id="tab_com">
        <div class="page__section" style="flex-direction: column;">
          <div class="page__title">
            Community Chat
          </div>
          <div style="text-align: center;">
            <!-- <p>Coming soon</p> -->
            <app-chat-assignament></app-chat-assignament>
          </div>
          <!-- fin chat -->


          <div class="page__section margin-bottom-mini" style="display:none">
            <div class="page__section-data">
              <span class="page__title">Maps</span>
            </div>
            <div class="page__section-button display-none">
              <button class="button-icon button-icon--adder page__section-button--lineButtons"
                (click)="openCountryDialog()">
                Country
              </button>
            </div>
          </div>

          <div class="page__section margin-bottom-m" style="display:none">
            <div class="page__section page__section--no-padding">
              <div class="page__section no-padding">
                <div class="page__section-tabs">
                  <div class="page__section-tab map-tab" (click)="
                      showMapsTabSelected('map_imm', $event.target);
                      requestMapitsData(1)">
                    Immigration
                  </div>
                  <div class="page__section-tab map-tab page__section-tab--active" (click)="
                      showMapsTabSelected('map_rel', $event.target);
                      requestMapitsData(2)">
                    Relocation
                  </div>
                </div>
              </div>
              <div class="page__section map_window" id="map_rel">
                <div class="page__section">
                  <table mat-table mat-sort [dataSource]="mapit_table_data"
                    style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_0">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Supplier</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{ element.supplier }}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <!--ng-container matColumnDef="cam_1">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Passenger</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{ element.supplier }}
                      </td>
                    </ng-container-->
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_2">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Service Line</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.service_line}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_3">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Start</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.startDate | date:'dd/MMM/yyy'}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_4">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Completed</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.completed_date | date:'dd/MMM/yyy'}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_5">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Visit Places</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.visit_places}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <!--ng-container matColumnDef="cam_6">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Comments</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{ element.comments.length < 8 ? element.comments : element.comments + '...' | slice:0:10 }}
                      </td>
                    </ng-container-->
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_7">
                      <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        <span (click)="communicationAddMapit( element )" *ngIf="permission_edit || permission_write"
                          class="font-purple-dark cursor-pointer">
                          View
                        </span>
                      </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="calls_colums"></tr>
                    <tr mat-row *matRowDef="let row; columns: calls_colums;"></tr>
                  </table>
                </div>
                <div class="page__section margin-top-min">
                  <div class="page__section-name no-padding"></div>
                  <div class="page__section-button">
                    <button class="button-icon button-icon--adder" *ngIf="permission_edit || permission_write"
                      (click)="communicationAddMapit()">
                      Add Map
                    </button>
                  </div>
                </div>
                <div class="page__section text-center paginator">
                  <mat-paginator #pagMaps [pageSizeOptions]="[5, 10]" showFirstLastButtons></mat-paginator>
                </div>
              </div>
              <div class="page__section display-none map_window" id="map_imm">
                <div class="page__section">
                  <table mat-table mat-sort [dataSource]="mapit_table_data"
                    style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_0">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Supplier</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{ element.supplier }}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <!--ng-container matColumnDef="cam_1">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Passenger</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{ element.supplier }}
                      </td>
                    </ng-container-->
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_2">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Service Line</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.service_line}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_3">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Start</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.startDate | date:'dd/MMM/yyy'}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_4">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Completed</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.completed_date | date:'dd/MMM/yyy'}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_5">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Visit Places</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.visit_places}}
                      </td>
                    </ng-container>
                    <!-- Position Column -->
                    <!--ng-container matColumnDef="cam_6">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Comments</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{ element.comments.length < 8 ? element.comments : element.comments | slice:0:10 }}
                      </td>
                    </ng-container-->
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_7">
                      <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        <span (click)="communicationAddMapit( element )" *ngIf="permission_edit || permission_write"
                          class="font-purple-dark cursor-pointer">
                          View
                        </span>
                      </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="calls_colums"></tr>
                    <tr mat-row *matRowDef="let row; columns: calls_colums;"></tr>
                  </table>
                </div>
                <div class="page__section margin-top-min">
                  <div class="page__section-name no-padding"></div>
                  <div class="page__section-button">
                    <button class="button-icon button-icon--adder" *ngIf="permission_edit || permission_write"
                      (click)="communicationAddMapit()">
                      Add Map
                    </button>
                  </div>
                </div>
                <div class="page__section text-center paginator">
                  <mat-paginator #pagMaps [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                  </mat-paginator>
                </div>
              </div>
            </div>
          </div>
          <!--Calll-->
          <div style="display:none">
            <div class="page__title">
              Calls
            </div>
            <div class="page__section margin-bottom-m">
              <div class="page__section page__section--no-padding">
                <div class="page__section no-padding">
                  <!-- user consultor immi y todos   -->
                  <div class="page__section-tabs">
                    <div id="immiCall1" class="page__section-tab call-tab page__section-tab--active"
                      [ngClass]="{'page__section-tab--active': isImmi == true}"
                      (click)="showCallsTabSelected('calls_imm', $event.target); initCallsBehavior(1);">
                      Immigration
                    </div>
                    <div id="relCall1" class="page__section-tab call-tab"
                      [ngClass]="{'page__section-tab--active': isRel == true}"
                      (click)="showCallsTabSelected('calls_rel', $event.target); initCallsBehavior(2);">
                      Relocation
                    </div>
                  </div>
                  <!-- user consultor immi y todos   -->
                  <!--div *ngIf="typeUser == 2" class="page__section-tabs">
                    <div id="immiCall2" class="page__section-tab call-tab "
                      (click)="showCallsTabSelected('calls_imm', $event.target); initCallsBehavior(1);">
                      Immigration
                    </div>
                    <div id="relCall2" class="page__section-tab call-tab page__section-tab--active"
                    (click)="showCallsTabSelected('calls_rel', $event.target); initCallsBehavior(2);">
                      Relocation
                    </div>
                  </div-->

                </div>
                <div class="page__section call_window" id="calls_imm">
                  <div class="page__section">
                    <table mat-table mat-sort [dataSource]="calls_in_list_imm" #immiCallssort='matSort' matSort
                      style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                      <!-- Position Column -->
                      <!--ng-container matColumnDef="cam_0">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service Line</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.serviceLine }}
                        </td>
                      </ng-container-->

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_1">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="workOrder">Work Order
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{element.workOrder}}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_2">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="serviceRecordId">
                          Service ID</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{element.serviceRecordId}}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_3">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="service">Service</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.service }}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_4">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="caller">Caller</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.caller }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_5">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="calle">Callee</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{element.calle}}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_6">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="date">Date</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.date ) | date:'dd MMM yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_7">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="time">Time</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.time }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_8">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="duration">Duration
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.duration }}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_9">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="escalate">Escalation
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <div class="table-row__check">
                            <img src="assets/table-icons/check.png" *ngIf="element.escalate" />
                            <img src="assets/table-icons/uncheck.png" *ngIf="!element.escalate" />
                          </div>
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_10">
                        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <div class="table-row__check">
                            <img class="cursor-pointer" src="../../../../assets/icons/pencil.png"
                              (click)="editCall(element)" *ngIf="permission_edit || permission_write" />
                          </div>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="calls_columsedit"></tr>
                      <tr mat-row *matRowDef="let row; columns: calls_columsedit;"
                        [class.table-field-special]="row.welcomeCall"></tr>
                    </table>
                  </div>
                  <div class="page__section margin-top-mini">
                    <div class="page__section-name no-padding">
                      <span class="page__section-lblRed">Welcome Call</span>
                    </div>
                    <div class="page__section-button">
                      <button class="button-icon button-icon--adder" [disabled]="profileCunsultant == true"
                        (click)="communicationAddCall(1)">
                        Add Call
                      </button>
                    </div>
                  </div>
                  <div class="page__section text-center paginator margin-top-mini">
                    <mat-paginator #call [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                </div>
                <div class="page__section display-none call_window" id="calls_rel">
                  <div class="page__section">
                    <table mat-table mat-sort [dataSource]="calls_in_list_rel" #reloCAllssort='matSort' matSort
                      style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                      <!-- Position Column -->
                      <!--ng-container matColumnDef="cam_0">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service Line</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.serviceLine }}
                        </td>
                      </ng-container-->

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_1">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="workOrder">Work Order
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{element.workOrder}}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_2">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="serviceRecordId">
                          Service ID</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{element.serviceRecordId}}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_3">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="service">Service</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.service }}
                        </td>
                      </ng-container>

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_4">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="caller">Caller</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.caller }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_5">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="calle">Callee</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{element.calle}}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_6">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="date">Date</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.date ) | date:'dd MMM yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_7">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="time">Time</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.time }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_8">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="duration">Duration
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.duration }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_9">
                        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="escalate">Escalation
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <div class="table-row__check">
                            <img src="assets/table-icons/check.png" *ngIf="element.escalate" />
                            <img src="assets/table-icons/uncheck.png" *ngIf="!element.escalate" />
                          </div>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_10">
                        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <div class="table-row__check">
                            <img class="cursor-pointer" src="../../../../assets/icons/pencil.png"
                              (click)="editCall( element )" *ngIf="permission_edit || permission_write" />
                          </div>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="calls_columsedit"></tr>
                      <tr mat-row *matRowDef="let row; columns: calls_columsedit;"
                        [class.table-field-special]="row.welcomeCall"></tr>
                    </table>
                  </div>
                  <div class="page__section margin-top-mini">
                    <div class="page__section-name no-padding">
                      <span class="page__section-lblRed">Welcome Call</span>
                    </div>
                    <div class="page__section-button">
                      <button class="button-icon button-icon--adder" [disabled]="profileCunsultant == true"
                        (click)="communicationAddCall(2)">
                        Add Call
                      </button>
                    </div>
                  </div>
                  <div class="page__section text-center paginator margin-top-mini">
                    <mat-paginator #callrelo [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <br>
          <div class="page__title">
            E-mails
          </div>
          <div class="page__section margin-bottom-m">
            <div class="page__section page__section--no-padding">
              <div class="page__section no-padding">
                <!-- <div class="page__section-tabs">
                  <div *ngIf="(__userlog__.role.id == 3) && (__userlog__.profileUsers[0].supplierType == 3)" class="page__section-tab email-tab"
                    (click)="showEmailsTabSelected('email_imm', $event.target); initEmailsBehavior(2)">
                    Immigration
                  </div>
                  <div *ngIf="(__userlog__.role.id == 3) && (__userlog__.profileUsers[0].supplierType == 1)" class="page__section-tab email-tab page__section-tab--active"
                    (click)="showEmailsTabSelected('email_rel', $event.target); initEmailsBehavior(1)">
                    Relocation
                  </div>
                </div> -->
              </div>
            </div>
            <div class="page__section email_window" id="email_rel">
              <div class="page__section">
                <table mat-table mat-sort [dataSource]="email_relocation"
                  style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">
                  <ng-container matColumnDef="cam_0">
                    <th mat-header-cell *matHeaderCellDef class="text-center">E-Mail</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                      {{ element.email }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="cam_3">
                    <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                      <span class="font-purple-dark cursor-pointer" (click)="postEmail(1, element)">
                        Send
                      </span>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="emails_table_cols"></tr>
                  <tr mat-row *matRowDef="let row; columns: emails_table_cols;"></tr>
                </table>
              </div>
            </div>
            <!-- <div class="page__section display-none email_window" id="email_imm">
              <div class="page__section">
                <table mat-table mat-sort [dataSource]="email_immigration"
                  style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">


                  <ng-container matColumnDef="cam_0">
                    <th mat-header-cell *matHeaderCellDef class="text-center">E-Mail</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                     fh
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="cam_1">
                    <th mat-header-cell *matHeaderCellDef class="text-center">Date</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                      {{ element.creationDate | date:'dd MMM yyy' }}
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="cam_2">
                    <th mat-header-cell *matHeaderCellDef class="text-center">Completed</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                      <div class="table-row__check">
                        <img id="ckeck" src="assets/table-icons/check.png" *ngIf="element.completed == true" />
                        <img id="uncheck" src="assets/table-icons/uncheck.png" *ngIf="element.completed == false" />
                      </div>
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="cam_3">
                    <th mat-header-cell *matHeaderCellDef class="text-center">Callee</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                      <span class="font-purple-dark cursor-pointer" (click)="postEmail(2, element)">
                        Send
                      </span>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="emails_table_cols"></tr>
                  <tr mat-row *matRowDef="let row; columns: emails_table_cols;"></tr>
                </table>
              </div>
            </div> -->
          </div>
          <!--Action Items-->
          <div style="display: none;">
            <div class="page__title">
              Action Items
            </div>
            <div class="page__section margin-bottom-m">
              <div class="page__section page__section--no-padding">
                <div class="page__section no-padding">
                  <!-- user consultores tupo imm o los demas -->
                  <div class="page__section-tabs">
                    <div id="immiconsultor1" class="page__section-tab task-tab"
                      [ngClass]="{'page__section-tab--active': isImmi == true}" (click)="
                        showTaskTabSelected('task_imm', $event.target);
                        initTasksBehavior(1)">
                      Immigration
                    </div>
                    <div id="reliconsultor1" class="page__section-tab task-tab "
                      [ngClass]="{'page__section-tab--active': isRel == true}" (click)="
                        showTaskTabSelected('task_rel', $event.target);
                        initTasksBehavior(2)">
                      Relocation
                    </div>
                  </div>
                  <!-- user consultores tupo relo -->
                  <!--div *ngIf="typeUser == 2" class="page__section-tabs">
                    <div id="immiconsultor2" class="page__section-tab task-tab" (click)="
                        showTaskTabSelected('task_imm', $event.target);
                        initTasksBehavior(1)">
                      Immigration
                    </div>
                    <div id="relconsultor2" class="page__section-tab task-tab page__section-tab--active "

                    (click)="
                        showTaskTabSelected('task_rel', $event.target);
                        initTasksBehavior(2)">
                      Relocation
                    </div>
                  </div-->
                </div>
              </div>
              <div class="page__section display-none task_window" id="task_rel">
                <div class="page__section">
                  <div class="page__section">
                    <table mat-table mat-sort [dataSource]="task_rel_table"
                      style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_0">
                        <th mat-header-cell *matHeaderCellDef class="text-center">From</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span title="{{ element.taskFrom }}">
                            {{ (element.taskFrom?.length > 8) ? ( element.taskFrom | slice:0:10 ) + '...' :
                            element.taskFrom }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_1">
                        <th mat-header-cell *matHeaderCellDef class="text-center">To</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span title="{{ element.taskTo }}">
                            {{ (element.taskTo?.length > 8) ? ( element.taskTo | slice:0:10 ) + '...' : element.taskTo
                            }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_2">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Title</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span title="{{ element.taskDescription }}">
                            {{ ( element.taskDescription?.length > 15 ) ? ( element.taskDescription | slice:0:15 ) +
                            '...' : element.taskDescription }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_3">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.status }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_4">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Assigned</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.assignedDate ) | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_5">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Due Date</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.dueDate ) | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_6">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Completed</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.completedDate ) | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_7">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span class="font-purple-dark">
                            {{ element.service }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_8">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Documents</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.document.length }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_9">
                        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span class="font-purple-dark cursor-pointer" *ngIf="permission_edit || permission_write"
                            (click)="getSelectedTaskData( element.id, 1 )">
                            View
                          </span>
                        </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="task_table_cols"></tr>
                      <tr mat-row *matRowDef="let row; columns: task_table_cols;"
                        [class.table-field-special]="row.overdueTask"></tr>
                    </table>
                  </div>
                  <!-- add action item -->
                  <div class="page__section margin-top-mini">
                    <div class="page__section-name no-padding">
                      <span class="page__section-lblRed">Overdue Task</span>
                    </div>
                    <div class="page__section-button">
                      <button [disabled]="profileCunsultant == true" class="button-icon button-icon--adder"
                        (click)="communicationAddTask(2)">
                        Assign Item
                      </button>
                    </div>
                  </div>
                  <!-- paginador action item -->
                  <div class="page__section text-center paginator margin-top-mini">
                    <mat-paginator #taskRelpag [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                </div>
              </div>
              <div class="page__section  task_window" id="task_imm">
                <div class="page__section">
                  <div class="page__section">
                    <table mat-table mat-sort [dataSource]="task_imm_table"
                      style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_0">
                        <th mat-header-cell *matHeaderCellDef class="text-center">From</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span title="{{ element.taskFrom }}">
                            {{ (element.taskFrom?.length > 8) ? ( element.taskFrom | slice:0:8 ) + '...' :
                            element.taskFrom }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_1">
                        <th mat-header-cell *matHeaderCellDef class="text-center">To</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span title="{{ element.taskTo }}">
                            {{ (element.taskTo?.length > 8) ? ( element.taskTo | slice:0:8 ) + '...' : element.taskTo }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_2">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Title</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span title="{{ element.taskDescription }}">
                            {{ ( element.taskDescription?.length > 15 ) ? ( element.taskDescription | slice:0:15 ) +
                            '...' : element.taskDescription }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_3">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.status }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_4">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Assigned</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.assignedDate ) | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_5">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Due Date</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.dueDate ) | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_6">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Completed</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ splitTimeInDate( element.completedDate ) | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_7">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span class="font-purple-dark">
                            {{ element.service }}
                          </span>
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_8">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Documents</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.document.length }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_9">
                        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span class="font-purple-dark cursor-pointer" *ngIf="permission_edit || permission_write"
                            (click)="getSelectedTaskData( element.id, 2 )">
                            View
                          </span>
                        </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="task_table_cols"></tr>
                      <tr mat-row *matRowDef="let row; columns: task_table_cols;"
                        [class.table-field-special]="row.overdueTask"></tr>
                    </table>
                  </div>
                  <!-- agregar action item -->
                  <div class="page__section margin-top-mini">
                    <div class="page__section-name no-padding">
                      <span class="page__section-lblRed">Overdue Task</span>
                    </div>
                    <div class="page__section-button">
                      <button [disabled]="profileCunsultant == true" class="button-icon button-icon--adder"
                        (click)="communicationAddTask(1)">
                        Assign Item
                      </button>
                    </div>
                  </div>
                  <!-- paginador immi -->
                  <div class="page__section text-center paginator margin-top-mini">
                    <mat-paginator #taskImmpag [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="page__title" style="display: none;">
            Escalations
          </div>
          <div class="page__section margin-bottom-m" style="display: none;">
            <div class="page__section page__section--no-padding">
              <div class="page__section no-padding">
                <div class="page__section-tabs">
                  <div class="page__section-tab escalation-tab" (click)="
                      showEscalationsTabSelected('escalation_imm', $event.target);
                      requestEscalations(1)">
                    Immigration
                  </div>
                  <div class="page__section-tab escalation-tab page__section-tab--active" (click)="
                      showEscalationsTabSelected('escalation_rel', $event.target);
                      requestEscalations(2)">
                    Relocation
                  </div>
                </div>
              </div>
              <div class="page__section escalation_window" id="escalation_rel">
                <div class="page__section">
                  <div class="page__section">
                    <table mat-table mat-sort [dataSource]="escalation_table_data"
                      style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_0">
                        <th mat-header-cell *matHeaderCellDef class="text-center">From</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.userFrom }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_1">
                        <th mat-header-cell *matHeaderCellDef class="text-center">To</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.to }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_2">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Escalation<br />Level</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.value }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_3">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service Line</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.serviceLine }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_4">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.numberWorkOrder }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_5">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.service_name }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_6">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.status }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_7">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Escalation</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.escalation | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_8">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Closed</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.closedDate | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_9">
                        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span (click)="communicationViewEscalation( element )"
                            class="cursor-pointer font-purple-dark">
                            View
                          </span>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="esca_table_cols"></tr>
                      <tr mat-row *matRowDef="let row; columns: esca_table_cols;"></tr>
                    </table>
                  </div>
                  <div class="page__section text-center paginator margin-top-mini">
                    <mat-paginator #_escalation_ [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                </div>
              </div>
              <div class="page__section display-none escalation_window" id="escalation_imm">
                <div class="page__section">
                  <div class="page__section">
                    <table mat-table mat-sort [dataSource]="escalation_table_data"
                      style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_0">
                        <th mat-header-cell *matHeaderCellDef class="text-center">From</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.userFrom }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_1">
                        <th mat-header-cell *matHeaderCellDef class="text-center">To</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.to }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_2">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Escalation<br />Level</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.value }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_3">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service Line</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.serviceLine }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_4">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Work Order</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.numberWorkOrder }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_5">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Service</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.service_name }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_6">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Status</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.status }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_7">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Escalation</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.escalation | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_8">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Closed</th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          {{ element.closedDate | date:'dd/MMM/yyy' }}
                        </td>
                      </ng-container>
                      <!-- Position Column -->
                      <ng-container matColumnDef="cam_9">
                        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                        <td mat-cell *matCellDef="let element" class="text-center">
                          <span (click)="communicationViewEscalation( element )"
                            class="cursor-pointer font-purple-dark">
                            View
                          </span>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="esca_table_cols"></tr>
                      <tr mat-row *matRowDef="let row; columns: esca_table_cols;"></tr>
                    </table>
                  </div>
                  <div class="page__section text-center paginator margin-top-mini">
                    <mat-paginator #_escalation_ [pageSizeOptions]="[5, 10]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="page__title" style="display: none;">
            Assignee Feedback
            <div class="page__section-button">
              <button class="button-icon button-icon--follow page__section-button--lineButtons">
                Export
              </button>
            </div>
          </div>
          <div class="page__section margin-tb-mini" style="display: none;">
            <div class="page__section page__section--card page__section--card--cuadra margin-tb-mini"
              *ngFor="let feedback of feedback_items, index as index">
              <div class="page__section page__section-inputs">
                <div class="page__section-input page__section-input--3">
                  <div class="page__section-data">
                    <span class="text-mini gray_05">Status</span><br />
                    <img src="../../../assets/icons/PurpleStar.svg"
                      class="margin-top-minimi margin-right-mini page__section-data--star"
                      *ngFor="let star of getFeedbackstarts( feedback.rating )" />
                    <img src="../../../assets/icons/PurpleStar.svg"
                      class="margin-top-minimi margin-right-mini page__section-data--star filter-gray"
                      *ngFor="let star of getFeedbackstartsGrays( feedback.rating )" />
                  </div>
                </div>
                <div class="page__section-input page__section-input--2">
                  <div class="page__section-data">
                    <span class="text-mini gray_05">Status</span><br />
                    <span class="font-purple-dark">{{ feedback.service }}</span>
                  </div>
                </div>
                <div class="page__section-input page__section-input--x page__section-input--no-padding">
                  <p class="font-12">Feedback</p>
                  <div class="comment">
                    {{ feedback.feedback }}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="page__section margin-bottom-m cusomPaginator__container" style="display: none;">
            <div class="cusomPaginator">
              <div class="cusomPaginator__wrapper" feedback-paginator>
                <span class="cusomPaginator__preview no-visible" preview>
                </span> <span class="cusomPaginator__number cusomPaginator__number--active" number
                  (click)="feedbackPaginator()">1
                </span>
                <span class="cusomPaginator__number" number (click)="feedbackPaginator()">2</span>
                <span class="cusomPaginator__number" number (click)="feedbackPaginator()">3</span>
                <span class="cusomPaginator__number" number (click)="feedbackPaginator()">4</span>
                <span class="cusomPaginator__next" previous> > </span>
              </div>
            </div>
          </div>
          <div style="display: none;">
            <div class="page__title margin-bottom-min">
              Comments History
              <div class="page__section-button">
                <button class="button-icon button-icon--follow page__section-button--lineButtons"
                  *ngIf="__userlog__.role.id != 3">
                  Export
                </button>
              </div>
            </div>
            <div class="page__section">
              <div class="page__section">
                <div class="page__section">
                  <table mat-table mat-sort [dataSource]="dataSource" matSort
                    style="flex: 1 0 100%; box-shadow: 0 0 2px 2px rgba(0,0,0,.1);">

                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_0">
                      <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="numberWorkOrder">Work
                        Order</th>
                      <td mat-cell *matCellDef="let element" class="text-center">{{element.numberWorkOrder}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_1">
                      <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="serviceLine">Service
                      </th>
                      <td mat-cell *matCellDef="let element" class="text-center">{{element.serviceLine}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_2">
                      <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="serviceNumber">Service
                        ID
                      </th>
                      <td mat-cell *matCellDef="let element" class="text-center">{{element.serviceNumber}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_3">
                      <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="createdDate">Date</th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.createdDate | date:'dd MMM yyy'}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_4">
                      <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="name">Name</th>
                      <td mat-cell *matCellDef="let element" class="text-center">{{element.name}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_5">
                      <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="reply">Replys</th>
                      <td mat-cell *matCellDef="let element" class="text-center">{{element.reply}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_6">
                      <th mat-header-cell *matHeaderCellDef class="text-center">Escalation</th>
                      <td mat-cell *matCellDef="let element" class="text-center">{{element.name}}</td>
                    </ng-container>
                    <!-- Position Column -->
                    <ng-container matColumnDef="cam_7">
                      <th mat-header-cell *matHeaderCellDef class="text-center"></th>
                      <td mat-cell *matCellDef="let element" class="text-center">
                        <b class="browser" (click)="viewHistory(element)">
                          View
                        </b>
                      </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="comhis_part_table"></tr>
                    <tr mat-row *matRowDef="let row; columns: comhis_part_table;"></tr>
                  </table>
                </div>
                <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;">
                  <mat-paginator #CommentHistory [pageSizeOptions]="[5, 10]" showFirstLastButtons></mat-paginator>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!------------------------------------------------------------------------------------------------------------->
      <!------------------------------------------------------------------------------------------------------------->
      <!--REPORTS-->
      <div class="page__section-form display-none" id="tab_rep">
        <div class="page__title">
          Activity Reports
        </div>

        <mat-grid-list cols="5" rowHeight="50px">
          <!--
          <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="__userlog__.role.id != 3">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Service Line</mat-label>
                <mat-select matNativeControl [(ngModel)]="data_directory.serviceLine"
                  (ngModelChange)="searchDataReport()">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Service Line</mat-label>
                    <input matInput placeholder="Service Line" [(ngModel)]="typeLine.serviceLine">
                  </mat-form-field>
                  <mat-option *ngFor="let data of service | filterBy: typeLine" [value]="data.id">{{data.serviceLine}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-grid-tile> -->

          <!-- <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Program</mat-label>
                <mat-select matNativeControl [(ngModel)]="data_directory.program" (ngModelChange)="searchDataReport()">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Program</mat-label>
                    <input matInput placeholder="Program" [(ngModel)]="typeProgram.service">
                  </mat-form-field>
                  <mat-option *ngFor="let item of line_service | filterBy: typeProgram" [value]="item.id">
                    {{ item.service }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-grid-tile> -->

          <mat-grid-tile [colspan]="2" [rowspan]="1"></mat-grid-tile>
          <mat-grid-tile [colspan]="1" [rowspan]="1"></mat-grid-tile>
          <mat-grid-tile [colspan]="1" [rowspan]="1"></mat-grid-tile>

          <mat-grid-tile [colspan]="2" [rowspan]="1">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [rangePicker]="rep_fil_date_one">
                  <input matStartDate [(ngModel)]="data_directory.initialReportDate" placeholder="Start date">
                  <input matEndDate [(ngModel)]="data_directory.finalReportDate" (dateChange)="searchDataReport();"
                    placeholder="End date">
                </mat-date-range-input>
                <mat-datepicker-toggle matSuffix [for]="rep_fil_date_one"></mat-datepicker-toggle>
                <mat-date-range-picker #rep_fil_date_one></mat-date-range-picker>
              </mat-form-field>
            </div>
          </mat-grid-tile>
          <!--
          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Initial Report Date</mat-label>
                <input matInput [matDatepicker]="rep_fil_date_one" [(ngModel)]="data_directory.initialReportDate"
                  (ngModelChange)="searchDataReport();" />
                <mat-datepicker-toggle matSuffix [for]="rep_fil_date_one"></mat-datepicker-toggle>
                <mat-datepicker #rep_fil_date_one></mat-datepicker>
              </mat-form-field>
            </div>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Final Report Date</mat-label>
                <input matInput [matDatepicker]="rep_fil_date_two" [(ngModel)]="data_directory.finalReportDate"
                  (ngModelChange)="searchDataReport();" />
                <mat-datepicker-toggle matSuffix [for]="rep_fil_date_two"></mat-datepicker-toggle>
                <mat-datepicker #rep_fil_date_two></mat-datepicker>
              </mat-form-field>
            </div>
          </mat-grid-tile> -->

          <!-- <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="data_directory.serviceLine == 2">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Total Time Authorized</mat-label>
                <input matInput placeholder="Total Time Authorized" type="number" min='0'
                  [(ngModel)]="data_directory.totalTimeAuthorized" />
              </mat-form-field>
            </div>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1" *ngIf="data_directory.serviceLine == 2">
            <div class="input_central cdiv">
              <mat-form-field appearance="fill">
                <mat-label>Time Remaining</mat-label>
                <input matInput placeholder="Time Remaining" type="number" min='0'
                  [(ngModel)]="data_directory.timeRemaining" />
              </mat-form-field>
            </div>
          </mat-grid-tile> -->


          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="page__section-butuon" style=" width: 70%; height: 100%; text-align: center;">
              <button mat-icon-button color="primary" style="margin-right: 0px; margin-top: 1px;"
                matTooltip="Clear filter" (click)="getReport()">
                <mat-icon [ngClass]="{'refresh': filteruno}">cached</mat-icon>
              </button>
            </div>
          </mat-grid-tile>


        </mat-grid-list>
        <div class="page__section margin-bottom-min">
          <div class="page__section-data"></div>

          <div class="page__section-button page__section-button--biggerx" (click)="viewReportHistory()">
            <button class="button-icon button-icon--report page__section-button--lineButtons--bigger">
              View All Reports
            </button>
          </div>

          <div class="page__section-button page__section-button--biggerx">
            <button class="button-icon button-icon--more page__section-button--lineButtons--bigger"
              (click)="addActivityReport()">
              Add Activity Report
            </button>
          </div>
          <!-- *ngIf="permission_edit || permission_write" -->

          <div class="page__section-button page__section-button--biggerx"
            *ngIf="__userlog__.role.id == 3 || __userlog__.role.id == 19">
            <button class="button-icon button-icon--time page__section-button--lineButtons--bigger"
              (click)="addRequestAddicionalTime()">
              Request Additional Time
            </button>
          </div>

          <!-- <div class="page__section-button" *ngIf="__userlog__.role.id != 3">
            <button (click)="downloadActivityReportXls()"class="button-icon button-icon--export">
              Export
            </button>
          </div> -->
        </div>

        <div class="page__section" id="exportReport">
          <table mat-table [dataSource]="dataSourceReport" class="mat-elevation-z8 textarea">
            <!-- Position Column -->
            <ng-container matColumnDef="Date">
              <th mat-header-cell *matHeaderCellDef>Date</th>
              <td mat-cell *matCellDef="let element">
                <span *ngIf="element.reportDate < element.creationDate" style="color: red;">
                  {{element.reportDate | date:'dd MMM yyy'}}
                </span>
                <span *ngIf="element.reportDate == element.creationDate">
                  {{element.reportDate | date:'dd MMM yyy'}}
                </span>
                <span *ngIf="element.reportDate > element.creationDate">
                  {{element.reportDate | date:'dd MMM yyy'}}
                </span>
              </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="Service Line">
              <th mat-header-cell *matHeaderCellDef>Service Line</th>
              <td mat-cell *matCellDef="let element"> {{element.serviceLine}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="Work Order">
              <th mat-header-cell *matHeaderCellDef> Work Order </th>
              <td mat-cell *matCellDef="let element"> {{element.numberWorkOrder}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="Services">
              <th mat-header-cell *matHeaderCellDef> Services </th>
              <td mat-cell *matCellDef="let element">
                <b>
                  <span *ngIf="element.services.length == 1">
                    {{element.services[0].service}}
                  </span>
                  <span class="browser" *ngIf="element.services.length > 1" [matMenuTriggerFor]="reportService"
                    (click)="GetServicesByReport(element)">
                    {{element.services.length}}
                  </span>
                </b>
              </td>
            </ng-container>

            <ng-container matColumnDef="type">
              <th mat-header-cell *matHeaderCellDef> Program </th>
              <td mat-cell *matCellDef="let element">
                <span *ngIf="element.services.length == 1">
                  {{element.services[0].tipo}}
                  <!-- <span *ngFor="let itemrow of element.services[0].tipo">
                    {{element.services[0].tipo}}
                  </span>                   -->
                </span>
                <span *ngIf="element.services.length > 1">
                  Bundled
                </span>
              </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="Report By">
              <th mat-header-cell *matHeaderCellDef> Report By </th>
              <td mat-cell *matCellDef="let element"> {{element.reprortedBy}}</td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="Time Used">
              <th mat-header-cell *matHeaderCellDef> Time Used </th>
              <td mat-cell *matCellDef="let element">
                <span>
                  {{element.totalTime}}
                </span>
              </td>
            </ng-container>
            <ng-container matColumnDef="Actions">
              <th mat-header-cell *matHeaderCellDef> </th>
              <td mat-cell *matCellDef="let element" (click)="detailsReport(element);"><b class="browser"
                  style="font-size: 12px;">View</b></td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsReport"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsReport;"
              [ngClass]="{'urgent': row.reportDate < row.creationDate}"></tr>
          </table>

          <div class="page__section margin-top-mini">
            <div>
              <div class="divIconContainer">
                <mat-icon matListIcon class="dot__late_color spanicon">lens</mat-icon>
                <span class="icon-text">Late Submission</span>
              </div>
              <div class="divIconContainer">
                <mat-icon matListIcon class="dot__pending_color spanicon">lens</mat-icon>
                <span class="icon-text">Pending Completion</span>
              </div>
            </div>
          </div>

          <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;">
            <mat-paginator #ActivityReports [pageSizeOptions]="[5,10]" showFirstLastButtons>
            </mat-paginator>
          </div>
        </div>

        <mat-menu #reportService="matMenu" yPosition="above">
          <div class="bg"></div>
          <div class="assigned_services">
            <div class="data browser">
              <mat-list>
                <div mat-subheader>Services</div>
                <mat-divider></mat-divider>
                <mat-list-item *ngFor="let item of reportServices">
                  <div mat-line><b>{{item.service}}</b></div>
                  <div mat-line style="font-size: 10px;">Time remaining: {{item.timeReminder}}</div>
                </mat-list-item>
              </mat-list>
            </div>
          </div>
        </mat-menu>

        <div style="display:none;">
          <div class="page__section margin-top-min">
            <span class="page__section-name">
              Supplier Partners Record
            </span>
          </div>

          <mat-grid-list cols="4" rowHeight="100px">

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central">
                <mat-label>Supplier Type</mat-label>
                <mat-select [formControl]="toppings" [(ngModel)]="ST" (ngModelChange)="getSupplier()">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Supplier Type</mat-label>
                    <input matInput placeholder="Name" [(ngModel)]="typeFilter.supplierType">
                  </mat-form-field>
                  <mat-option *ngFor="let data of SupplierType | filterBy: typeFilter" [value]="data.id">
                    {{data.supplierType}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central">
                <mat-label>Supplier</mat-label>
                <mat-select [formControl]="toppings_" [(ngModel)]="SU" (ngModelChange)="getSupplier()">
                  <mat-form-field appearance="outline" style="padding: 5px;">
                    <mat-label>Supplier</mat-label>
                    <input matInput placeholder="Name" [(ngModel)]="typeSupplier.supplier">
                  </mat-form-field>
                  <mat-option *ngFor="let data of Supplier| filterBy: typeSupplier" [value]="data.id">
                    {{data.supplier}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1"></mat-grid-tile>

            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div style="margin-top: -30px; margin-right: -181px;">
                <button (click)="cleanFilter()" mat-icon-button color="primary" matTooltip="Clear filter">
                  <mat-icon>cached</mat-icon>
                </button>
              </div>
            </mat-grid-tile>

          </mat-grid-list>

          <div class="page__section margin-top-min">
            <table mat-table [dataSource]="dataSourceR" class="mat-elevation-z8 textarea" #firstTable
              #firstTableSort='matSort' matSort>
              <!-- Position Column -->
              <ng-container matColumnDef="Supplier Type">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="supplierType">Supplier Type</th>
                <td mat-cell *matCellDef="let element"> {{element.supplierType}} </td>
              </ng-container>

              <!-- Position Column -->
              <ng-container matColumnDef="Supplier Company">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="supplier_company">Supplier Company</th>
                <td mat-cell *matCellDef="let element"> {{element.supplier_company}} </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="Supplier">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="supplier"> Supplier </th>
                <td mat-cell *matCellDef="let element"> {{element.supplier}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="Assigned Date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="date"> Assigned </th>
                <td mat-cell *matCellDef="let element"> {{element.date | date:'dd MMM yyy'}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="Assigned Services">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="assigned_service"> Assigned Services </th>
                <td mat-cell *matCellDef="let element" class="browser" style="font-size: 12px;">
                  <button mat-button [matMenuTriggerFor]="supplier_"
                    (click)="table_supplier(element.assigned_service_detail)">
                    {{element.assigned_service}}
                  </button>
                  <mat-menu #supplier_="matMenu" xPosition="before">
                    <div class="bg"></div>
                    <div class="page__section margin-top-min" style="width: 500px;">
                      <table mat-table [dataSource]="supplier_table" class="mat-elevation-z8 textarea">
                        <!-- Position Column -->
                        <ng-container matColumnDef="Service">
                          <th mat-header-cell *matHeaderCellDef>Service</th>
                          <td mat-cell *matCellDef="let element"> {{element.service_name}} </td>
                        </ng-container>

                        <ng-container matColumnDef="ServiceID">
                          <th mat-header-cell *matHeaderCellDef>Service ID</th>
                          <td mat-cell *matCellDef="let element"> {{element.service_id}} </td>
                        </ng-container>

                        <ng-container matColumnDef="AcceptanceRejectedDate">
                          <th mat-header-cell *matHeaderCellDef>Acceptance-Rejected Date</th>
                          <td mat-cell *matCellDef="let element"> {{element.paymentDate}} </td>
                        </ng-container>

                        <ng-container matColumnDef="Accepted">
                          <th mat-header-cell *matHeaderCellDef>Acceptance</th>
                          <td mat-cell *matCellDef="let element">
                            <div class="table-row__check">
                              <img src="assets/table-icons/check.png" *ngIf="element.accepted" />
                              <img src="assets/table-icons/uncheck.png" *ngIf="!element.accepted" />
                            </div>
                          </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsS"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsS;"></tr>
                      </table>
                    </div>
                  </mat-menu>
                </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="status"> Status </th>
                <td mat-cell *matCellDef="let element"> {{element.status}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumnsRecord"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsRecord;"></tr>
            </table>
            <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;">
              <mat-paginator #SupplierPartnersRecord [pageSizeOptions]="[5,10]" showFirstLastButtons></mat-paginator>
            </div>
          </div>
        </div>


      </div>
      <!-- Form: Library -------------------------------------------------------- -->
      <div class="page__section-form display-none" id="tab_lib">
        <div class="page__title">
          Documents
        </div>
        <!-- tabs de seleccion de library -->
        <div class="page__section no-padding margin-bottom-min">
          <div class="page__section-tabs" id="tabs">
            <div class="page__section-tab page__section-tab--no-bgd page__section-tab--lib page__section-tab--active"
              (click)="showTabSelectedLibrary('ass', $event.target); requestLibraryData();">
              Assignee &
              Family Info
            </div>
            <!-- *ngIf="(__userlog__.role.id == 3) && (__userlog__.profileUsers[0].supplierType == 3)"   cunsultantImmi-->
            <div class="page__section-tab page__section-tab--no-bgd page__section-tab--lib"
              (click)=" showTabSelectedLibrary( 'imm', $event.target); requestLibraryData(1);">
              Immigration
            </div>
            <!-- *ngIf="(__userlog__.role.id == 3) && (__userlog__.profileUsers[0].supplierType == 1)"   cunsultantRelo:-->
            <div class="page__section-tab page__section-tab--no-bgd page__section-tab--lib"
              (click)="  showTabSelectedLibrary('rel', $event.target); requestLibraryData(2);">
              Relocation
            </div>
          </div>
        </div>
        <!-- respuesta del tab Assignee & Family Info -->
        <div class="page__section-form page__section-form--no-shadow no-padding library-tab-content" id="library_ass">
          <div class="page__section font-purple-dark text-center" *ngIf="library_ass_no_data">
            Any Dependent has been register yeet. &nbsp;&nbsp;
            <span (click)="libClickImmTab()" class="text-underline">
              Go To Immigration profile to create one.
            </span>
          </div>
          <div *ngFor="let item of library_ass_data, index as index;">
            <div class="page__section margin-top-min margin-bottom-mini">
              <div class="page__section-name">
                {{ item.dependent }}
              </div>
              <div class="page__section-button page__section-button--bigger">
                <button [disabled]="profileCunsultant == true" *ngIf="index == 0 || permission_edit || permission_write"
                  (click)="addNewDocumentToLibrary()" class="button-icon button-icon--more">
                  Add Document
                </button>
              </div>
            </div>
            <mat-grid-list cols="1">
              <div class="page__section margin-top-mini">
                <div class="page__section" *ngIf="item.document?.length == 0">
                  <span class="font-purple-dark">
                    This dependent has no documents requested.
                  </span>
                </div>
                <div class="page__section" *ngIf="item.document?.length != 0">
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Document Type
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Uploaded
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Issue Date
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Expiration
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Issuing Authority
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Country of Origin
                    </span>
                  </div>
                </div>
                <div *ngFor="let document of item.document, index as index;" class="page__section documents__ascard">
                  <button (click)="deleteDocumentLibrary( document )" class="page__section--card-closeButton">
                  </button>

                  <div (click)="showDocumentDialogDetails( document )"
                    class="page__section-input page__section-input--6_1 documents__ascard--task cursor-pointer">
                    {{ document.documentType }}
                  </div>
                  <div (click)="showDocumentDialogDetails( document )"
                    class="page__section-input page__section-input--6_1 documents__ascard--task cursor-pointer">
                    {{ document.createdDate | date:'dd MMM yyy' }}
                  </div>
                  <div (click)="showDocumentDialogDetails( document )"
                    class="page__section-input page__section-input--6_1 documents__ascard--task cursor-pointer">
                    {{ document.createdDate | date:'dd MMM yyy' }}
                  </div>
                  <div (click)="showDocumentDialogDetails( document )"
                    class="page__section-input page__section-input--6_1 documents__ascard--task cursor-pointer">
                    {{ document.createdDate | date:'dd MMM yyy' }}
                  </div>
                  <div (click)="showDocumentDialogDetails( document )"
                    class="page__section-input page__section-input--6_1 documents__ascard--task cursor-pointer">
                    {{ document.issuingAuthority }}
                  </div>
                  <div (click)="showDocumentDialogDetails( document )"
                    class="page__section-input page__section-input--6_1 documents__ascard--task cursor-pointer">
                    {{ document.country_origin}}
                  </div>
                </div>
              </div>
            </mat-grid-list>
          </div>
        </div>
        <!-- respuesta del tab immigration -->
        <div class="page__section-form page__section-form--no-shadow display-none no-padding library-tab-content"
          id="library_imm">
          <div class="page__section font-purple-dark text-center" *ngIf="library_imre_data.length == 0">
            <!-- Any Work Order has been found. -->
            No work order has been found
          </div>
          <mat-grid-list cols="4" rowHeight="40px" class="margin-top-min margin-bottom-m"
            *ngIf="library_imre_data.length != 0">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Date range </mat-label>
                <mat-date-range-input [rangePicker]="library_docim_ran">
                  <input matStartDate placeholder="Start date" autocomplete="off" />
                  <input matEndDate autocomplete="off" placeholder="End date" />
                </mat-date-range-input>
                <mat-datepicker-toggle matSuffix [for]="library_docim_ran"></mat-datepicker-toggle>
                <mat-date-range-picker #library_docim_ran></mat-date-range-picker>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Status</mat-label>
                <mat-select matNativeControl>
                  <mat-option selected disabled value="">Status</mat-option>
                  <mat-option *ngFor="let item of status_catalogue;" [value]="item.id">
                    {{ item.status }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1"></mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="page__section-data font-size-12 input_final">
                <span class="gray_05 cursor-pointer font-purple-dark float-right" (click)="libraryShowAllDocuments(1)">
                  View All Documents
                </span>
              </div>
            </mat-grid-tile>
          </mat-grid-list>
          <div *ngFor="let item of library_imre_data, index as index;" [class.margin-top-m]="index != 0">
            <mat-grid-list cols="4" rowHeight="40px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12">
                  <span class="text-mini gray_05">Work Order</span><br />
                  {{ item.numberWorkOrder }}
                </div>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12">
                  <span class="text-mini gray_05">Service</span><br />
                  {{ item.service }}
                </div>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12">
                  <span class="text-mini gray_05">Service ID</span><br />
                  {{ item.serviceNumber }}
                </div>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12 input_final">
                  <span class="gray_05 cursor-pointer font-purple-dark float-right" *ngIf="index == 0"
                    (click)="libraryShowAllDocuments(1)">
                    View All Documents
                  </span>
                </div>
              </mat-grid-tile>
            </mat-grid-list>
            <mat-grid-list cols="1" *ngIf="item.documents?.length == 0">
              <div class="page__section">
                <div class="page__section" *ngIf="item.document?.length == 0">
                  <span class="font-purple-dark">
                    This Work Order has not documents.
                  </span>
                </div>
              </div>
            </mat-grid-list>
            <mat-grid-list cols="1" *ngIf="item.documents?.length != 0">
              <div class="page__section margin-top-min">
                <div class="page__section">
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Document Type
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Created
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Issue
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Expiration
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Issuing Authority
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Country of Origin
                    </span>
                  </div>
                </div>
                <div *ngFor="let document of item.documents, index as index;" class="page__section documents__ascard">
                  <button (click)="showDocumentDialogDetails( document, 1 )" class="page__section--card-viewButton">
                  </button>
                  <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.documentType }}
                  </div>
                  <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.createdDate | date:'dd MMM yyy' }}
                  </div>
                  <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.issueDate | date:'dd MMM yyy' }}
                  </div>
                  <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.expirationDate | date:'dd MMM yyy' }}
                  </div>
                  <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.issuingAuthority }}
                  </div>
                  <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.name }}
                  </div>
                </div>
              </div>
            </mat-grid-list>
          </div>
        </div>
        <!-- respuesta del tab relocation -->
        <div class="page__section-form page__section-form--no-shadow display-none no-padding library-tab-content"
          id="library_rel">
          <div class="page__section font-purple-dark text-center" *ngIf="library_imre_data.length == 0">
            <!-- Any Work Order has been found. -->
            No work order has been found
          </div>
          <mat-grid-list cols="4" rowHeight="40px" class="margin-top-min margin-bottom-m"
            *ngIf="library_imre_data.length != 0">
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Date range </mat-label>
                <mat-date-range-input [rangePicker]="library_doc_ran">
                  <input matStartDate placeholder="Start date" autocomplete="off"
                    [(ngModel)]="library_filter.rangeDate1" />
                  <input matEndDate autocomplete="off" placeholder="End date" [(ngModel)]="library_filter.rangeDate2"
                    (dateChange)="filteringLibraryData()" (change)="filteringLibraryData()" />
                </mat-date-range-input>
                <mat-datepicker-toggle matSuffix [for]="library_doc_ran"></mat-datepicker-toggle>
                <mat-date-range-picker #library_doc_ran></mat-date-range-picker>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <mat-form-field appearance="fill" class="input_central_half">
                <mat-label>Status</mat-label>
                <mat-select matNativeControl [(ngModel)]="library_filter.status"
                  (selectionChange)="filteringLibraryData()">
                  <mat-option selected disabled value="">Status</mat-option>
                  <mat-option *ngFor="let item of status_catalogue;" [value]="item.id">
                    {{ item.status }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1"></mat-grid-tile>
            <mat-grid-tile [colspan]="1" [rowspan]="1">
              <div class="page__section-data font-size-12 input_final">
                <span class="gray_05 cursor-pointer font-purple-dark float-right" (click)="libraryShowAllDocuments(1)">
                  View All Documents
                </span>
              </div>
            </mat-grid-tile>
          </mat-grid-list>
          <div *ngFor="let item of library_imre_data, index as index;" [class.margin-top-m]="index != 0">
            <mat-grid-list cols="4" rowHeight="40px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12">
                  <span class="text-mini gray_05">Work Order</span><br />
                  {{ item.numberWorkOrder }}
                </div>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12">
                  <span class="text-mini gray_05">Service</span><br />
                  {{ item.service }}
                </div>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12">
                  <span class="text-mini gray_05">Service ID</span><br />
                  {{ item.serviceNumber }}
                </div>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <div class="page__section-data font-size-12 input_final">
                  <span class="gray_05 cursor-pointer font-purple-dark float-right" *ngIf="index == 0"
                    (click)="libraryShowAllDocuments(1)">
                    View All Documents
                  </span>
                </div>
              </mat-grid-tile>
            </mat-grid-list>
            <mat-grid-list cols="1" *ngIf="item.documents?.length == 0">
              <div class="page__section">
                <div class="page__section" *ngIf="item.document?.length == 0">
                  <span class="font-purple-dark">
                    This Work Order has not documents.
                  </span>
                </div>
              </div>
            </mat-grid-list>
            <mat-grid-list cols="1" *ngIf="item.documents?.length != 0">
              <div class="page__section margin-top-min">
                <div class="page__section">
                  <div class="page__section-input page__section-input--25">
                    <span class="documents__index documents__index--task font-black-bold">
                      Document Type
                    </span>
                  </div>
                  <div class="page__section-input page__section-input--25">
                    <span class="documents__index documents__index--task font-black-bold">
                      Created
                    </span>
                  </div>
                  <!-- <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Issue Date
                    </span>
                  </div> -->
                  <div class="page__section-input page__section-input--25">
                    <span class="documents__index documents__index--task font-black-bold">
                      Expiration
                    </span>
                  </div>
                  <!-- <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Issuing Authority
                    </span>
                  </div> -->
                  <!-- <div class="page__section-input page__section-input--6_1">
                    <span class="documents__index documents__index--task font-black-bold">
                      Country of Origin
                    </span>
                  </div> -->
                </div>
                <div *ngFor="let document of item.documents, index as index;" class="page__section documents__ascard">
                  <button (click)="showDocumentDialogDetails( document, 1 )" class="page__section--card-viewButton">
                  </button>
                  <div class="page__section-input page__section-input--25 documents__ascard--task">
                    {{ document.documentType }}
                  </div>
                  <div class="page__section-input page__section-input--25 documents__ascard--task">
                    {{ document.createdDate | date:'dd MMM yyy' }}
                  </div>
                  <!-- <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.issueDate | date:'dd MMM yyy' }}
                  </div> -->
                  <div class="page__section-input page__section-input--25 documents__ascard--task">
                    {{ document.expirationDate | date:'dd MMM yyy' }}
                  </div>
                  <!-- <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.issuingAuthority }}
                  </div> -->
                  <!-- <div class="page__section-input page__section-input--6_1 documents__ascard--task">
                    {{ document.name }}
                  </div> -->
                </div>
              </div>
            </mat-grid-list>
          </div>
        </div>
      </div>

      <!-- Form: Finance -------------------------------------------------------- -->
      <form action="" class="page__section-form display-none" id="tab_fin">

        <!--SERVICE INVOICES-->
        <mat-grid-list cols="4" rowHeight="70px">

          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <div class="textarea" style="display: flex;">
              <p class="page__section-name">Finance</p>
            </div>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <mat-form-field appearance="fill">
              <mat-label>Special Billing Instructions</mat-label>
              <input matInput>
            </mat-form-field>
          </mat-grid-tile>


          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="input_central textarea">
              <mat-form-field appearance="fill">
                <mat-label>Service Line</mat-label>
                <mat-select matNativeControl (selectionChange)="dataIS.serviceLine = $event.value; searchData();">
                  <mat-option *ngFor="let item of ca_serviceLine" [value]="item.id">{{item.serviceLine}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="1" [rowspan]="1">
            <div class="input_central textarea">
              <mat-form-field appearance="fill">
                <mat-label>Status</mat-label>
                <mat-select matNativeControl (selectionChange)="dataIS.status = $event.value; searchData();">
                  <mat-option *ngFor="let item of ca_status" [value]="item.id">{{item.status}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </mat-grid-tile>

          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <div class="textarea" style="display: flex;">
              <p class="page__section-name">Service Invoices</p>
            </div>
          </mat-grid-tile>

        </mat-grid-list>

        <table mat-table [dataSource]="dataSourceIS" class="mat-elevation-z8 textarea" *ngIf="__userlog__.role.id != 2">

          <!-- Position Column -->
          <ng-container matColumnDef="Invoice No.">
            <th mat-header-cell *matHeaderCellDef>Invoice No.</th>
            <td mat-cell *matCellDef="let element">
              <p class="browser" style="font-size: 10px;">{{element.invoiceNo}}</p>
            </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Premier Invoice Date">
            <th mat-header-cell *matHeaderCellDef>Premier Invoice</th>
            <td mat-cell *matCellDef="let element"> {{element.premierInvoiceDate | date: 'dd MMM yyyy'}} </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Service Line">
            <th mat-header-cell *matHeaderCellDef>Service Line</th>
            <td mat-cell *matCellDef="let element"> {{element.serviceLince}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Work Order">
            <th mat-header-cell *matHeaderCellDef> Work Order </th>
            <td mat-cell *matCellDef="let element"> {{element.workOder}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Due Date">
            <th mat-header-cell *matHeaderCellDef> Due Date </th>
            <td mat-cell *matCellDef="let element"> {{element.dueDate | date: 'dd MMM yyyy' }} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="Invoiced Fee">
            <th mat-header-cell *matHeaderCellDef> Invoiced Fee </th>
            <td mat-cell *matCellDef="let element"> {{element.invoicedFee | currency}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsSI"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsSI;"></tr>
        </table>

        <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;"
          *ngIf="__userlog__.role.id != 2">
          <mat-paginator #supplierSI_ [pageSizeOptions]="[5, 10]" showFirstLastButtons>
          </mat-paginator>
        </div>

        <table mat-table [dataSource]="dataSourceIS" class="mat-elevation-z8 textarea" *ngIf="__userlog__.role.id == 2">

          <!-- Position Column -->
          <ng-container matColumnDef="Invoice No.">
            <th mat-header-cell *matHeaderCellDef>Invoice No.</th>
            <td mat-cell *matCellDef="let element">
              <p class="browser" style="font-size: 10px;">{{element.invoiceNo}}</p>
            </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Premier Invoice Date">
            <th mat-header-cell *matHeaderCellDef>Premier Invoice Date</th>
            <td mat-cell *matCellDef="let element"> {{element.premierInvoiceDate | date: 'dd MMM yyyy'}} </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Service Line">
            <th mat-header-cell *matHeaderCellDef>Service Line</th>
            <td mat-cell *matCellDef="let element"> {{element.serviceLince}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Work Order">
            <th mat-header-cell *matHeaderCellDef> Work Order </th>
            <td mat-cell *matCellDef="let element"> {{element.workOder}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Due Date">
            <th mat-header-cell *matHeaderCellDef> Due Date </th>
            <td mat-cell *matCellDef="let element"> {{element.dueDate | date: 'dd MMM yyyy' }} </td>
          </ng-container>


          <!-- Symbol Column -->
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsSI_"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsSI_;"></tr>
        </table>

        <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;"
          *ngIf="__userlog__.role.id == 2">
          <mat-paginator #supplierSI_ [pageSizeOptions]="[5, 10]" showFirstLastButtons>
          </mat-paginator>
        </div>
        <!--SUPPLIER PARTNER INVOICES-->
        <mat-grid-list cols="4" rowHeight="70px">

          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <div class="textarea" style="display: flex;">
              <p class="page__section-name">Supplier Partner Invoices</p>
            </div>
          </mat-grid-tile>

        </mat-grid-list>

        <table mat-table [dataSource]="dataSourceSP" class="mat-elevation-z8 textarea" *ngIf="__userlog__.role.id != 2">

          <!-- Position Column -->
          <ng-container matColumnDef="Invoice No.">
            <th mat-header-cell *matHeaderCellDef>Invoice No.</th>
            <td mat-cell *matCellDef="let element">
              <p class="browser" style="font-size: 10px;"></p>
            </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Supplier Invoice Date">
            <th mat-header-cell *matHeaderCellDef>Supplier Invoice Date</th>
            <td mat-cell *matCellDef="let element"> {{element.invoiceDate | date: 'dd MMM yyyy'}} </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Service Line">
            <th mat-header-cell *matHeaderCellDef>Service Line</th>
            <td mat-cell *matCellDef="let element"> {{element.serviceLine}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Work Order">
            <th mat-header-cell *matHeaderCellDef> Work Order </th>
            <td mat-cell *matCellDef="let element"> {{element.workOrder}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Consultant">
            <th mat-header-cell *matHeaderCellDef> Consultant </th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="Due Date">
            <th mat-header-cell *matHeaderCellDef> Due Date </th>
            <td mat-cell *matCellDef="let element"> {{element.dueDate | date: 'dd MMM yyyy'}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Invoiced Fee">
            <th mat-header-cell *matHeaderCellDef> Invoiced Fee </th>
            <td mat-cell *matCellDef="let element"> {{element.invoiceType | currency}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsSP"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsSP;"></tr>
        </table>
        <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;"
          *ngIf="__userlog__.role.id != 2">
          <mat-paginator #supplier_ [pageSizeOptions]="[5, 10]" showFirstLastButtons>
          </mat-paginator>
        </div>

        <table mat-table [dataSource]="dataSourceSP" class="mat-elevation-z8 textarea" *ngIf="__userlog__.role.id == 2">

          <!-- Position Column -->
          <ng-container matColumnDef="Invoice No.">
            <th mat-header-cell *matHeaderCellDef>Invoice No.</th>
            <td mat-cell *matCellDef="let element">
              <p class="browser" style="font-size: 10px;"></p>
            </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Supplier Invoice Date">
            <th mat-header-cell *matHeaderCellDef>Supplier Invoice</th>
            <td mat-cell *matCellDef="let element"> {{element.invoiceDate | date: 'dd MMM yyyy'}} </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Service Line">
            <th mat-header-cell *matHeaderCellDef>Service Line</th>
            <td mat-cell *matCellDef="let element"> {{element.serviceLine}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Work Order">
            <th mat-header-cell *matHeaderCellDef> Work Order </th>
            <td mat-cell *matCellDef="let element"> {{element.workOrder}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Consultant">
            <th mat-header-cell *matHeaderCellDef> Consultant </th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="Due Date">
            <th mat-header-cell *matHeaderCellDef> Due Date </th>
            <td mat-cell *matCellDef="let element"> {{element.dueDate | date: 'dd MMM yyyy'}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsSP_"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsSP_;"></tr>
        </table>
        <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;"
          *ngIf="__userlog__.role.id == 2">
          <mat-paginator #supplier_ [pageSizeOptions]="[5, 10]" showFirstLastButtons>
          </mat-paginator>
        </div>

        <!--THIRD PARTY INVOICES-->
        <mat-grid-list cols="4" rowHeight="70px">

          <mat-grid-tile [colspan]="4" [rowspan]="1">
            <div class="textarea" style="display: flex; height: 100%;">
              <div style="flex-basis: 50%;height: 100%; ">
                <p class="page__section-name">Third Party Invoices</p>
              </div>
              <div style="flex-basis: 50%; margin-top: 45px; height: 100%;">
                <div class="page__section-button page__section-button--big" style="left: 6px;">
                  <button class="button-icon button-icon--money" *ngIf="permission_edit || permission_write"
                    (click)="openRequestPayment()">
                    Request Payment
                  </button>
                </div>
              </div>
            </div>
          </mat-grid-tile>

        </mat-grid-list>

        <table mat-table [dataSource]="dataSourceTHIRD" class="mat-elevation-z8 textarea">

          <!-- Position Column -->
          <ng-container matColumnDef="Sub Total">
            <th mat-header-cell *matHeaderCellDef>Service Line</th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Management Fee">
            <th mat-header-cell *matHeaderCellDef>Premier Invoice No.</th>
            <td mat-cell *matCellDef="let element" (click)="openRequestPaymentedit()"> </td>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="Wire Fee">
            <th mat-header-cell *matHeaderCellDef>Premier Invoice</th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Advance Fee">
            <th mat-header-cell *matHeaderCellDef> Description </th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="Total">
            <th mat-header-cell *matHeaderCellDef> Amount </th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="Funding Request Date">
            <th mat-header-cell *matHeaderCellDef> Currency </th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>


          <!-- Symbol Column -->
          <ng-container matColumnDef="Recurrent">
            <th mat-header-cell *matHeaderCellDef> Next Reminder </th>
            <td mat-cell *matCellDef="let element"></td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef> Country </th>
            <td mat-cell *matCellDef="let element"> </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Country">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsTHIRD"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsTHIRD;" (click)="openRequestPaymentedit(row)"></tr>
        </table>

        <div class="page__section text-center paginator margin-top-mini" style="margin-top: 20px;">
          <mat-paginator #third [pageSizeOptions]="[5, 10]" showFirstLastButtons>
          </mat-paginator>
        </div>

      </form>
    </div>
    <div class="page__section margin-top-mini page__section--justify-end">
      <!-- div class="page__section-input page__section-input--2">
              <mat-checkbox class="example-margin">Create as Urgent</mat-checkbox>
          </div -->

      <!-- <div class="page__section-buttong" *ngIf="show_buttom && (__userlog__.role.id == 3 || __userlog__.role.id == 2)">
        <button (click)="accept()">Accept</button>
      </div>
      &nbsp;
      <div class="page__section-buttong" *ngIf="show_buttom && (__userlog__.role.id == 3 || __userlog__.role.id == 2)">
        <button (click)="decline()">Reject</button>
      </div> -->

      <div class="page__section-buttong" *ngIf="permission_edit">
        <button (click)="updateServiceRecordData()">Save</button>
      </div>
    </div>
  </div>
</div>
