<div class="main-wrapper padding-general-x">
  <div class="page">
    <div class="page__path subtitle">
      {{userData.role.role}} Dashboard
    </div>
    <!-- Dashboard Cards ----------------------------------------------- -->
    <!-- Dashboard Cards ----------------------------------------------- -->
    <!-- Dashboard Cards ----------------------------------------------- -->
    <!-- Dashboard Cards ----------------------------------------------- -->
    <!-- Dashboard Cards ----------------------------------------------- -->
    <!-- Dashboard Cards ----------------------------------------------- -->
    <!-- Dashboard Cards ----------------------------------------------- -->
    <div class="page__title title">
      My Dashboard
    </div>
    <!-- manager supplier -->
    <div class="page__section" *ngxPermissionsOnly="['1', '3', '19', '20', '21']">
      <div class="dash">
        <!-- <div class="dash__block" (click)="openCalendar()">
          <div class="dash__card cursor-pointer">
            <span class="dash__card--flag index-pink"></span>
            <div class="dash__card-bTitl">Calendar</div>
            <img src="../../../assets/icons/dash-calendar.svg" class="dash__card-bIcon" />
            <div class="dash__card-bNumb">
              {{ __todaydate__.getDate() }}
            </div>
            <div class="dash__card-bSmal">
              {{ __months__[__todaydate__.getMonth()] + __todaydate__.getFullYear() }}
            </div>
            <span class="dash__card-sMini" style="right: 10px; top: 85%;">
              <span>{{counts?.calendar}}</span>
            </span>
          </div>
        </div> -->
        <!-- <div class="dash__cell">
          <div class="dash__card dash__card--up cursor-pointer" (click)="goToPage('actionItems')">
            <span class="dash__card--flag index-lemon"></span>
            <div class="dash__card-sTitl">Action Items</div>
            <img src="../../../assets/icons/dash-activity.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.activityItems}}</span>
            </div>
          </div>
        </div> -->
        <div class="dash__cell" (click)="openCalendar()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-pink"></span>
            <div class="dash__card-sTitl">Calendar</div>
            <img src="../../../assets/icons/dash-calendar.svg" class="dash__card-bIcon" />
            <div class="dash__card-bNumb">
              {{ __todaydate__.getDate() }}
            </div>
            <div class="dash__card-bSmal">
              {{ __months__[__todaydate__.getMonth()] + __todaydate__.getFullYear() }}
            </div>
            <div class="dash__card-sMini">
              <span>{{counts?.calendar}}</span>
            </div>
          </div>
        </div>
        <div class="dash__cell" (click)="openReminders()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-orange"></span>
            <div class="dash__card-sTitl">Reminders</div>
            <img src="../../../assets/icons/dash-reminders.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.reminders}}</span>
            </div>
          </div>
        </div>
        <div class="dash__cell" (click)="openArraivals()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-aqua"></span>
            <div class="dash__card-sTitl">Arrivals</div>
            <img src="../../../assets/icons/dash-arraivals.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.arrivals}}</span>
            </div>
          </div>
        </div>
        <!-- <div class="dash__cell" *ngxPermissionsOnly="['1', '19','20', '21']" (click)="openFollowers()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-yellow"></span>
            <div class="dash__card-sTitl">Following</div>
            <img src="../../../assets/icons/dash-following.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.following}}</span>
            </div>
          </div>
        </div> -->
        <!-- <div class="dash__cell" *ngxPermissionsOnly="['3']" (click)="openAvailavility()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-pinky"></span>
            <div class="dash__card-sTitl">Availability</div>
            <img src="../../../assets/icons/dash-avaibility.svg" class="dash__card-sIcon" />
          </div>
        </div> -->
        <div class="dash__cell" (click)="openNotification()">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-blue"></span>
            <div class="dash__card-sTitl">Notifications</div>
            <img src="../../../assets/icons/dash-notifications.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.notifications}}</span>
            </div>
          </div>
        </div>
        <!-- <div class="dash__cell" (click)="openEscalation()">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-orangered"></span>
            <div class="dash__card-sTitl">Escalations</div>
            <img src="../../../assets/icons/dash-escalations.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.escalation}}</span>
            </div>
          </div>
        </div> -->
        <!-- <div class="dash__cell" (click)="openCall()">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-sky"></span>
            <div class="dash__card-sTitl">Calls</div>
            <img src="../../../assets/icons/dash-calls.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.calls}}</span>
            </div>
          </div>
        </div> -->
        <div class="dash__cell" *ngxPermissionsOnly="['1', '19', '20', '21']">
          <div class="dash__card dash__card--down cursor-pointer" (click)="openDialogCoordinadors()">
            <span class="dash__card--flag index-purple"></span>
            <div class="dash__card-sTitl">Coordinators</div>
            <img src="../../../assets/icons/dash-coordinators.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.coordinators}}</span>
            </div>
          </div>
        </div>
        <!-- <div class="dash__cell" *ngxPermissionsOnly="['3']">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-demon"></span>
            <div class="dash__card-sTitl">Experience</div>
            <span class="dash__card-sNumb">40.00%</span>
          </div>
        </div> -->
      </div>
    </div>
    <!-- coordinador -->
    <div class="page__section" *ngxPermissionsOnly="['2']">
      <div class="dash">
        <div class="dash__cell" (click)="openCalendar()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-pink"></span>
            <div class="dash__card-sTitl">Calendar</div>
            <img src="../../../assets/icons/dash-calendar.svg" class="dash__card-bIcon" />
            <div class="dash__card-bNumb">
              {{ __todaydate__.getDate() }}
            </div>
            <div class="dash__card-bSmal">
              {{ __months__[__todaydate__.getMonth()] + __todaydate__.getFullYear() }}
            </div>
            <div class="dash__card-sMini">
              <span>{{counts?.calendar}}</span>
            </div>
          </div>
        </div>
        <!-- <div class="dash__cell dash__cell--25">
          <div class="dash__card dash__card--up cursor-pointer" (click)="goToPage('actionItems')">
            <span class="dash__card--flag index-lemon"></span>
            <div class="dash__card-sTitl">Action Items</div>
            <img src="../../../assets/icons/dash-activity.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.activityItems}}</span>
            </div>
          </div>
        </div> -->
        <div class="dash__cell dash__cell--25" (click)="openReminders()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-orange"></span>
            <div class="dash__card-sTitl">Reminders</div>
            <img src="../../../assets/icons/dash-reminders.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.reminders}}</span>
            </div>
          </div>
        </div>
        <div class="dash__cell dash__cell--25" (click)="openArraivals()">
          <div class="dash__card dash__card--up cursor-pointer">
            <span class="dash__card--flag index-aqua"></span>
            <div class="dash__card-sTitl">Arrivals</div>
            <img src="../../../assets/icons/dash-arraivals.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.arrivals}}</span>
            </div>
          </div>
        </div>
        <div class="dash__cell dash__cell--25" (click)="openNotification()">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-blue"></span>
            <div class="dash__card-sTitl">Notifications</div>
            <img src="../../../assets/icons/dash-notifications.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.notifications}}</span>
            </div>
          </div>
        </div>
        <!-- <div class="dash__cell dash__cell--25" (click)="openEscalation()">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-orangered"></span>
            <div class="dash__card-sTitl">Escalations</div>
            <img src="../../../assets/icons/dash-escalations.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.escalation}}</span>
            </div>
          </div>
        </div> -->
        <!-- <div class="dash__cell dash__cell--25" (click)="openCall()">
          <div class="dash__card dash__card--down cursor-pointer">
            <span class="dash__card--flag index-sky"></span>
            <div class="dash__card-sTitl">Calls</div>
            <img src="../../../assets/icons/dash-calls.svg" class="dash__card-sIcon" />
            <div class="dash__card-sMini">
              <span>{{counts?.calls}}</span>
            </div>
          </div>
        </div> -->
      </div>
      <!-- <div class="dash dash--20">
        <div class="dash__block dash__block--x">
          <div class="dash__card cursor-pointer">
            <span class="dash__card--flag index-demon"></span>
            <div class="dash__card-bTitl">Experience</div>
            <div class="dash__card-bNumb dash__card-bNumb--fbig">
              77.77&nbsp;%
            </div>
          </div>
        </div>
      </div> -->
    </div>
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- Markers + Service Line Filter ----------------------------------------------- -->
    <!-- <div class="page__section margin-top-min">
      <div class="page__section-name">
        Service Records
      </div>
    </div>
    <mat-grid-list cols="5" rowHeight="70px" *ngxPermissionsOnly="['1', '19','20','21']">
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill">
          <mat-label>Service Line</mat-label>
          <mat-select matNativeControl [(ngModel)]="filter_data.serviceLine" (ngModelChange)="updateDashboardData();">
            <mat-option value="I/R">I/R</mat-option>
            <mat-option *ngFor="let item of serviceline_catalogue" [value]="item.serviceLine">
              {{ item.serviceLine }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button (click)="resetDashboardTableFilters()" mat-icon-button color="primary" matTooltip="Clear All ilters">
          <mat-icon>cached</mat-icon>
        </button>
      </mat-grid-tile>
    </mat-grid-list> -->
    <!-- <mat-grid-list cols="5" rowHeight="105px" class="margin-bottom-min"
      *ngxPermissionsOnly="['1','2','3', '19', '20', '21']">
      <mat-grid-tile [colspan]="1" [rowspan]="1" class="overflow-visible">
        <div class="filterCard">
          <div class="filterCard__label"></div>
          <div class="filterCard__card cursor-pointer" id="act_filter_card" (click)="filterTableByCardSelect('act')">
            <div class="filterCard__card-text">Active</div>
            <div class="filterCard__card-numb">
              {{ dash_data.active }}
            </div>
          </div>
        </div>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1" class="overflow-visible">
        <div class="filterCard">
          <div class="filterCard__label"></div>
          <div class="filterCard__card cursor-pointer" id="inp_filter_card" (click)="filterTableByCardSelect('inp')">
            <div class="filterCard__card-text">In Progress</div>
            <div class="filterCard__card-numb">
              {{ dash_data.inprogress }}
            </div>
          </div>
        </div>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1" class="overflow-visible">
        <div class="filterCard">
          <div class="filterCard__label"></div>
          <div class="filterCard__card cursor-pointer" id="vip_filter_card" (click)="filterTableByCardSelect('vip')">
            <div class="filterCard__card-text">VIP</div>
            <div class="filterCard__card-numb">
              {{ dash_data.vip }}
            </div>
          </div>
        </div>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1" class="overflow-visible">
        <div class="filterCard">
          <div class="filterCard__label"></div>
          <div class="filterCard__card cursor-pointer" id="onh_filter_card" (click)="filterTableByCardSelect('onh')">
            <div class="filterCard__card-text">Pending Assign</div>
            <div class="filterCard__card-numb">
              {{ dash_data.pendingAssigned }}
            </div>
          </div>
        </div>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1" class="overflow-visible">
        <div class="filterCard">
          <div class="filterCard__label"></div>
          <div class="filterCard__card cursor-pointer" id="pen_filter_card" (click)="filterTableByCardSelect('pen')">
            <div class="filterCard__card-text">Pending Accept</div>
            <div class="filterCard__card-numb">
              {{ dash_data.pendngAcceptance }}
            </div>
          </div>
        </div>
      </mat-grid-tile>
    </mat-grid-list> -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <!-- Table Filters ----------------------------------------------------------- -->
    <mat-grid-list cols="5" rowHeight="70px">
      <mat-grid-tile [colspan]="2" [rowspan]="1">
        <mat-form-field class="input_central_half">
          <mat-label>Search</mat-label>
          <input matInput [(ngModel)]="filter_data.search" (keyup)="serchFilter($event)" placeholder="Search" type="text" />
          <mat-icon matSuffix style="color:#9d3292">search</mat-icon>
        </mat-form-field>

      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">

      </mat-grid-tile>
    </mat-grid-list>
    <mat-grid-list cols="5" rowHeight="70px">
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill" class="input_central_half">
          <mat-label>Status</mat-label>
          <mat-select matNativeControl [(ngModel)]="filter_data.status" (selectionChange)="updateDashboardData()">

            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>status</mat-label>
              <input matInput placeholder="status" [(ngModel)]="filterStatus.status">
            </mat-form-field>

            <mat-option *ngFor="let item of status_catalogue | filterBy: filterStatus" [value]="item.id">
              {{ item.status }}
            </mat-option>
            <mat-option disabled *ngIf="(status_catalogue | filterBy: filterStatus).length === 0">No matching elements
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill" class="input_central_half">
          <mat-label>Country</mat-label>
          <mat-select matNativeControl [(ngModel)]="filter_data.country"
            (selectionChange)="ableCityField(); updateDashboardData();">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>Country</mat-label>
              <input matInput placeholder="country" [(ngModel)]="filterCountry.name">
            </mat-form-field>
            <mat-option *ngFor="let item of country_catalogue | filterBy: filterCountry" [value]="item.id">
              {{ item.name }}
            </mat-option>
            <mat-option disabled *ngIf="(country_catalogue | filterBy: filterCountry).length === 0">No matching elements
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill" class="input_central_half">
          <mat-label>City</mat-label>
          <mat-select matNativeControl [(ngModel)]="filter_data.city"
            (selectionChange)="updateDashboardData(); getCoordinatorImmigration();" [disabled]="!able_city_filter">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>city</mat-label>
              <input matInput placeholder="city" [(ngModel)]="filterCity.city ">
            </mat-form-field>
            <!-- <mat-option selected  value="">City</mat-option> -->
            <mat-option *ngFor="let item of city_catalogue | filterBy: filterCity" [value]="item.id">
              {{ item.city }}
            </mat-option>
            <mat-option disabled *ngIf="(city_catalogue | filterBy: filterCity).length === 0">No matching elements
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill" class="input_central">
          <mat-label>Date Range</mat-label>
          <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
            <input matStartDate formControlName="start" placeholder="Start date" autocomplete="off" />
            <input matEndDate (dateChange)="filteringServiceRecordTable()" formControlName="end" autocomplete="off"
              placeholder="End date" />
          </mat-date-range-input>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <button mat-icon-button color="primary" style="margin-right: 0px; margin-top: -30px;"
            matTooltip="Clear All Filters" (click)="cleanFilter()">
            <mat-icon [ngClass]="{'refresh': filteruno}">cached</mat-icon>
          </button>
      </mat-grid-tile>

    </mat-grid-list>
    <mat-grid-list cols="5" rowHeight="70px">
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill" class="input_central_half">
          <mat-label>Partner</mat-label>
          <mat-select matNativeControl [(ngModel)]="filter_data.partner"
            (selectionChange)="updateDashboardData(); getClient();">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>Partner</mat-label>
              <input matInput placeholder="Partner" [(ngModel)]="filterPartner.coordinator">
            </mat-form-field>
            <mat-option *ngFor="let item of parther_catalogue | filterBy: filterPartner" [value]="item.id">
              {{ item.coordinator }}
            </mat-option>
            <mat-option disabled *ngIf="(parther_catalogue | filterBy: filterPartner).length === 0">No matching elements
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-form-field appearance="fill" class="input_central_half">
          <mat-label>Client</mat-label>
          <mat-select matNativeControl [(ngModel)]="filter_data.client"
            (selectionChange)="updateDashboardData(); getCoordinatorImmigration();"
            [disabled]="client_catalogue.length == 0">
            <mat-form-field appearance="outline" style="padding: 5px;">
              <mat-label>client</mat-label>
              <input matInput placeholder="client" [(ngModel)]="filterClient.name">
            </mat-form-field>
            <mat-option *ngFor="let item of client_catalogue | filterBy: filterClient" [value]="item.id">
              {{ item.name }}
            </mat-option>
            <mat-option disabled *ngIf="(client_catalogue | filterBy: filterClient).length === 0">No matching elements
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <mat-checkbox
              (change)="checkCheckBoxvalue($event)">
              VIP
          </mat-checkbox>
      </mat-grid-tile>
      <!-- <mat-grid-tile [colspan]="1" [rowspan]="1" *ngxPermissionsOnly="['1','3', '19','20', '21']">
        <div style="width: 100%; display: flex;">
          <mat-form-field appearance="fill" class="input_central_half">
            <mat-label>Coordinator</mat-label>
            <mat-select matNativeControl [(ngModel)]="filter_data.coordinator" (selectionChange)="updateDashboardData()"
              [disabled]="coordinator_catalogue.length == 0">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Coordinator</mat-label>
                <input matInput placeholder="Coordinator" [(ngModel)]="filterCoordinator.coordinator">
              </mat-form-field>
              <mat-option *ngFor="let item of coordinator_catalogue | filterBy: filterCoordinator" [value]="item.id">
                {{ item.coordinator }}
              </mat-option>
              <mat-option disabled *ngIf="(coordinator_catalogue | filterBy: filterCoordinator).length === 0">No
                matching elements</mat-option>
            </mat-select>
          </mat-form-field>
          <button *ngxPermissionsOnly="['3']" (click)="resetDashboardTableFilters()" mat-icon-button color="primary"
            style="margin-left: -30px; margin-top: 12px;" matTooltip="Clear All Filters">
            <mat-icon>cached</mat-icon>
          </button>
        </div>
      </mat-grid-tile> -->
      <!-- <mat-grid-tile [colspan]="1" [rowspan]="1" *ngxPermissionsOnly="['1','2','19','20','21']">
        <div style="width: 100%; display: flex;">
          <mat-form-field appearance="fill" class="input_central_half">
            <mat-label>Supplier</mat-label>
            <mat-select matNativeControl [(ngModel)]="filter_data.supplier" (selectionChange)="updateDashboardData()"
              [disabled]="supplier_catalogue.length == 0">
              <mat-form-field appearance="outline" style="padding: 5px;">
                <mat-label>Supplier</mat-label>
                <input matInput placeholder="Supplier" [(ngModel)]="filterSupplier.name">
              </mat-form-field>
              <mat-option *ngFor="let item of supplier_catalogue | filterBy: filterSupplier" [value]="item.id">
                {{ item.name }}
              </mat-option>
              <mat-option disabled *ngIf="(supplier_catalogue | filterBy: filterSupplier).length === 0">No matching
                elements</mat-option>
            </mat-select>
          </mat-form-field>
          <button (click)="resetDashboardTableFilters()" mat-icon-button color="primary"
            style="margin-left: -30px; margin-top: 12px;" matTooltip="Clear All Filters">
            <mat-icon>cached</mat-icon>
          </button>
          <button (click)="get_Notification();" id="dashboard" mat-icon-button color="primary" hidden
            style="margin-left: -30px; margin-top: 12px;" matTooltip="Clear All filters">
            <mat-icon>cached</mat-icon>
          </button>
        </div>
      </mat-grid-tile> --> Service Records
      <mat-grid-tile [colspan]="1" [rowspan]="1" style="text-align: justify;">
        <div class="page__section-butuon" style="margin-top: -26px; width: 100%; text-align: end;">

        </div>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1">

      <div class="page__section-butuonc">

          <button (click)="exporter.exportTable('xls')" id="excel" class="button-icon button-icon--adder" *ngIf="userData.role.role != 'Supplier'">
            Export
          </button>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
    <!-- Table -------------------------------------------------------- -->


    <table mat-table matSort matTableExporter [dataSource]="service_records_table_data" #exporter="matTableExporter"
      class="main-table">

      <ng-container matColumnDef="sr">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="numberServiceRecord">SR
        </th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center link' : 'text-center link' "  (click)="goToSR(element)"
          style="cursor: pointer;"><!--class="text-center link"-->
          {{ element.numberServiceRecord }}
        </td>
      </ng-container>

      <ng-container matColumnDef="service_line">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="service_line" class="text-center">Service <br />
          Line</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'" >

          <span class="cursor-pointer" title="{{ element.serviceLine }}" *ngIf="element.serviceLine=='Relocation'">
            Relo
          </span>

          <span class="cursor-pointer" title="{{ element.serviceLine}}" *ngIf="element.serviceLine=='Immigration'">
            Imm
          </span>

          <span class="cursor-pointer" title="{{ element.serviceLine}}" *ngIf="element.serviceLine=='I/R'">
            Imm/Relo
          </span>

        </td>
      </ng-container>

      <ng-container matColumnDef="vip">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="vip">VIP</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'">
          <div class="table-row__check">
            <img src="assets/table-icons/check.png" *ngIf="element.vip" />
            <img src="assets/table-icons/uncheck.png" *ngIf="!element.vip" />
          </div>
        </td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="status">Status</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'">
          <span title="{{ element.status }}">
            {{ element.status }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="initialAutho">Autho Date</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'">
          {{ element.initialAutho | date:'dd MMM yyy' }}
        </td>
      </ng-container>
      <ng-container matColumnDef="city">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="hostCountry">City</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'" matTooltip="{{element.hostCountry}}"
          [matMenuTriggerFor]="country" (click)="viewCity(element)" style="cursor: pointer">
          <span class="browser">
            {{ element.hostCity }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="partner">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="name">Partner</th>
        <td mat-cell *matCellDef="let element"  [ngClass]="element.urgent==true ? 'urgent text-center browser':'text-center browser'" [matMenuTriggerFor]="partner">
          <span title="{{ element.name }}">
            {{ element.name }}
          </span>
          <mat-menu #partner="matMenu" yPosition="above">
            <div class="bg"></div>
            <div class="assigned_services">
              <div class="data browser">
                <mat-list>
                  <div mat-subheader>Client</div>
                  <mat-divider></mat-divider>
                  <mat-list-item>
                    <img src="{{url_image}}{{element.clientAvatar}}" matListAvatar alt="">
                    <div mat-line>
                      <a href="partner_client/{{element.clientId}}" class="browser" target="_blank">
                        {{element.client}}
                      </a>
                    </div>
                  </mat-list-item>

                </mat-list>
                <mat-list>
                  <div mat-subheader>Partner</div>
                  <mat-divider></mat-divider>
                  <mat-list-item>
                    <img src="{{url_image}}{{element.partnerAvatar}}" matListAvatar alt="">
                    <div mat-line>
                      <a href="partner_client/{{element.partnerId}}" class="browser" target="_blank">
                        {{element.name}}
                      </a>
                    </div>
                  </mat-list-item>

                </mat-list>
              </div>
            </div>
          </mat-menu>
        </td>
      </ng-container>

      <ng-container matColumnDef="assignee">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="assigneeName">Assignee Name
        </th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'">
          <span title="{{ element.assigneeName }}" class="browser" [matMenuTriggerFor]="assigneeToolTip">
            {{ element.assigneeName }}
          </span>
          <mat-menu #assigneeToolTip="matMenu" yPosition="above">
            <div class="bg"></div>
            <div class="assigned_services">
              <div class="data browser">
                <mat-list>
                  <div mat-subheader>Dependents</div>
                  <mat-divider></mat-divider>
                  <ng-container *ngFor="let item of element?.assigneeInformations">
                    <ng-container *ngIf="item.dependentInformations.length > 0">
                      <mat-list-item *ngFor="let dependent of item.dependentInformations">
                        <img src="{{url_image}}{{dependent.photo}}" matListAvatar alt="">
                        <div mat-line><b>{{dependent.name}}</b></div>
                        <div mat-line style="font-size: 10px;">{{dependent.phone}}</div>
                        <div mat-line style="font-size: 10px;">{{dependent.relationship}}</div>
                      </mat-list-item>
                    </ng-container>
                    <ng-container *ngIf="item.dependentInformations.length == 0">
                      <mat-list-item>
                        <div mat-line style="font-size: 10px;"><b>No Dependents</b></div>
                      </mat-list-item>
                    </ng-container>
                  </ng-container>
                  <div mat-subheader>Pets</div>
                  <mat-divider></mat-divider>
                  <ng-container *ngFor="let item of element?.assigneeInformations">
                    <ng-container *ngIf="item.petsNavigation.length > 0">
                      <mat-list-item *ngFor="let pet of item.petsNavigation">
                        <img src="{{url_image}}{{pet.photo}}" matListAvatar alt="">
                        <div mat-line><b>{{pet.name}}</b></div>
                        <div mat-line style="font-size: 10px;">{{pet.color}}</div>
                        <div mat-line style="font-size: 10px;">{{pet.relationship}}</div>
                      </mat-list-item>
                    </ng-container>
                    <ng-container *ngIf="item.petsNavigation.length == 0">
                      <mat-list-item>
                        <div mat-line style="font-size: 10px;"><b>No Pets</b></div>
                      </mat-list-item>
                    </ng-container>
                  </ng-container>
                </mat-list>
              </div>
            </div>
          </mat-menu>
        </td>
      </ng-container>

      <ng-container matColumnDef="service">
        <th mat-header-cell *matHeaderCellDef class="text-center">Services</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent':''">
          <span *ngIf="_user_rol == 1 || _user_rol == 19" class="browser cursor-pointer" (click)="getServices(element)">
            {{ element.total_services }}
          </span>
          <span *ngIf="_user_rol == 3" class="browser cursor-pointer"
            (click)="openAcceptantConsultorConsultor(element, _user_rol)">
            <ng-container *ngFor="let imm of element.supplierImm">
              <span *ngIf="imm.userId == userData.id">
                {{imm?.total_services}}
              </span>
            </ng-container>
            <ng-container *ngFor="let relo of element.supplierRelo">
              <span *ngIf="relo?.userId == userData.id">
                {{relo?.total_services}}
              </span>
            </ng-container>
          </span>

          <span *ngIf="_user_rol == 2" class="browser cursor-pointer" (click)="getServices(element)">
            {{ element.total_services }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="cordinador">
        <th mat-header-cell *matHeaderCellDef class="text-center" mat-sort-header="coordinator">Coordinator</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent':''">

          <ng-container *ngIf="element.serviceLine=='Relocation' && _user_rol!=2">
            <span class="text-left browser cursor-pointer" *ngIf="element.coordinatorRelo?.length > 1"
              [matMenuTriggerFor]="coordinador"
              (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
              {{element.coordinatorRelo?.length}}
            </span>
            <span class="text-center browser cursor-pointer" *ngIf="element.coordinatorRelo?.length  == 1">
              <span *ngIf="element.coordinatorRelo[0]?.accepted == 2" class="text__yellow">
                <span [matMenuTriggerFor]="coordinador"
                  (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                  {{element.coordinatorRelo[0]?.name}}
                </span>
              </span>

              <span *ngIf="element.coordinatorRelo[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                {{element.coordinatorRelo[0]?.name}}
              </span>

              <span *ngIf="element.coordinatorRelo[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                {{element.coordinatorRelo[0]?.name}}
              </span>
            </span>

            <span *ngIf="element.coordinatorRelo?.length  == 0">
              Not assigned
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='Relocation' && _user_rol==2">
            <span class="text-center browser cursor-pointer">
              <span *ngIf="element.coordinatorRelo[0]?.accepted == 2" class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>

              <span *ngIf="element.coordinatorRelo[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>

              <span *ngIf="element.coordinatorRelo[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>

            <span *ngIf="element.coordinatorRelo?.length  == 0">
              Not assigned
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='Immigration' && _user_rol!=2">

            <span class="text-center browser cursor-pointer" *ngIf="element.coordinatorImm?.length > 1"
              [matMenuTriggerFor]="coordinador"
              (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
              {{element.coordinatorImm?.length}}
            </span>
            <span class="text-center browser cursor-pointer" *ngIf="element.coordinatorImm?.length  == 1">
              <span *ngIf="element.coordinatorImm[0]?.accepted == 2" class="text__yellow">

                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)" *ngIf="_user_rol==2">
                  {{element.coordinatorImm[0]?.name}}
                </span>
                <span *ngIf="_user_rol!=2" [matMenuTriggerFor]="coordinador"
                  (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                  {{element.coordinatorImm[0]?.name}}
                </span>
              </span>

              <span *ngIf="element.coordinatorImm[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                {{element.coordinatorImm[0]?.name}}
              </span>

              <span *ngIf="element.coordinatorImm[0]?.accepted == 3" class="text__red" [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                {{element.coordinatorImm[0]?.name}}
              </span>
            </span>
            <span *ngIf="element.coordinatorImm?.length  == 0">
              Not assigned
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='Immigration' && _user_rol==2">

            <span class="text-center browser cursor-pointer">
              <span *ngIf="element.coordinatorImm[0]?.accepted == 2" class="text__yellow">

                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>

              <span *ngIf="element.coordinatorImm[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>

              <span *ngIf="element.coordinatorImm[0]?.accepted == 3" class="text__red" [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>
            <span *ngIf="element.coordinatorImm?.length  == 0">
              Not assigned
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='I/R' && _user_rol!=2">
            <span class="text-center browser cursor-pointer"
              *ngIf="element.coordinatorImm?.length + element.coordinatorRelo?.length > 1"
              [matMenuTriggerFor]="coordinador"
              (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
              <!-- {{ element.coordinator.length > 1 ? element.coordinator.length : element.coordinator[0].name }}   -->
              {{element.coordinatorImm?.length + element.coordinatorRelo?.length}}
            </span>
            <span class="text-center browser cursor-pointer"
              *ngIf="element.coordinatorImm?.length + element.coordinatorRelo?.length  == 1">
              <span *ngIf="element.coordinatorImm[0]?.accepted == 2 || element.coordinatorRelo[0]?.accepted == 2"
                class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)"
                  *ngIf="_user_rol==2 || _user_rol==1">
                  {{element.coordinatorImm[0]?.name}}{{element.coordinatorRelo[0]?.name}}
                </span>
                <span *ngIf="_user_rol!=2" [matMenuTriggerFor]="coordinador"
                  (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                  {{element.coordinatorImm[0]?.name}}{{element.coordinatorRelo[0]?.name}}
                </span>
              </span>
              <span *ngIf="element.coordinatorImm[0]?.accepted == 1 || element.coordinatorRelo[0]?.accepted == 1"
                class="text__green" [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                {{element.coordinatorImm[0]?.name}}{{element.coordinatorRelo[0]?.name}}
              </span>
              <span *ngIf="element.coordinatorImm[0]?.accepted == 3 || element.coordinatorRelo[0]?.accepted == 3"
                class="text__red" [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                {{element.coordinatorImm[0]?.name}}{{element.coordinatorRelo[0]?.name}}
              </span>
            </span>
            <span *ngIf="element.coordinatorImm?.length + element.coordinatorRelo?.length  == 0">
              Not assigned
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='I/R' && _user_rol==2">

            <span class="text-center browser cursor-pointer">
              <span *ngIf="element.coordinatorImm[0]?.accepted == 2 || element.coordinatorRelo[0]?.accepted == 2"
                class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>
              <span *ngIf="element.coordinatorImm[0]?.accepted == 1 || element.coordinatorRelo[0]?.accepted == 1"
                class="text__green" [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>
              <span *ngIf="element.coordinatorImm[0]?.accepted == 3 || element.coordinatorRelo[0]?.accepted == 3"
                class="text__red" [matMenuTriggerFor]="coordinador"
                (click)="viewCoordinador(element.coordinatorImm, element.coordinatorRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>
            <span *ngIf="element.coordinatorImm?.length + element.coordinatorRelo?.length  == 0">
              Not assigned
            </span>
          </ng-container>

        </td>
      </ng-container>

      <ng-container matColumnDef="supplier">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">Supplier</th>
        <td mat-cell *matCellDef="let element" [ngClass]="element.urgent==true ? 'urgent text-center':'text-center'" style="cursor: pointer">

          <ng-container *ngIf="element.serviceLine=='Relocation' && _user_rol!=3">
            <span class="text-center browser cursor-pointer" *ngIf="element.supplierRelo?.length > 1"
              [matMenuTriggerFor]="supplierConsultant"
              (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
              {{element.supplierRelo?.length}}
            </span>
            <span class="text-center browser cursor-pointer" *ngIf="element.supplierRelo?.length  == 1">
              <span *ngIf="element.supplierRelo[0]?.accepted == 2" class="text__yellow">
                <span *ngIf="_user_rol!=3" [matMenuTriggerFor]="supplierConsultant"
                  (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                  {{element.supplierRelo[0]?.name}}
                </span>
              </span>
              <span *ngIf="element.supplierRelo[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                {{element.supplierRelo[0]?.name}}
              </span>

              <span *ngIf="element.supplierRelo[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                {{element.supplierRelo[0]?.name}}
              </span>
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='Relocation' && _user_rol==3">

            <span class="text-center browser cursor-pointer">
              <span *ngIf="element.supplierRelo[0]?.accepted == 2" class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <!-- {{element.supplierRelo[0]?.name}} -->
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>
              <span *ngIf="element.supplierRelo[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>

              <span *ngIf="element.supplierRelo[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='Immigration' && _user_rol!=3">
            <span class="text-center browser cursor-pointer" *ngIf="element.supplierImm?.length > 1"
              [matMenuTriggerFor]="supplierConsultant"
              (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
              {{element.supplierImm?.length}}
            </span>
            <span class="text-center browser cursor-pointer">
              <span *ngIf="element.supplierImm[0]?.accepted == 2" class="text__yellow">
                <span [matMenuTriggerFor]="supplierConsultant"
                  (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                  {{element.supplierImm[0]?.name}}
                </span>
              </span>
              <span *ngIf="element.supplierImm[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                {{element.supplierImm[0]?.name}}
              </span>

              <span *ngIf="element.supplierImm[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                {{element.supplierImm[0]?.name}}
              </span>
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='Immigration' && _user_rol==3">
            <span class="text-center browser cursor-pointer">
              <span *ngIf="element.supplierImm[0]?.accepted == 2" class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <!-- {{element.supplierImm[0]?.name}} -->
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>
              <span *ngIf="element.supplierImm[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>

              <span *ngIf="element.supplierImm[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='I/R' && _user_rol!=3">
            <span class="text-center browser cursor-pointer"
              *ngIf="element.supplierImm?.length + element.supplierRelo?.length > 1"
              [matMenuTriggerFor]="supplierConsultant"
              (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
              <!-- {{ element.coordinator.length > 1 ? element.coordinator.length : element.coordinator[0].name }}   -->
              {{element.supplierImm?.length + element.supplierRelo?.length}}
            </span>
            <span class="text-center browser cursor-pointer"
              *ngIf="element.supplierImm?.length + element.supplierRelo?.length  == 1">
              <span *ngIf="element.supplierImm[0]?.accepted == 2 || element.supplierRelo[0]?.accepted == 2"
                class="text__yellow">
                <span [matMenuTriggerFor]="supplierConsultant"
                  (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                  {{element.supplierImm[0]?.name}}{{element.supplierRelo[0]?.name}}
                </span>
              </span>
              <span *ngIf="element.supplierImm[0]?.accepted == 1 || element.supplierRelo[0]?.accepted == 1"
                class="text__green" [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                {{element.supplierImm[0]?.name}}{{element.supplierRelo[0]?.name}}
              </span>

              <span *ngIf="element.supplierImm[0]?.accepted == 3 || element.supplierRelo[0]?.accepted == 3"
                class="text__red" [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                {{element.supplierImm[0]?.name}}{{element.supplierRelo[0]?.name}}
              </span>
            </span>
          </ng-container>

          <ng-container *ngIf="element.serviceLine=='I/R' && _user_rol==3">
            <span class="text-center browser cursor-pointer" *ngIf="element.supplierImm[0]?.userId == userData.id">
              <span *ngIf="element.supplierImm[0]?.accepted == 2" class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <!-- {{element.supplierImm[0]?.name}}{{element.supplierRelo[0]?.name}} -->
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>
              <span *ngIf="element.supplierImm[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>

              <span *ngIf="element.supplierImm[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>
            <span class="text-center browser cursor-pointer" *ngIf="element.supplierRelo[0]?.userId == userData.id">
              <span *ngIf="element.supplierRelo[0]?.accepted == 2" class="text__yellow">
                <span (click)="openAcceptantConsultorConsultor(element, _user_rol)">
                  <!-- {{element.supplierImm[0]?.name}}{{element.supplierRelo[0]?.name}} -->
                  <mat-icon style="font-size: 20px;">check_circle_outline</mat-icon>
                </span>
              </span>
              <span *ngIf="element.supplierRelo[0]?.accepted == 1" class="text__green"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">check_circle</mat-icon>
              </span>

              <span *ngIf="element.supplierRelo[0]?.accepted == 3" class="text__red"
                [matMenuTriggerFor]="supplierConsultant"
                (click)="viewConsultant(element.supplierImm, element.supplierRelo)">
                <mat-icon style="font-size: 20px;">remove_circle_outline</mat-icon>
              </span>
            </span>
          </ng-container>

          <span *ngIf="element.supplierImm?.length + element.supplierRelo?.length  == 0">
            Not assigned
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="service_records_colums"></tr>
      <tr mat-row *matRowDef="let row; columns: service_records_colums;" style="cursor: pointer;"
    ></tr><!-- [ngClass]="{'__urgen': row.urgent == true}"-->
    <!--urgent-->
      </table>

    <div fxLayout="row" fxLayoutAlign="space-between center">
      <div>
        <div class="divIconContainer">
          <mat-icon matListIcon class="dot__urgen spanicon">lens</mat-icon>
          <span class="icon-text">Urgent</span>
        </div>
      </div>
      <div>
        <div class="divIconContainer">
          <b class="dot__green_color icon-text">Accepted</b>&nbsp;&nbsp;&nbsp;|
        </div>
        <div class="divIconContainer">
          <b class="dot__yellow_color icon-text">Pending Acceptance</b>&nbsp;&nbsp;&nbsp;|
        </div>
        <div class="divIconContainer">
          <b class="dot__red_color icon-text">Rejected</b>&nbsp;&nbsp;&nbsp;
        </div>
        <!-- <div class="divIconContainer">
          <b class="icon-text">All Accepted</b>
        </div> -->
      </div>
    </div>
    <div class="page__section">
      <div class="page__section text-center paginator">
        <mat-paginator *ngIf="lengthCC !== null" [length]="lengthCC" [pageSize]="10" [hidePageSize]="true"
          aria-label="Select page" (page)="nextPage($event)">
        </mat-paginator>
      </div>
    </div>
  </div>

  <!-- seccn tooltip -->
  <mat-menu #country="matMenu" yPosition="above">
    <div class="bg"></div>
    <div class="assigned_services">
      <div class="data browser">
        <mat-list>
          <div mat-subheader>Home destination</div>
          <mat-divider></mat-divider>
          <mat-list-item>
            <div mat-line><b>{{info_country.homeCountry}}</b></div>
            <div mat-line style="font-size: 10px;">{{info_country.homeCity}}</div>
          </mat-list-item>
        </mat-list>
        <mat-list>
          <div mat-subheader>Host destination</div>
          <mat-divider></mat-divider>
          <mat-list-item>
            <div mat-line><b>{{info_country.hostCountry}}</b></div>
            <div mat-line style="font-size: 10px;">{{info_country.hostCity}}</div>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </mat-menu>

  <!-- tooltip para mostrar coordinadores -->
  <mat-menu #coordinador="matMenu" xPosition="before">
    <div class="bg"></div>
    <div class="assigned_services">
      <div class="data browser">
        <mat-list *ngIf="_viewCoordinadorImm.length > 0">
          <div mat-subheader>Immigration</div>
          <mat-divider></mat-divider>
          <mat-list-item *ngFor="let item of _viewCoordinadorImm">
            <img src="{{url_image}}{{item.avatar}}" matListAvatar alt="">
            <div mat-line *ngIf="item.accepted == 2" class="text__yellow">{{item.name}}</div>
            <div mat-line *ngIf="item.accepted == 1" class="text__green">{{item.name}}</div>
            <div mat-line *ngIf="item.accepted == 3" class="text__red">{{item.name}}</div>
            <div mat-line style="font-size: 12px;">{{item.coordinatorType}}</div>
          </mat-list-item>
        </mat-list>
        <mat-list *ngIf="_viewCoordinadorRelo.length > 0">
          <div mat-subheader>Relocation</div>
          <mat-divider></mat-divider>
          <mat-list-item *ngFor="let item of _viewCoordinadorRelo">
            <img src="{{url_image}}{{item.avatar}}" matListAvatar alt="">
            <div mat-line *ngIf="item.accepted == 2" class="text__yellow">{{item.name}}</div>
            <div mat-line *ngIf="item.accepted == 1" class="text__green">{{item.name}}</div>
            <div mat-line *ngIf="item.accepted == 3" class="text__red">{{item.name}}</div>
            <div mat-line style="font-size: 12px;">{{item.coordinatorType}}</div>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </mat-menu>

  <!-- tooltip para mostrar coordinadores -->
  <mat-menu #supplierConsultant="matMenu" yPosition="above">
    <div class="bg"></div>
    <div class="assigned_services">
      <div class="data browser">
        <mat-list *ngIf="_viewSupplierImm.length > 0">
          <div mat-subheader>Immigration</div>
          <mat-divider></mat-divider>
          <mat-list-item *ngFor="let item of _viewSupplierImm">
            <img src="{{url_image}}{{item.avatar}}" matListAvatar alt="">
            <div mat-line *ngIf="item.accepted == 2" class="text__yellow" (click)="profilePage(item.id)">{{item.name}}
            </div>
            <div mat-line *ngIf="item.accepted == 1" class="text__green" (click)="profilePage(item.id)">{{item.name}}
            </div>
            <div mat-line *ngIf="item.accepted == 3" class="text__red" (click)="profilePage(item.id)">{{item.name}}
            </div>
            <div mat-line style="font-size: 10px;">{{item.email}}</div>
            <div mat-line style="font-size: 10px;"> {{item.country}} </div>
          </mat-list-item>
        </mat-list>
        <mat-list *ngIf="_viewSupplierRelo.length > 0">
          <div mat-subheader>Relocation</div>
          <mat-divider></mat-divider>
          <mat-list-item *ngFor="let item of _viewSupplierRelo">
            <img src="{{url_image}}{{item.avatar}}" matListAvatar alt="">
            <div mat-line *ngIf="item.accepted == 2" class="text__yellow" (click)="profilePage(item.id)">{{item.name}}
            </div>
            <div mat-line *ngIf="item.accepted == 1" class="text__green" (click)="profilePage(item.id)">{{item.name}}
            </div>
            <div mat-line *ngIf="item.accepted == 3" class="text__red" (click)="profilePage(item.id)">{{item.name}}
            </div>
            <div mat-line style="font-size: 10px;">{{item.email}}</div>
            <div mat-line style="font-size: 10px;"> {{item.country}} </div>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </mat-menu>

  <!-- tooltip para mostrar servicios -->
  <!-- <mat-menu #servicios="matMenu" yPosition="above">
    <div class="assigned_services">
      <div style="text-align: left;">
        <div mat-subheader *ngIf="homeImm.length > 0 || hostImm.length > 0">Immigration</div>
        <mat-divider *ngIf="homeImm.length > 0 || hostImm.length > 0"></mat-divider>
        <mat-list *ngIf="homeImm.length > 0">
          <span style="text-transform: capitalize; font-size: 12px">Home - {{homeImm[0].country}}</span>
          <mat-list-item *ngFor="let item of homeImm">
            <div mat-line style="font-size: 12px !important;"><b>{{item.service_name}}</b></div>
            <div mat-line style="font-size: 10px;">
              {{item.numberWorkOrder}},
              {{item.number_server}}
            </div>
          </mat-list-item>
        </mat-list>
        <mat-list *ngIf="hostImm.length > 0">
          <span style="text-transform: capitalize; font-size: 12px">Host - {{hostImm[0].country}}</span>
          <mat-list-item *ngFor="let item of hostImm">
            <div mat-line style="font-size: 12px !important;"><b>{{item.service_name}}</b></div>
            <div mat-line style="font-size: 10px;">
              {{item.numberWorkOrder}},
              {{item.number_server}}
            </div>
          </mat-list-item>
        </mat-list>
        <div mat-subheader *ngIf="homeRelo.length > 0 || hostRelo.length > 0">Relocation</div>
        <mat-divider *ngIf="homeRelo.length > 0 || hostRelo.length > 0"></mat-divider>
        <mat-list *ngIf="homeRelo.length > 0">
          <span style="text-transform: capitalize; font-size: 12px">Home - {{homeRelo[0].country}}</span>
          <mat-list-item *ngFor="let item of homeRelo">
            <div mat-line style="font-size: 12px !important;"><b>{{item.service_name}}</b></div>
            <div mat-line style="font-size: 10px;">
              {{item.numberWorkOrder}},
              {{item.number_server}}
            </div>
          </mat-list-item>
        </mat-list>
        <mat-list *ngIf="hostRelo.length > 0">
          <span style="text-transform: capitalize; font-size: 12px">Host - {{hostRelo[0].country}}</span>
          <mat-list-item *ngFor="let item of hostRelo">
            <div mat-line style="font-size: 12px !important;"><b>{{item.service_name}}</b></div>
            <div mat-line style="font-size: 10px;">
              {{item.numberWorkOrder}},
              {{item.number_server}}
            </div>
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </mat-menu> -->
